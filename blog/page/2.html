<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Atom Feed"><title data-react-helmet="true">Blog | My Site</title><meta data-react-helmet="true" property="og:title" content="Blog | My Site"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://jiaozitang.github.io/blog/page/2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jiaozitang.github.io/blog/page/2"><link data-react-helmet="true" rel="alternate" href="https://jiaozitang.github.io/blog/page/2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jiaozitang.github.io/blog/page/2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1098517f.css">
<link rel="preload" href="/assets/js/runtime~main.5fde237b.js" as="script">
<link rel="preload" href="/assets/js/main.5fad3d91.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/front-end/code">å‰ç«¯</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jiaozitang/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">All posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/11/04/pnpm">è¯´å®è¯ï¼Œä¸å¾—ä¸ç”¨ pnpm çš„åŸå› ï¼Œè¿˜å¾—æ˜¯ç”µè„‘å†…å­˜ä¸å¤Ÿç”¨</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/09/19/rollup">ã€å®æˆ˜ç¯‡ã€‘æœ€è¯¦ç»†çš„Rollupæ‰“åŒ…é¡¹ç›®æ•™ç¨‹</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/09/18/component">5 ç§ç€‘å¸ƒæµåœºæ™¯çš„å®ç°åŸç†è§£æ</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/09/17/react-component">ä»0åˆ°1å¼€å‘ä¸€ä¸ªReactç»„ä»¶åº“</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/09/08/ts">ç±»å‹ä½“æ“çš„9ç§ç±»å‹è¿ç®—ã€4ç§ç±»å‹å¥—è·¯æ€»ç»“</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/09/04/git">20ä¸ªå¸¸ç”¨çš„ Git æŒ‡ä»¤ç”¨æ³•</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/08/28/lerna">lerna</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/08/14/hooks">hooks</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/07/31/devtools2">ä¸€äº›æœ‰ç”¨çš„ JavaScript è°ƒè¯•æŠ€å·§</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/07/30/devtools1">devtools1</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/06/24/storybook">æµ…å­¦ä¸€ä¸‹ storybook</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/06/13/module-federation">æµ…å­¦ä¸€ä¸‹ webpack5 module federation</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/05/23/ts">Typescript å¸¸ç”¨ç‰¹æ€§å°ç»“</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/03/12/function-code">JavaScript å‡½æ•°å¼ç¼–ç¨‹-å…¥é—¨ç¯‡</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/02/12/React-Hooks">React-ä½ æœ‰å®Œå…¨äº†è§£ Hooks å—</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/02/11/up-up-up">ä¸“æ å­¦ä¹ å¿ƒå¾—ã€Šå¤§å‚æ™‹å‡æŒ‡å—ã€‹</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2022/01/31/ã€è¯‘ã€‘ä½ çŸ¥é“ Code Review åº”è¯¥æ£€æŸ¥å“ªäº›é—®é¢˜å—">ã€è¯‘ã€‘ä½ çŸ¥é“ Code Review åº”è¯¥æ£€æŸ¥å“ªäº›é—®é¢˜å—</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/å®è·µæŒ‡å—-å¿«é€Ÿæ­å»ºæ–‡æ¡£ç³»ç»Ÿ">å®è·µæŒ‡å—-å¿«é€Ÿæ­å»ºæ–‡æ¡£ç³»ç»Ÿ</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/12/20/how-to-join-Taro">å¦‚ä½•å‚ä¸å¤§å‹å¼€æºé¡¹ç›®-Taro å…±å»º</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/07/22/simple-react">æ‰‹å†™ç³»åˆ—-å®ç°ä¸€ä¸ªé“‚é‡‘æ®µä½çš„ React</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/06/24/storybook">æµ…å­¦ä¸€ä¸‹ storybook</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-06-24T00:00:00.000Z" itemprop="datePublished">June 24, 2022</time> Â· <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä»€ä¹ˆæ˜¯-storybook">ä»€ä¹ˆæ˜¯ storybook<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-storybook" title="Direct link to heading">â€‹</a></h2><p><a href="https://storybook.js.org/docs/react/get-started/introduction/" target="_blank" rel="noopener noreferrer">storybook</a>æ˜¯ä¸€ä¸ªç»„ä»¶å¼€å‘å·¥å…·ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„ç»„ä»¶å¼€å‘çš„ç”Ÿæ€ç¯å¢ƒï¼ŒåŒ…æ‹¬æ’ä»¶ã€ç”¨ä¾‹ã€æ–‡æ¡£ç­‰ç­‰ã€‚</p><p>storybook æ”¯æŒ reactã€vueã€angularã€web component ç­‰ä¸»æµå‰ç«¯ UI æ¡†æ¶ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="æ€ä¹ˆç”¨-storybook">æ€ä¹ˆç”¨ storybook<a class="hash-link" href="#æ€ä¹ˆç”¨-storybook" title="Direct link to heading">â€‹</a></h2><p>storybook éœ€è¦å®‰è£…åˆ°å·²ç»è®¾ç½®äº†æ¡†æ¶çš„é¡¹ç›®ä¸­ã€‚</p><p>æ–°å»º react åº”ç”¨</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npx create-react-app react-app</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åˆå§‹åŒ– storybook é…ç½®</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npx storybook init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯åŠ¨ storybook</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npm run storybook</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f606359fdc834fa38fb9c84ac8f8fe98~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>ç»™ç»„ä»¶å†™ storyï¼Œä¸€ä¸ª story è¡¨ç¤ºç»„ä»¶çš„ä¸€ç§çŠ¶æ€ã€‚</p><p>story çš„æ–‡ä»¶åçº¦å®šä¸º.stories.jsã€‚</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">import React from &#x27;react&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { Button } from &#x27;./Button&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title: &#x27;Button&#x27;, // ä¾§è¾¹æ å¯¼èˆªåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  component: Button, // ç»„ä»¶åœ°å€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const Primary = () =&gt; &lt;Button primary&gt;Button&lt;/Button&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>storybook å‘ˆç°çš„ç”¨ä¾‹å±•ç¤ºå¦‚ä¸‹</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/620e0dc2ff2544b18560a8efcc506944~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>storybook é™„å¸¦äº†å†…ç½®çš„å·¥å…·æ ï¼š</p><ul><li>canvasï¼šç”¨äºç¼©æ”¾ç»„ä»¶ã€è®¾ç½®èƒŒæ™¯ã€è®¾ç½®å°ºå¯¸åŠæ–¹å‘</li><li>docsï¼šç”¨äºæŸ¥çœ‹ç»„ä»¶æ–‡æ¡£ï¼Œä»ç»„ä»¶ä»£ç è‡ªåŠ¨æ¨æ–­</li></ul><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/160e54ad953b4066aa6dbd8a3db86882~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>storybook é™„å¸¦äº†å†…ç½®çš„æ’ä»¶ï¼š</p><ul><li>controlsï¼šæ”¯æŒåŠ¨æ€ä¿®æ”¹ç»„ä»¶å‚æ•°</li><li>actionsï¼šéªŒè¯äº¤äº’æ˜¯å¦é€šè¿‡å›è°ƒäº§ç”Ÿæ­£ç¡®çš„è¾“å‡º</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://storybook.js.org/docs/react/get-started/introduction/" target="_blank" rel="noopener noreferrer">storybook å®˜ç½‘</a></li><li><a href="https://juejin.cn/post/6862258700430606349" target="_blank" rel="noopener noreferrer">[Web ç¿»è¯‘]Storybook 6.0</a></li><li><a href="https://juejin.cn/post/6844903873602125838" target="_blank" rel="noopener noreferrer">StoryBook å®æˆ˜</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/06/13/module-federation">æµ…å­¦ä¸€ä¸‹ webpack5 module federation</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-06-13T00:00:00.000Z" itemprop="datePublished">June 13, 2022</time> Â· <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="Direct link to heading">â€‹</a></h2><p>åœ¨ä¸€ä¸ªå¤§ä¸­å°é¡¹ç›®ä¸­ï¼Œæ€ä¹ˆé«˜æ•ˆé«˜æ€§èƒ½çš„å°†å¤šä¸ªå­é¡¹ç›®äº’ç›¸åµŒå…¥ï¼Ÿ</p><p>ç†ŸçŸ¥çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆæœ‰ micro-appã€qiankunã€webpack5 module federation ç­‰ç­‰ã€‚</p><p>é‚£ webpack5 module federation æ˜¯ä»€ä¹ˆã€å¦‚ä½•ä½¿ç”¨ã€å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æœ¬æ–‡å°†ä¸€ä¸€æ­æ™“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="module-federation-æ˜¯ä»€ä¹ˆ">module federation æ˜¯ä»€ä¹ˆ<a class="hash-link" href="#module-federation-æ˜¯ä»€ä¹ˆ" title="Direct link to heading">â€‹</a></h2><p>module federation è¯‘ä¸ºæ¨¡å—è”é‚¦ï¼Œæ„æ€æ˜¯æ¨¡å—å¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´äº’ç›¸ä½¿ç”¨ï¼Œåº”ç”¨ a å¯ä»¥å¯¼å‡ºæ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åº”ç”¨ b å¯¼å‡ºçš„è¿œç¨‹æ¨¡å—ã€‚</p><p>module federation å°±æ˜¯å¾®å‰ç«¯çš„ä¸€ç§ï¼Œè€Œè¿™ç§å¾®å‰ç«¯å’Œ micro-appã€qiankun ç­‰å¾®å‰ç«¯æ¡†æ¶ç¡®æœ‰æœ¬è´¨çš„åŒºåˆ«ã€‚</p><p>é¢—ç²’åº¦çš„å®šä¹‰ï¼š</p><ul><li>module federationï¼šå¤šä¸ªäº’ç›¸ç‹¬ç«‹çš„æ¨¡å—èšåˆï¼›</li><li>qiankunï¼šå¤šä¸ªäº’ç›¸ç‹¬ç«‹çš„åº”ç”¨èšåˆã€‚</li></ul><p>æŠ€æœ¯å®ç°ï¼š</p><ul><li>module federationï¼šæ‰“åŒ…çš„ chunk çš„èšåˆï¼›</li><li>qiankunï¼šæ‰“åŒ…çš„ main.js çš„èšåˆã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨<a class="hash-link" href="#å¦‚ä½•ä½¿ç”¨" title="Direct link to heading">â€‹</a></h2><p>åœ¨ webpack5 é¡¹ç›®ä¸­æ–°å¢ module federation plugin é…ç½®ã€‚</p><p>é…ç½®é¡¹å¦‚ä¸‹ï¼š</p><ul><li>nameï¼šåº”ç”¨åç§°ï¼Œå½“ä½œä¸º remote å¼•ç”¨æ—¶ï¼Œè·¯å¾„ä¸º name/exposeï¼›</li><li>libraryï¼šå£°æ˜å…¨å±€å˜é‡çš„æ–¹å¼ï¼Œname ä¸º umd çš„ nameï¼›</li><li>filenameï¼šæ„å»ºè¾“å‡ºçš„æ–‡ä»¶åï¼›</li><li>remotesï¼šè¿œç¨‹å¼•ç”¨çš„åº”ç”¨ååŠå…¶åˆ«åçš„æ˜ å°„ï¼Œä½¿ç”¨æ—¶ä»¥ key å€¼ä½œä¸º nameï¼›</li><li>exposesï¼šè¢«è¿œç¨‹å¼•ç”¨æ—¶å¯æš´éœ²çš„èµ„æºè·¯å¾„åŠå…¶åˆ«åï¼›</li><li>sharedï¼šä¸å…¶ä»–åº”ç”¨ä¹‹é—´å¯ä»¥å…±äº«çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼›<ul><li>requiredVersion: ä¾èµ–çš„ç‰ˆæœ¬ï¼›</li><li>singleton: ä»…å…è®¸å…±äº«èŒƒå›´å†…çš„å•ä¸ªç‰ˆæœ¬ï¼›</li><li>eager: å…è®¸åœ¨åˆå§‹å—ä¸­ä½¿ç”¨è¿™ä¸ªå…±äº«æ¨¡å—ã€‚</li></ul></li></ul><p>é¡¹ç›® 1 çš„é…ç½®ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;host&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      remotes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        remote1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;remote1@[remote1Url]/remoteEntry.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;libs@[libsUrl]/remoteEntry.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é¡¹ç›® 2 çš„é…ç½®ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;remote1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;remoteEntry.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exposes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;./Button&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./src/Button&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  remotes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;libs@[libsUrl]/remoteEntry.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é€šè¿‡ module federation å®ç°äº†é¡¹ç›® 1 çš„ Button ç»„ä»¶åœ¨é¡¹ç›® 2 çš„èšåˆã€‚</p><p>ç¤ºä¾‹ demo è§ï¼š<a href="https://github.com/jiaozitang/mf-demo" target="_blank" rel="noopener noreferrer">https://github.com/jiaozitang/mf-demo</a>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="åŸç†">åŸç†<a class="hash-link" href="#åŸç†" title="Direct link to heading">â€‹</a></h2><p>module federation è¿œç¨‹æ¨¡å— remotes å’Œå…±äº«æ¨¡å— shared éƒ½æ˜¯å¼‚æ­¥ chunkï¼Œé€šè¿‡ import åŠ¨æ€å¼•å…¥ï¼Œå®ç°æŒ‰éœ€åŠ è½½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å°ç»“">å°ç»“<a class="hash-link" href="#å°ç»“" title="Direct link to heading">â€‹</a></h2><p>module federation çš„åº”ç”¨åœºæ™¯æœ‰é™ï¼Œå› ä¸ºå®ƒä»…ä»…æ˜¯æ¨¡å—çš„èšåˆï¼Œä¸å…·å¤‡åº”ç”¨ä¹‹é—´çš„éš”ç¦»æ€§ã€‚</p><p>é€šå¸¸é€‚ç”¨äºå¤šä¸ªåº”ç”¨ä¾èµ–ä¸åŒç»„ä»¶åº“çš„ç»„ä»¶çš„åœºæ™¯ã€‚</p><p>è¿™äº›ç»„ä»¶åº“å°†ç»„ä»¶é€šè¿‡ module federation æš´éœ²ï¼Œåº”ç”¨é€šè¿‡ module federation å¼•å…¥è¿œç¨‹ç»„ä»¶ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://zhuanlan.zhihu.com/p/352936804" target="_blank" rel="noopener noreferrer">Module Federation æ²¡æœ‰é­”æ³•ä»…ä»…æ˜¯å¼‚æ­¥chunk</a></li><li><a href="https://www.cnblogs.com/breakdown/p/15336672.html" target="_blank" rel="noopener noreferrer">ModuleFederation-æ¨¡å—è”é‚¦</a></li><li><a href="https://webpack.docschina.org/concepts/module-federation/" target="_blank" rel="noopener noreferrer">https://webpack.docschina.org/concepts/module-federation/</a></li><li><a href="https://webpack.docschina.org/plugins/module-federation-plugin" target="_blank" rel="noopener noreferrer">https://webpack.docschina.org/plugins/module-federation-plugin</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/05/23/ts">Typescript å¸¸ç”¨ç‰¹æ€§å°ç»“</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-05-23T00:00:00.000Z" itemprop="datePublished">May 23, 2022</time> Â· <!-- -->14 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€é«˜çº§ç±»å‹">ä¸€ã€é«˜çº§ç±»å‹<a class="hash-link" href="#ä¸€é«˜çº§ç±»å‹" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="äº¤å‰ç±»å‹">äº¤å‰ç±»å‹<a class="hash-link" href="#äº¤å‰ç±»å‹" title="Direct link to heading">â€‹</a></h3><p>äº¤å‰ç±»å‹å°±æ˜¯é€šè¿‡ &amp; ç¬¦å·ï¼Œå°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">I1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">I2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="è”åˆç±»å‹">è”åˆç±»å‹<a class="hash-link" href="#è”åˆç±»å‹" title="Direct link to heading">â€‹</a></h3><p>è”åˆç±»å‹å°±æ˜¯é€šè¿‡ | ç¬¦å·ï¼Œè¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹">å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹<a class="hash-link" href="#å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹" title="Direct link to heading">â€‹</a></h3><p>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ä½œä¸ºå˜é‡çš„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ•°å­—å­—é¢é‡ç±»å‹">æ•°å­—å­—é¢é‡ç±»å‹<a class="hash-link" href="#æ•°å­—å­—é¢é‡ç±»å‹" title="Direct link to heading">â€‹</a></h3><p>æ•°å­—å­—é¢é‡ç±»å‹å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªæ•°å­—ä½œä¸ºå˜é‡çš„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å¸ƒå°”å­—é¢é‡ç±»å‹">å¸ƒå°”å­—é¢é‡ç±»å‹<a class="hash-link" href="#å¸ƒå°”å­—é¢é‡ç±»å‹" title="Direct link to heading">â€‹</a></h3><p>æ•°å­—å­—é¢é‡ç±»å‹å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå¸ƒå°”å€¼ä½œä¸ºå˜é‡çš„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹">å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹<a class="hash-link" href="#å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹" title="Direct link to heading">â€‹</a></h3><p>å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹å°±æ˜¯é€šè¿‡ ES6 çš„æ¨¡æ¿å­—ç¬¦ä¸²è¯­æ³•ï¼Œå¯¹ç±»å‹è¿›è¡Œçº¦æŸã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type https </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">https://</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">string</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">https </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">https://jd.com</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒæ“ä½œç¬¦">äºŒã€æ“ä½œç¬¦<a class="hash-link" href="#äºŒæ“ä½œç¬¦" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="keyof">keyof<a class="hash-link" href="#keyof" title="Direct link to heading">â€‹</a></h3><p>keyof ç”¨äºè·å–æŸç§ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›å€¼æ˜¯è”åˆç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// const a: &#x27;name&#x27; | &#x27;age&#x27; = &#x27;name&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> keyof </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="typeof">typeof<a class="hash-link" href="#typeof" title="Direct link to heading">â€‹</a></h3><p>typeof ç”¨äºè·å–å¯¹è±¡æˆ–è€…å‡½æ•°çš„ç»“æ„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> a2 </span><span class="token comment" style="color:#999988;font-style:italic">// {name: string}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fn1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> fn1 </span><span class="token comment" style="color:#999988;font-style:italic">// (x: number) =&gt; number</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="in">in<a class="hash-link" href="#in" title="Direct link to heading">â€‹</a></h3><p>in ç”¨äºéå†è”åˆç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> keyof </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  name: any,</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  age: any</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="tk">T<!-- -->[K]<a class="hash-link" href="#tk" title="Direct link to heading">â€‹</a></h3><p>T<!-- -->[K]<!-- --> ç”¨äºè®¿é—®ç´¢å¼•ï¼Œå¾—åˆ°ç´¢å¼•å¯¹åº”çš„å€¼çš„è”åˆç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">I3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I3</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">keyof </span><span class="token constant" style="color:#36acaa">I3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string | number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰è¿ç®—ç¬¦">ä¸‰ã€è¿ç®—ç¬¦<a class="hash-link" href="#ä¸‰è¿ç®—ç¬¦" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="éç©ºæ–­è¨€è¿ç®—ç¬¦">éç©ºæ–­è¨€è¿ç®—ç¬¦<a class="hash-link" href="#éç©ºæ–­è¨€è¿ç®—ç¬¦" title="Direct link to heading">â€‹</a></h3><p>éç©ºæ–­è¨€è¿ç®—ç¬¦ ! ç”¨äºå¼ºè°ƒå…ƒç´ æ˜¯é null é undefinedï¼Œå‘Šè¯‰ Typescript è¯¥å±æ€§ä¼šè¢«æ˜ç¡®çš„èµ‹å€¼ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Demo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">JSX</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">Element</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> divRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useRef</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">HTMLDivElement</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    divRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">scrollIntoView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ–­è¨€divRef.current æ˜¯é null é undefined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div ref</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">divRef</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">divDemo</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å¯é€‰é“¾è¿ç®—ç¬¦">å¯é€‰é“¾è¿ç®—ç¬¦<a class="hash-link" href="#å¯é€‰é“¾è¿ç®—ç¬¦" title="Direct link to heading">â€‹</a></h3><p>å¯é€‰é“¾è¿ç®—ç¬¦ ?. ç”¨äºåˆ¤æ–­å·¦ä¾§è¡¨è¾¾å¼çš„å€¼æ˜¯å¦æ˜¯ null æˆ– undefinedï¼Œå¦‚æœæ˜¯å°†åœæ­¢è¡¨è¾¾å¼è¿è¡Œã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">a</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦">ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦<a class="hash-link" href="#ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦" title="Direct link to heading">â€‹</a></h3><p>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ ?? ç”¨äºåˆ¤æ–­å·¦ä¾§è¡¨è¾¾å¼çš„å€¼æ˜¯å¦æ˜¯ null æˆ– undefinedï¼Œå¦‚æœä¸æ˜¯è¿”å›å³ä¾§çš„å€¼ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ•°å­—åˆ†éš”ç¬¦">æ•°å­—åˆ†éš”ç¬¦<a class="hash-link" href="#æ•°å­—åˆ†éš”ç¬¦" title="Direct link to heading">â€‹</a></h3><p>æ•°å­—åˆ†éš”ç¬¦ <!-- -->_<!-- --> ç”¨äºå¯¹é•¿æ•°å­—è¿›è¡Œåˆ†å‰²ï¼Œä¾¿äºæ•°å­—çš„é˜…è¯»ï¼Œç¼–è¯‘ç»“æœå°†ä¼šè‡ªåŠ¨å»é™¤ <!-- -->_<!-- -->ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> num</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1_111_111_111</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å››ç±»å‹åˆ«å">å››ã€ç±»å‹åˆ«å<a class="hash-link" href="#å››ç±»å‹åˆ«å" title="Direct link to heading">â€‹</a></h2><p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Message</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">greet</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">message</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äº”ç±»å‹æ–­è¨€">äº”ã€ç±»å‹æ–­è¨€<a class="hash-link" href="#äº”ç±»å‹æ–­è¨€" title="Direct link to heading">â€‹</a></h2><p>ç±»å‹æ–­è¨€å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨æˆ‘éå¸¸ç¡®å®šçš„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// å°–æ‹¬å· è¯­æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> someValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> any </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is a string&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> strLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">someValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// as è¯­æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> someValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> any </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is a string&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> strLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">someValue </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸ƒç±»å‹å®ˆå«">ä¸ƒã€ç±»å‹å®ˆå«<a class="hash-link" href="#ä¸ƒç±»å‹å®ˆå«" title="Direct link to heading">â€‹</a></h2><p>ç±»å‹å®ˆå«å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">A</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">B</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  home</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">person</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> A </span><span class="token parameter operator" style="color:#393A34">|</span><span class="token parameter"> B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ in ç±»å‹å®ˆå«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">person</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> A </span><span class="token parameter operator" style="color:#393A34">|</span><span class="token parameter"> B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ typeof ç±»å‹å®ˆå«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">A</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">a</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> string </span><span class="token parameter operator" style="color:#393A34">|</span><span class="token parameter"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> number </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// instanceofç±»å‹å®ˆå«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Bar</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">input</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Foo </span><span class="token parameter operator" style="color:#393A34">|</span><span class="token parameter"> Bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿™é‡Œ input çš„ç±»å‹ã€Œæ”¶ç´§ã€ä¸º Foo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿™é‡Œ input çš„ç±»å‹ã€Œæ”¶ç´§ã€ä¸º Bar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å…«æ³›å‹">å…«ã€æ³›å‹<a class="hash-link" href="#å…«æ³›å‹" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-æ³›å‹ä»‹ç»">1. æ³›å‹ä»‹ç»<a class="hash-link" href="#1-æ³›å‹ä»‹ç»" title="Direct link to heading">â€‹</a></h3><p>æ³›å‹å°±æ˜¯é€šè¿‡ç»™ç±»å‹ä¼ å‚ï¼Œå¾—åˆ°ä¸€ä¸ªæ›´åŠ é€šç”¨çš„ç±»å‹ï¼Œå°±åƒç»™å‡½æ•°ä¼ å‚ä¸€æ ·ã€‚</p><p>å¦‚ä¸‹æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé€šç”¨çš„æ³›å‹ç±»å‹ T1ï¼Œé€šè¿‡ä¼ å‚ï¼Œå¯ä»¥å¾—åˆ° T2 ç±»å‹ string[]ã€T3 ç±»å‹ number[]ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string[]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// number[]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦‚ä¸Š T æ˜¯å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»»æ„å…¶ä»–å˜é‡åä»£æ›¿ä»–ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T4</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">A</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">A</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T4</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string[]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T4</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// number[]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-å‘½åè§„èŒƒ">2. å‘½åè§„èŒƒ<a class="hash-link" href="#2-å‘½åè§„èŒƒ" title="Direct link to heading">â€‹</a></h3><p>åœ¨ Typescript æ³›å‹å˜é‡çš„å‘½åè§„èŒƒä¸­ï¼Œé»˜è®¤äº† 4 ç§å¸¸è§çš„æ³›å‹å˜é‡åï¼Œä¸ºæé«˜å¯è¯»æ€§ï¼Œä¸å»ºè®®æ”¹ä¸ºå…¶ä»–çš„å˜é‡åæ¥å®šä¹‰ã€‚</p><ul><li>Tï¼šè¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°</li><li>Kï¼š è¡¨ç¤ºå¯¹è±¡çš„é”®ç±»å‹</li><li>Vï¼šè¡¨ç¤ºå¯¹è±¡çš„å€¼ç±»å‹</li><li>Eï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-æ³›å‹æ¥å£">3. æ³›å‹æ¥å£<a class="hash-link" href="#3-æ³›å‹æ¥å£" title="Direct link to heading">â€‹</a></h3><p>æ³›å‹æ¥å£å’Œä¸Šè¿°ç¤ºä¾‹ç±»ä¼¼ï¼Œä¸ºæ¥å£ç±»å‹ä¼ å‚ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">I1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">I2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-æ³›å‹çº¦æŸextends-æ“ä½œç¬¦">4. æ³›å‹çº¦æŸ(extends æ“ä½œç¬¦)<a class="hash-link" href="#4-æ³›å‹çº¦æŸextends-æ“ä½œç¬¦" title="Direct link to heading">â€‹</a></h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ³›å‹å‚æ•°è¿›è¡Œçº¦æŸï¼Œé™åˆ¶æ¯ä¸ªå˜é‡çš„ç±»å‹ã€‚Typescript é€šè¿‡ extends å®ç°ç±»å‹çº¦æŸã€‚</p><p>æ³›å‹çº¦æŸè¯­æ³•å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">æ³›å‹å </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> ç±»å‹</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é€šè¿‡ T extends Length çº¦æŸäº† T çš„ç±»å‹ï¼Œå¿…é¡»æ˜¯åŒ…å« length å±æ€§ï¼Œä¸” length çš„ç±»å‹å¿…é¡»æ˜¯ numberã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Length</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> fn1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Length</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> arg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é€šè¿‡ extends çº¦æŸäº† K å¿…é¡»æ˜¯ T çš„ keyã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> getProperty</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">keyof</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> tsInfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Typescript&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    supersetOf</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Javascript&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    difficulty</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Difficulty</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Intermediate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> difficulty</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Difficulty</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tsInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;difficulty&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> supersetOf</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tsInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;superset_of&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-æ³›å‹å‚æ•°é»˜è®¤å€¼">5. æ³›å‹å‚æ•°é»˜è®¤å€¼<a class="hash-link" href="#5-æ³›å‹å‚æ•°é»˜è®¤å€¼" title="Direct link to heading">â€‹</a></h3><p>æ³›å‹å‚æ•°é»˜è®¤å€¼ï¼Œå’Œå‡½æ•°å‚æ•°é»˜è®¤å€¼ä¸€æ ·ï¼Œåœ¨æ²¡æœ‰ä¼ å‚æ—¶ï¼Œç»™å®šé»˜è®¤å€¼ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">I4</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">S1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;123&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é»˜è®¤ name: stringç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">S2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I4</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="6-æ³›å‹æ¡ä»¶">6. æ³›å‹æ¡ä»¶<a class="hash-link" href="#6-æ³›å‹æ¡ä»¶" title="Direct link to heading">â€‹</a></h3><p>æ¡ä»¶ç±»å‹å’Œ Js çš„æ¡ä»¶åˆ¤æ–­æ„æ€ä¸€æ ·ï¼Œéƒ½æ˜¯æŒ‡å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°± xxï¼Œå¦åˆ™ xxã€‚</p><p>æ¡ä»¶ç±»å‹è¡¨è¾¾å¼ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">U</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">X</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Y</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦‚æœ T èƒ½å¤Ÿèµ‹å€¼ç»™ Uï¼Œé‚£ä¹ˆç±»å‹æ˜¯ Xï¼Œå¦åˆ™ç±»å‹æ˜¯ Yã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;string&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T1</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;number</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="7-æ³›å‹æ¨æ–­infer-æ“ä½œç¬¦">7. æ³›å‹æ¨æ–­(infer æ“ä½œç¬¦)<a class="hash-link" href="#7-æ³›å‹æ¨æ–­infer-æ“ä½œç¬¦" title="Direct link to heading">â€‹</a></h3><p>æ³›å‹æ¨æ–­çš„å…³é”®å­—æ˜¯ inferï¼Œè¯­æ³•æ˜¯ <code>infer ç±»å‹</code>ã€‚</p><p>ä¸€èˆ¬æ˜¯å’Œæ³›å‹æ¡ä»¶ç»“åˆä½¿ç”¨ï¼Œç»“åˆå®é™…ä¾‹å­ç†è§£ï¼š</p><p>å¦‚æœæ³›å‹å‚æ•° T èƒ½èµ‹å€¼ç»™ç±»å‹ <code>{t: infer Test}</code>ï¼Œé‚£ä¹ˆç±»å‹æ˜¯æ¨æ–­ç±»å‹ Testï¼Œå¦åˆ™ç±»å‹æ˜¯ stringã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Foo</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> infer </span><span class="token maybe-class-name">Test</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token maybe-class-name">Test</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>æ³›å‹å‚æ•° number æ²¡æœ‰ t å±æ€§ï¼Œæ‰€ä»¥ç±»å‹æ˜¯ string</li></ul><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">One</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>æ³›å‹å‚æ•°çš„ t å±æ€§æ˜¯ booleanï¼Œæ‰€ä»¥ç±»å‹æ˜¯æ¨æ–­ç±»å‹ boolean</li></ul><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Two</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> boolean </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// boolean</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ³›å‹å‚æ•°çš„ t å±æ€§æ˜¯ () =&gt; voidï¼Œæ‰€ä»¥ç±»å‹æ˜¯æ¨æ–­ç±»å‹ () =&gt; void</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Three</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// () =&gt; void</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="8-æ³›å‹å·¥å…·ç±»å‹">8. æ³›å‹å·¥å…·ç±»å‹<a class="hash-link" href="#8-æ³›å‹å·¥å…·ç±»å‹" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ˜ å°„ç±»å‹">æ˜ å°„ç±»å‹<a class="hash-link" href="#æ˜ å°„ç±»å‹" title="Direct link to heading">â€‹</a></h4><p>æ˜ å°„ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ç§æ³›å‹ç±»å‹ï¼Œå¯ç”¨äºæŠŠåŸæœ‰çš„å¯¹è±¡ç±»å‹æ˜ å°„æˆæ–°çš„å¯¹è±¡ç±»å‹ã€‚</p><p>å¸¸è§çš„æ˜ å°„ç±»å‹è¯­æ³•ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> readonly </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> readonly </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">readonly </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸¾ä¾‹è¯´æ˜ï¼Œé€šè¿‡æ˜ å°„ç±»å‹å°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ï¼š</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> keyof </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="partial">Partial<a class="hash-link" href="#partial" title="Direct link to heading">â€‹</a></h4><p>Typescript å·²å°†ä¸€äº›å¸¸ç”¨çš„æ˜ å°„ç±»å‹è¿›è¡Œå°è£…ï¼Œå¦‚ Partial å°±æ˜¯ç”¨äºå°†æ³›å‹çš„å…¨éƒ¨å±æ€§å˜ä¸ºå¯é€‰ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> keyof </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ²¡æœ‰nameå±æ€§ä¹Ÿä¸ä¼šæŠ¥é”™</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="required">Required<a class="hash-link" href="#required" title="Direct link to heading">â€‹</a></h4><p>Required å°†æ³›å‹çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¿…é€‰ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Required</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> keyof </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Required</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> b</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// tsæŠ¥é”™ï¼Œç±»å‹ &quot;{}&quot; ä¸­ç¼ºå°‘å±æ€§ &quot;name&quot;ï¼Œä½†ç±»å‹ &quot;Required&lt;{ name?: string | undefined; }&gt;&quot; ä¸­éœ€è¦è¯¥å±æ€§ã€‚ts(2741)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>è¯­æ³•-?ï¼Œæ˜¯æŠŠ?å¯é€‰å±æ€§å‡å»çš„æ„æ€</p></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="readonly">Readonly<a class="hash-link" href="#readonly" title="Direct link to heading">â€‹</a></h4><p>Readonly å°†æ³›å‹çš„æ‰€æœ‰å±æ€§å˜ä¸ºåªè¯»ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Readonly</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> c</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj1&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ts æŠ¥é”™ï¼Œæ— æ³•åˆ†é…åˆ° &quot;name&quot; ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§ã€‚ts(2540)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="pick">Pick<a class="hash-link" href="#pick" title="Direct link to heading">â€‹</a></h4><p>Pick ä»ç±»å‹ä¸­é€‰æ‹©ä¸€ä¸‹å±æ€§ï¼Œç”Ÿæˆä¸€ä¸ªæ–°ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Pick</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">keyof</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">P</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Pick</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">è¿™æ˜¯ä¸€ä¸ªæ–°ç±»å‹ï¼ŒT4={name: string}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> d</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="record">Record<a class="hash-link" href="#record" title="Direct link to heading">â€‹</a></h4><p>Record å°† key å’Œ value è½¬åŒ–ä¸º T ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">keyof</span><span class="token plain"> any</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> e</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tj&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> f</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>keyof any å¯¹åº”çš„ç±»å‹ä¸º number | string | symbolï¼Œæ˜¯å¯ä»¥åšå¯¹è±¡é”®çš„ç±»å‹é›†åˆã€‚</p></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="returntype">ReturnType<a class="hash-link" href="#returntype" title="Direct link to heading">â€‹</a></h4><p>ReturnType è·å– T ç±»å‹å¯¹åº”çš„è¿”å›å€¼ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">ReturnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> any</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> infer </span><span class="token constant" style="color:#36acaa">R</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">R</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> any</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="exclude">Exclude<a class="hash-link" href="#exclude" title="Direct link to heading">â€‹</a></h4><p>Exclude å°†æŸä¸ªç±»å‹ä¸­å±äºå¦ä¸€ä¸ªçš„ç±»å‹ç§»é™¤æ‰ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">U</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> never </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;b&quot; | &quot;c&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;c&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string | number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="extract">Extract<a class="hash-link" href="#extract" title="Direct link to heading">â€‹</a></h4><p>Extract ä» T ä¸­æå–å‡º Uã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Extract</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">U</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> never</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Extract</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;f&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Extract</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// () =&gt;void</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="omit">Omit<a class="hash-link" href="#omit" title="Direct link to heading">â€‹</a></h4><p>Omit ä½¿ç”¨ T ç±»å‹ä¸­é™¤äº† K ç±»å‹çš„æ‰€æœ‰å±æ€§ï¼Œæ¥æ„é€ ä¸€ä¸ªæ–°çš„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Omit</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">keyof</span><span class="token plain"> any</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Pick</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">keyof </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">K</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  completed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">TodoPreview</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Omit</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;description&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  title: string;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  completed: boolean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="nonnullable">NonNullable<a class="hash-link" href="#nonnullable" title="Direct link to heading">â€‹</a></h4><p>NonNullable ç”¨æ¥è¿‡æ»¤ç±»å‹ä¸­çš„ null åŠ undefined ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">NonNullable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> never </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">NonNullable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string | number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">NonNullable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string[]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="parameters">Parameters<a class="hash-link" href="#parameters" title="Direct link to heading">â€‹</a></h4><p>Parameters ç”¨äºè·å¾—å‡½æ•°çš„å‚æ•°ç±»å‹ç»„æˆçš„å…ƒç»„ç±»å‹ã€‚</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Parameters</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> any</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> infer P</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> never</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">A</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Parameters</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// []</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">B</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Parameters</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">typeofArray</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isArray</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// [any]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">C</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Parameters</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">typeofparseInt</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// [string, (number | undefined)?]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token constant" style="color:#36acaa">D</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Parameters</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">typeofMath</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">max</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// number[]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><p><a href="https://juejin.cn/post/7018805943710253086" target="_blank" rel="noopener noreferrer">2021 typescript å²ä¸Šæœ€å¼ºå­¦ä¹ å…¥é—¨æ–‡ç« (2w å­—)</a></p></li><li><p><a href="https://juejin.cn/post/6926794697553739784" target="_blank" rel="noopener noreferrer">TypeScript é«˜çº§ç”¨æ³•</a></p></li><li><p><a href="https://juejin.cn/post/7003171767560716302#heading-70" target="_blank" rel="noopener noreferrer">é‡å­¦ TypeScript</a></p></li><li><p><a href="https://www.tslang.cn/docs/handbook/advanced-types.html" target="_blank" rel="noopener noreferrer">Typescript å®˜ç½‘</a></p></li><li><p><a href="https://juejin.cn/post/6844904184894980104#heading-2" target="_blank" rel="noopener noreferrer">ä¸€æ–‡è¯»æ‡‚ TypeScript æ³›å‹åŠåº”ç”¨ï¼ˆ 7.8K å­—ï¼‰</a></p></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/03/12/function-code">JavaScript å‡½æ•°å¼ç¼–ç¨‹-å…¥é—¨ç¯‡</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-03-12T19:11:14.000Z" itemprop="datePublished">March 12, 2022</time> Â· <!-- -->10 min read</div></header><div class="markdown" itemprop="articleBody"><p><img src="https://img14.360buyimg.com/ling/jfs/t1/211906/13/12376/431721/6208fae4E49caa61b/7f286fcdbf89fd66.jpg"></p><p>æœ¬æ–‡å°†ä»ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹ã€å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ç­‰ 3 ä¸ªæ–¹é¢å¸¦ä½ å…¥é—¨ Javascript å‡½æ•°å¼ç¼–ç¨‹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹">ä¸€ã€ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹<a class="hash-link" href="#ä¸€ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹" title="Direct link to heading">â€‹</a></h2><p>å…ˆæ¥ä¸€ä¸ªå®˜æ–¹çš„è§£é‡Šï¼š</p><blockquote><p><strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ï¼Œæ˜¯ä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F" target="_blank" rel="noopener noreferrer">ç¼–ç¨‹èŒƒå¼</a>ï¼Œå®ƒå°†<a href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E9%81%8B%E7%AE%97" target="_blank" rel="noopener noreferrer">ç”µè„‘è¿ç®—</a>è§†ä¸º<a href="https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">å‡½æ•°</a>è¿ç®—ï¼Œå¹¶ä¸”é¿å…ä½¿ç”¨ç¨‹åº<a href="https://zh.wikipedia.org/w/index.php?title=%E7%8A%B6%E6%80%81_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener noreferrer">çŠ¶æ€</a>ä»¥åŠ<a href="https://zh.wikipedia.org/wiki/%E4%B8%8D%E5%8F%AF%E8%AE%8A%E7%89%A9%E4%BB%B6" target="_blank" rel="noopener noreferrer">æ˜“å˜å¯¹è±¡</a>ã€‚</p></blockquote><p>æ¯”èµ·<a href="https://zh.wikipedia.org/wiki/%E6%8C%87%E4%BB%A4%E5%BC%8F%E7%B7%A8%E7%A8%8B" target="_blank" rel="noopener noreferrer">å‘½ä»¤å¼ç¼–ç¨‹</a>ï¼Œå‡½æ•°å¼ç¼–ç¨‹æ›´åŠ å¼ºè°ƒç¨‹åºæ‰§è¡Œçš„ç»“æœè€Œéæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå€¡å¯¼åˆ©ç”¨è‹¥å¹²ç®€å•çš„æ‰§è¡Œå•å…ƒè®©è®¡ç®—ç»“æœä¸æ–­æ¸è¿›ï¼Œé€å±‚æ¨å¯¼å¤æ‚çš„è¿ç®—ï¼Œè€Œä¸æ˜¯è®¾è®¡ä¸€ä¸ªå¤æ‚çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-ä¸¾ä¾‹è¯´æ˜">1. ä¸¾ä¾‹è¯´æ˜<a class="hash-link" href="#1-ä¸¾ä¾‹è¯´æ˜" title="Direct link to heading">â€‹</a></h3><p>æœ‰ä¸€ä¸ªæ•°æ®è½¬æ¢çš„éœ€æ±‚ï¼Œéœ€è¦å°† <code>[&#x27;tom&#x27;, &#x27;bob&#x27;, &#x27;alice&#x27;]</code> è½¬æ¢ä¸º <code>[{name: &#x27;Tom&#x27;}, {name: &#x27;Bob&#x27;}, {name: &#x27;Alice&#x27;}]</code>ã€‚</p><p>è§£æä¸€ä¸‹åŠŸèƒ½ç‚¹ï¼š</p><ul><li>å­—ç¬¦ä¸²æ•°ç»„è½¬ <code>key</code> ä¸º <code>name</code> æ•°ç»„å¯¹è±¡ï¼›</li><li><code>name</code> å­—ç¬¦ä¸²è½¬æ¢ä¸ºé¦–å­—ç¬¦å¤§å†™ã€‚</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å‘½ä»¤å¼ç¼–ç¨‹">å‘½ä»¤å¼ç¼–ç¨‹<a class="hash-link" href="#å‘½ä»¤å¼ç¼–ç¨‹" title="Direct link to heading">â€‹</a></h4><p>å‘½ä»¤å¼ç¼–ç¨‹å®ç°è¯¥éœ€æ±‚ï¼Œå®ç°æ€è·¯å¦‚ä¸‹ï¼š</p><ul><li>å£°æ˜ä¸´æ—¶å˜é‡ <code>arr2</code> å­˜æ”¾æ–°æ•°ç»„ï¼›</li><li>å£°æ˜ä¸´æ—¶å˜é‡ <code>first</code>ã€<code>rest</code> å­˜æ”¾å­—ç¬¦ä¸²ï¼Œå¹¶è¿›è¡Œè½¬é¦–å­—æ¯å¤§å†™çš„æ“ä½œï¼›</li><li>é€šè¿‡ <a href="http://array.map" target="_blank" rel="noopener noreferrer">array.map</a> å¾—åˆ°æ–°æ•°ç»„ï¼Œèµ‹å€¼ç»™ <code>arr2</code>ã€‚</li></ul><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;tom&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bob&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;alice&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arr2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">i</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> first </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">substring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> rest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">substring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> first</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toUpperCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> rest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å‡½æ•°å¼ç¼–ç¨‹">å‡½æ•°å¼ç¼–ç¨‹<a class="hash-link" href="#å‡½æ•°å¼ç¼–ç¨‹" title="Direct link to heading">â€‹</a></h4><p>å‡½æ•°å¼ç¼–ç¨‹å®ç°è¯¥éœ€æ±‚ï¼Œå®ç°æ€è·¯å¦‚ä¸‹ï¼š</p><ul><li>å­—ç¬¦ä¸²è½¬é¦–å­—æ¯å¤§å†™çš„å‡½æ•°ï¼›</li><li>å­—ç¬¦ä¸²ç”Ÿæˆå¯¹è±¡çš„å‡½æ•°ï¼›</li><li>å­—ç¬¦ä¸²è½¬æŒ‡å®šæ ¼å¼å¯¹è±¡çš„å‡½æ•°ï¼›</li><li>æ•°ç»„è½¬æ•°ç»„å¯¹è±¡çš„å‡½æ•°ã€‚</li></ul><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> curry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compose</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> map </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ramda&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é¦–å­—ç¬¦å¤§å†™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">capitalize</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toUpperCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å­—ç¬¦ä¸²ç”Ÿæˆå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> genObj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  obj</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å­—ç¬¦ä¸²è½¬å¯¹è±¡ï¼Œexï¼š&#x27;tom&#x27; =&gt; { name: &#x27;Tom&#x27; }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> convert2Obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">genObj</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> capitalize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ•°ç»„è½¬æ•°ç»„å¯¹è±¡ï¼Œexï¼š[&#x27;tom&#x27;] =&gt; [{ name: &#x27;Tom&#x27; }]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> convertName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">convert2Obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">convertName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;tom&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bob&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;alice&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>è¿™å„¿ä½¿ç”¨åˆ°äº† <a href="https://ramda.cn/" target="_blank" rel="noopener noreferrer">ramda</a>  åŒ…ä¸­çš„ <code>curry</code> å’Œ <code>compose</code> å‡½æ•°ã€‚</p></blockquote><p>ä»ä¸Šé¢ä¾‹å­å¯çŸ¥ï¼Œå‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯é€šè¿‡å‡½æ•°çš„ç»„åˆå˜æ¢å»è§£å†³é—®é¢˜çš„ä¸€ç§ç¼–ç¨‹æ–¹å¼ã€‚</p><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°æ˜¯<a href="https://zh.wikipedia.org/wiki/%E5%A4%B4%E7%AD%89%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">å¤´ç­‰å¯¹è±¡</a>ï¼Œæ„æ€æ˜¯è¯´ä¸€ä¸ªå‡½æ•°ï¼Œæ—¢å¯ä»¥ä½œä¸ºå…¶å®ƒå‡½æ•°çš„è¾“å…¥å‚æ•°å€¼ï¼Œä¹Ÿå¯ä»¥ä»å‡½æ•°ä¸­è¿”å›å€¼ï¼Œè¢«ä¿®æ”¹æˆ–è€…è¢«åˆ†é…ç»™ä¸€ä¸ªå˜é‡ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒå‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹">äºŒã€å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹<a class="hash-link" href="#äºŒå‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹" title="Direct link to heading">â€‹</a></h2><p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå‡½æ•°å¼ç¼–ç¨‹çœ‹èµ·æ¥æ¯”å‘½ä»¤å¼ç¼–ç¨‹æ›´åŠ å¤æ‚ï¼Œéš¾ä»¥ç†è§£ï¼Œé‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œå®ƒèƒ½å¤Ÿç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­æœ‰æ›´å¤šç¼–ç¨‹èŒƒå¼çš„é€‰æ‹©ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯é€‰æ‹©ä¸åŒçš„ç¼–ç¨‹èŒƒå¼ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆ Reactã€Redux è¿™äº›æµè¡Œæ¡†æ¶éƒ½é€‰æ‹©å¹¶æ¨èå‡½æ•°å¼ç¼–ç¨‹å‘¢ï¼Ÿå› ä¸ºå‡½æ•°å¼ç¼–ç¨‹ç›¸è¾ƒäºå‘½ä»¤å¼ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ç¼–ç¨‹è€Œè¨€ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œå¯è¯»æ€§é«˜ï¼Œæ–¹ä¾¿æ‰©å±•ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-å£°æ˜å¼ç¼–ç¨‹">1. å£°æ˜å¼ç¼–ç¨‹<a class="hash-link" href="#1-å£°æ˜å¼ç¼–ç¨‹" title="Direct link to heading">â€‹</a></h3><p>å‡½æ•°å¼ç¼–ç¨‹å¤§å¤šæ—¶å€™éƒ½æ˜¯åœ¨å£°æ˜æˆ‘éœ€è¦åšä»€ä¹ˆï¼Œè€Œéæ€ä¹ˆå»åšã€‚è¿™ç§ç¼–ç¨‹é£æ ¼ç§°ä¸ºÂ <a href="https://baike.baidu.com/item/%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B/9939512" target="_blank" rel="noopener noreferrer">å£°æ˜å¼ç¼–ç¨‹</a>ã€‚</p><p>ä¸¾ä¾‹è¯´æ˜ï¼šåœ¨ä½¿ç”¨ React æ—¶ï¼Œåªè¦æè¿°UIï¼Œæ¥ä¸‹æ¥çŠ¶æ€å˜åŒ–å UI å¦‚ä½•æ›´æ–°ï¼Œæ˜¯ React åœ¨è¿è¡Œæ—¶å¸®ä½ å¤„ç†çš„ï¼Œè€Œä¸ç”¨å¼€å‘è€…å»å†™æ¸²æŸ“é€»è¾‘å’Œä¼˜åŒ– diff ç®—æ³•ã€‚</p><p>å£°æ˜å¼ç¼–ç¨‹å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><strong>ç®€åŒ–å¼€å‘è€…çš„å·¥ä½œ</strong></li><li><strong>å‡å°‘é‡å¤å·¥ä½œ</strong></li><li><strong>ç•™ä¸‹æ”¹è¿›çš„ç©ºé—´</strong></li><li><strong>æä¾›å…¨å±€åè°ƒèƒ½åŠ›</strong></li></ul><blockquote><p>æ›´è¯¦ç»†çš„å£°æ˜å¼ç¼–ç¨‹ä»‹ç»ï¼š<a href="https://zhuanlan.zhihu.com/p/26085755" target="_blank" rel="noopener noreferrer">ä»å¹´ä¼šçœ‹å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)</a>ã€‚</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-çº¯å‡½æ•°">2. çº¯å‡½æ•°<a class="hash-link" href="#2-çº¯å‡½æ•°" title="Direct link to heading">â€‹</a></h3><p>å‡½æ•°å¼ç¼–ç¨‹ä½¿ç”¨<strong>çº¯å‡½æ•°</strong>ç»„åˆå˜æ¢è®¡ç®—ï¼Œçº¯å‡½æ•°æŒ‡çš„æ˜¯<strong>ç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡º</strong>ï¼Œçº¯å‡½æ•°æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="21-ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€">2.1 ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€<a class="hash-link" href="#21-ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€" title="Direct link to heading">â€‹</a></h4><p>çº¯å‡½æ•°ä¸ä¼šä¾èµ–å…¨å±€å˜é‡ã€<code>this</code> ç­‰å¤–éƒ¨çŠ¶æ€ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// éçº¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">increment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å¼•ç”¨äº†å¤–éƒ¨å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> counter</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// çº¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">increment</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">counter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="22-æ•°æ®ä¸å¯å˜">2.2 æ•°æ®ä¸å¯å˜<a class="hash-link" href="#22-æ•°æ®ä¸å¯å˜" title="Direct link to heading">â€‹</a></h4><p>çº¯å‡½æ•°ä¸ä¿®æ”¹å…¨å±€å˜é‡ï¼Œä¸ä¿®æ”¹å…¥å‚ï¼Œä¸ä¿®æ”¹å¯¹è±¡ï¼Œå½“éœ€è¦ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç”¨æ¥ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„å¯¹è±¡ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// éçº¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">genObj</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// çº¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">genObj</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="23-æ²¡æœ‰å‰¯ä½œç”¨">2.3 æ²¡æœ‰å‰¯ä½œç”¨<a class="hash-link" href="#23-æ²¡æœ‰å‰¯ä½œç”¨" title="Direct link to heading">â€‹</a></h4><p>çº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå‰¯ä½œç”¨æ˜¯åœ¨è®¡ç®—ç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€ç§å˜åŒ–ï¼Œæˆ–è€…ä¸å¤–éƒ¨ä¸–ç•Œè¿›è¡Œçš„å¯è§‚å¯Ÿçš„äº¤äº’ã€‚</p><blockquote><p>å‰¯ä½œç”¨å¯èƒ½åŒ…å«ï¼Œä½†ä¸é™äºï¼šæ›´æ”¹æ–‡ä»¶ç³»ç»Ÿã€å¾€æ•°æ®åº“æ’å…¥è®°å½•ã€å‘é€ä¸€ä¸ª http è¯·æ±‚ã€å¯å˜æ•°æ®ã€æ‰“å°/logã€è·å–ç”¨æˆ·è¾“å…¥ã€DOM æŸ¥è¯¢ã€è®¿é—®ç³»ç»ŸçŠ¶æ€ç­‰ã€‚</p></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="24-å°ç»“">2.4 å°ç»“<a class="hash-link" href="#24-å°ç»“" title="Direct link to heading">â€‹</a></h4><p>çº¯å‡½æ•°ä¸ä¼šæŒ‡å‘ä¸æ˜çš„ <code>this</code>ã€ä¸ä¼šå¼•ç”¨å…¨å±€å˜é‡ã€ä¸ä¼šç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œå¯ä»¥å¤§å¤§çš„æå‡ä»£ç çš„æ˜“ç»´æŠ¤æ€§ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹">ä¸‰ã€å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹<a class="hash-link" href="#ä¸‰å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹" title="Direct link to heading">â€‹</a></h2><p>å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œé‚£ä¹ˆæ€ä¹ˆæŠŠä¸€ä¸ªå¤æ‚å‡½æ•°è½¬æ¢æˆå¤šä¸ªå•å…ƒå‡½æ•°ï¼Œç„¶åæ€ä¹ˆæŠŠå¤šä¸ªå•å…ƒå‡½æ•°ç»„åˆèµ·æ¥æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œå‘¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰å’Œå‡½æ•°ç»„åˆï¼ˆcomposeï¼‰äº†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-æŸ¯é‡ŒåŒ–curry">1. æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰<a class="hash-link" href="#1-æŸ¯é‡ŒåŒ–curry" title="Direct link to heading">â€‹</a></h3><p>æŸ¯é‡ŒåŒ–çš„å°±æ˜¯å°†ä¸€ä¸ªå¤šå…ƒå‡½æ•°ï¼Œè½¬æ¢æˆä¸€ä¸ªä¾æ¬¡è°ƒç”¨çš„å•å…ƒå‡½æ•°ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> â†’ </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„åŠ æ³•å‡½æ•°ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> increment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> addTen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">increment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">addTen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 12</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦‚ä¸‹æ˜¯ä½¿ç”¨ ramda å°è£…çš„ curry ç”Ÿæˆçš„å•å…ƒå‡½æ•°ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> curry </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ramda&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> replace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> b</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> replaceSpaceWith </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">\s*</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> replaceSpaceWithComma </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">replaceSpaceWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;,&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> replaceSpaceWithDash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">replaceSpaceWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-å‡½æ•°ç»„åˆcompose">2. å‡½æ•°ç»„åˆï¼ˆcomposeï¼‰<a class="hash-link" href="#2-å‡½æ•°ç»„åˆcompose" title="Direct link to heading">â€‹</a></h3><p>å‡½æ•°ç»„åˆå°±æ˜¯å°†å¤šä¸ªå‡½æ•°ç»„åˆæˆä¸€ä¸ªå‡½æ•°ã€‚</p><p>å¦‚ä¸‹æ˜¯ä½¿ç”¨ ramda å°è£…çš„ compose ç”Ÿæˆçš„å‡½æ•°ç»„åˆï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> compose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ramda&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">g</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">fg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å‡½æ•°ç»„åˆè®©ä»£ç å˜å¾—ç®€å•è€Œå¯Œæœ‰å¯è¯»æ€§ï¼ŒåŒæ—¶é€šè¿‡ä¸åŒçš„ç»„åˆæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“ç»„åˆå‡ºå…¶ä»–å¸¸ç”¨å‡½æ•°ï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´å…·è¡¨ç°åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å°ç»“">å°ç»“<a class="hash-link" href="#å°ç»“" title="Direct link to heading">â€‹</a></h2><p>é€šè¿‡ä¸Šæ–‡ï¼Œç›¸ä¿¡ä½ å·²ç»å¯¹å‡½æ•°å¼ç¼–ç¨‹æœ‰äº†ä¸€äº›äº†è§£ï¼Œä¸‹æ–¹æœ‰ä¸€äº›å‚è€ƒèµ„æ–™ï¼Œæ¨èä½ è¿›è¡Œæ›´æ·±å…¥çš„å­¦ä¹ ã€‚</p><p>å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹åªæ˜¯ä¸ºäº†è®©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¤šä¸€ä¸ªç¼–ç¨‹èŒƒå¼çš„é€‰æ‹©ï¼Œå¤§å¤šæ—¶å€™æˆ‘ä»¬æ— æ³•å°†æ‰€æœ‰å‡½æ•°å†™æˆçº¯å‡½æ•°çš„å½¢å¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä»å¯ä»¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹çš„ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€ä¸æ”¹å†™æ•°æ®çš„åšæ³•ï¼Œé€šè¿‡å‡å°‘å…±äº«çš„æ•°æ®æ¥å‡å°‘å¼€å‘è¿‡ç¨‹çš„ bug æ•°ã€‚</p><p>å¸Œæœ›æœ¬æ–‡èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢é˜…è¯»ï½</p><p>åˆ«å¿˜äº†ç‚¹ä¸ªèµé¼“åŠ±ä¸€ä¸‹æˆ‘å“¦ï¼Œç¬”èŠ¯â¤ï¸</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/" target="_blank" rel="noopener noreferrer">å‡½æ•°å¼ç¼–ç¨‹æŒ‡åŒ—</a></li><li><a href="https://juejin.cn/post/6844903936378273799" target="_blank" rel="noopener noreferrer">ç®€æ˜ JavaScript å‡½æ•°å¼ç¼–ç¨‹â€”â€”å…¥é—¨ç¯‡</a></li><li><a href="https://juejin.cn/post/6844903743117361165#heading-2" target="_blank" rel="noopener noreferrer">å‡½æ•°å¼ç¼–ç¨‹ï¼ŒçœŸé¦™</a></li><li><a href="https://zhuanlan.zhihu.com/p/26085755" target="_blank" rel="noopener noreferrer">ä»å¹´ä¼šçœ‹å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/02/12/React-Hooks">React-ä½ æœ‰å®Œå…¨äº†è§£ Hooks å—</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-02-12T19:11:14.000Z" itemprop="datePublished">February 12, 2022</time> Â· <!-- -->12 min read</div></header><div class="markdown" itemprop="articleBody"><p><img src="https://img14.360buyimg.com/ling/jfs/t1/211906/13/12376/431721/6208fae4E49caa61b/7f286fcdbf89fd66.jpg"></p><blockquote><p>æœ¬æ–‡ä» Hooks ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Hooksï¼ŒReact æä¾›äº†å“ªäº›å¸¸ç”¨ Hooksï¼Œä»¥åŠå¦‚ä½•è‡ªå®šä¹‰ Hooks 4 ä¸ªæ–¹é¢å¸¦ä½ æ·±å…¥ç†è§£ React Hooksã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€<a class="hash-link" href="#ä¸€å‰è¨€" title="Direct link to heading">â€‹</a></h2><p>Hooks ç”¨äºåœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ state ä»¥åŠå…¶ä»– React ç‰¹æ€§ã€‚é‚£ä¹ˆ Hooks ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Hooksï¼ŒReact æä¾›äº†å“ªäº›å¸¸ç”¨ Hooksï¼Œä»¥åŠå¦‚ä½•è‡ªå®šä¹‰ Hooks å‘¢ï¼Œä¸‹æ–‡å°†ä¸ºæ‚¨ä¸€ä¸€æ­æ™“ã€‚</p><blockquote><p>æœ¬æ–‡çš„å­¦ä¹ èµ„æ–™ä¸»è¦æ¥è‡ª <a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">React å®˜æ–¹æ–‡æ¡£-Hook</a>å’Œç‹æ²›è€å¸ˆçš„ä¸“æ <a href="https://time.geekbang.org/column/article/376577" target="_blank" rel="noopener noreferrer">ã€ŠReact Hooks æ ¸å¿ƒåŸç†ä¸å®æˆ˜ã€‹</a>ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒä»€ä¹ˆæ˜¯-hooks">äºŒã€ä»€ä¹ˆæ˜¯ Hooks<a class="hash-link" href="#äºŒä»€ä¹ˆæ˜¯-hooks" title="Direct link to heading">â€‹</a></h2><p>Hooks è¯‘ä¸ºé’©å­ï¼ŒHooks å°±æ˜¯åœ¨å‡½æ•°ç»„ä»¶å†…ï¼Œè´Ÿè´£é’©è¿›å¤–éƒ¨åŠŸèƒ½çš„å‡½æ•°ã€‚</p><p>React æä¾›äº†ä¸€äº›å¸¸ç”¨é’©å­ï¼ŒReact ä¹Ÿæ”¯æŒè‡ªå®šä¹‰é’©å­ï¼Œè¿™äº›é’©å­éƒ½æ˜¯ç”¨äºä¸ºå‡½æ•°å¼•å…¥å¤–éƒ¨åŠŸèƒ½ã€‚</p><p>å½“æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­ï¼Œéœ€è¦å¼•å…¥å¤–éƒ¨åŠŸèƒ½æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ React æä¾›çš„é’©å­ï¼Œæˆ–è€…è‡ªå®šä¹‰é’©å­ã€‚</p><p>æ¯”å¦‚åœ¨ç»„ä»¶å†…å¼•å…¥å¯ç®¡ç† state çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥ä½¿ç”¨ useState å‡½æ•°ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç» useState çš„ç”¨æ³•ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰ä¸ºä»€ä¹ˆè¦ç”¨-hooks">ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨ Hooks<a class="hash-link" href="#ä¸‰ä¸ºä»€ä¹ˆè¦ç”¨-hooks" title="Direct link to heading">â€‹</a></h2><p>ä½¿ç”¨ Hooks æœ‰ 2 å¤§åŸå› ï¼š</p><ul><li>ç®€åŒ–é€»è¾‘å¤ç”¨ï¼›</li><li>è®©å¤æ‚ç»„ä»¶æ›´æ˜“ç†è§£ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-ç®€åŒ–é€»è¾‘å¤ç”¨">1. ç®€åŒ–é€»è¾‘å¤ç”¨<a class="hash-link" href="#1-ç®€åŒ–é€»è¾‘å¤ç”¨" title="Direct link to heading">â€‹</a></h3><p>åœ¨ Hooks å‡ºç°ä¹‹å‰ï¼ŒReact å¿…é¡»å€Ÿç”¨é«˜é˜¶ç»„ä»¶ã€render props ç­‰å¤æ‚çš„è®¾è®¡æ¨¡å¼æ‰èƒ½å®ç°é€»è¾‘çš„å¤ç”¨ï¼Œä½†æ˜¯é«˜é˜¶ç»„ä»¶ä¼šäº§ç”Ÿå†—ä½™çš„ç»„ä»¶èŠ‚ç‚¹ï¼Œè®©è°ƒè¯•æ›´åŠ å¤æ‚ã€‚</p><p>Hooks è®©æˆ‘ä»¬å¯ä»¥åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-è®©å¤æ‚ç»„ä»¶æ›´æ˜“ç†è§£">2. è®©å¤æ‚ç»„ä»¶æ›´æ˜“ç†è§£<a class="hash-link" href="#2-è®©å¤æ‚ç»„ä»¶æ›´æ˜“ç†è§£" title="Direct link to heading">â€‹</a></h3><p>åœ¨ class ç»„ä»¶ä¸­ï¼ŒåŒä¸€ä¸ªä¸šåŠ¡é€»è¾‘çš„ä»£ç åˆ†æ•£åœ¨ç»„ä»¶çš„ä¸åŒç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œè€Œ Hooks èƒ½å¤Ÿè®©é’ˆå¯¹åŒä¸€ä¸ªä¸šåŠ¡é€»è¾‘çš„ä»£ç èšåˆåœ¨ä¸€å—ï¼Œè®©ä¸šåŠ¡é€»è¾‘æ¸…æ™°åœ°éš”ç¦»å¼€ï¼Œè®©ä»£ç æ›´åŠ å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å››å¸¸ç”¨çš„-hooks">å››ã€å¸¸ç”¨çš„ Hooks<a class="hash-link" href="#å››å¸¸ç”¨çš„-hooks" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-usestate">1. useState<a class="hash-link" href="#1-usestate" title="Direct link to heading">â€‹</a></h3><p>useState æ˜¯å…è®¸ä½ åœ¨ React å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ  state çš„ Hookã€‚</p><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Example</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å£°æ˜ä¸€ä¸ªå« &quot;count&quot; çš„ state å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç å£°æ˜äº†ä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„ state å˜é‡ countï¼Œé€šè¿‡è°ƒç”¨ setCount æ¥æ›´æ–°å½“å‰çš„ countã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-useeffect">2. useEffect<a class="hash-link" href="#2-useeffect" title="Direct link to heading">â€‹</a></h3><p>useEffect å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚</p><p>å‰¯ä½œç”¨æ˜¯æŒ‡ä¸€æ®µå’Œå½“å‰æ‰§è¡Œç»“æœæ— å…³çš„ä»£ç ï¼Œå¸¸ç”¨çš„å‰¯ä½œç”¨æ“ä½œå¦‚æ•°æ®è·å–ã€è®¾ç½®è®¢é˜…ã€æ‰‹åŠ¨æ›´æ”¹ React ç»„ä»¶ä¸­çš„ DOMã€‚</p><p>useEffect å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dependencies</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ‰§è¡Œçš„å‡½æ•° callbackï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ä¾èµ–é¡¹æ•°ç»„ dependenciesã€‚</p><p>å…¶ä¸­ä¾èµ–é¡¹æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆ callback å°±ä¼šåœ¨æ¯æ¬¡å‡½æ•°ç»„ä»¶æ‰§è¡Œå®Œåéƒ½æ‰§è¡Œï¼›å¦‚æœæŒ‡å®šäº†ï¼Œé‚£ä¹ˆåªæœ‰ä¾èµ–é¡¹ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šæ‰§è¡Œã€‚</p><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Example</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Similar to componentDidMount and componentDidUpdate:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Update the document title using the browser API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">You clicked </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> times</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¯ç”¨äºåšæ¸…é™¤ï¼Œç›¸å½“äº class ç»„ä»¶çš„ componentWillUnmount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æŒ‡å®šä¾èµ–é¡¹ä¸º countï¼Œåœ¨ count æ›´æ–°æ—¶æ‰§è¡Œè¯¥å‰¯ä½œç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç é€šè¿‡ useEffect å®ç°äº†å½“ä¾èµ–é¡¹ count æ›´æ–°æ—¶ï¼Œæ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¹¶é€šè¿‡è¿”å›å›è°ƒå‡½æ•°æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ‰§è¡Œç»“æœã€‚</p><p>å¦å¤–ï¼ŒuseEffect æä¾›äº†å››ç§æ‰§è¡Œå‰¯ä½œç”¨çš„æ—¶æœºï¼š</p><ul><li><strong>æ¯æ¬¡ render åæ‰§è¡Œ</strong>ï¼šä¸æä¾›ç¬¬äºŒä¸ªä¾èµ–é¡¹å‚æ•°ã€‚æ¯”å¦‚ useEffect(() =&gt; {})ï¼›</li><li><strong>ä»…ç¬¬ä¸€æ¬¡ render åæ‰§è¡Œ</strong>ï¼šæä¾›ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ã€‚æ¯”å¦‚ useEffect(() =&gt; {}, [])ï¼›</li><li><strong>ç¬¬ä¸€æ¬¡ä»¥åŠä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰§è¡Œ</strong>ï¼šæä¾›ä¾èµ–é¡¹æ•°ç»„ã€‚æ¯”å¦‚ useEffect(() =&gt; {}, <!-- -->[deps]<!-- -->)ï¼›</li><li><strong>ç»„ä»¶ unmount åæ‰§è¡Œ</strong>ï¼šè¿”å›ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚æ¯”å¦‚ useEffect() =&gt; { return () =&gt; {} }, [])ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-usecallback">3. useCallback<a class="hash-link" href="#3-usecallback" title="Direct link to heading">â€‹</a></h3><p>useCallback å®šä¹‰çš„å›è°ƒå‡½æ•°åªä¼šåœ¨ä¾èµ–é¡¹æ”¹å˜æ—¶é‡æ–°å£°æ˜è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™æ ·å°±ä¿è¯äº†<strong>ç»„ä»¶ä¸ä¼šåˆ›å»ºé‡å¤çš„å›è°ƒå‡½æ•°</strong>ã€‚è€Œæ¥æ”¶è¿™ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå±æ€§çš„ç»„ä»¶ï¼Œä¹Ÿ<strong>ä¸ä¼šé¢‘ç¹åœ°éœ€è¦é‡æ–°æ¸²æŸ“</strong>ã€‚</p><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> memoizedCallback </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç åœ¨ä¾èµ–é¡¹ aã€b å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°å£°æ˜å›è°ƒå‡½æ•°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-usememo">4. useMemo<a class="hash-link" href="#4-usememo" title="Direct link to heading">â€‹</a></h3><p>useMemo å®šä¹‰çš„åˆ›å»ºå‡½æ•°åªä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—ï¼Œæœ‰åŠ©äºæ¯æ¬¡æ¸²æŸ“æ—¶<strong>ä¸ä¼šé‡å¤çš„é«˜å¼€é”€çš„è®¡ç®—</strong>ï¼Œè€Œæ¥æ”¶è¿™ä¸ªè®¡ç®—å€¼ä½œä¸ºå±æ€§çš„ç»„ä»¶ï¼Œä¹Ÿ<strong>ä¸ä¼šé¢‘ç¹åœ°éœ€è¦é‡æ–°æ¸²æŸ“</strong>ã€‚</p><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> memoizedValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">computeExpensiveValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç åœ¨ä¾èµ–é¡¹ aã€b å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-useref">5. useRef<a class="hash-link" href="#5-useref" title="Direct link to heading">â€‹</a></h3><p>useRef è¿”å›ä¸€ä¸ª ref å¯¹è±¡ï¼Œè¿™ä¸ª ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨ã€‚</p><p>ä»–æœ‰ 2 ä¸ªç”¨å¤„ï¼š</p><ul><li><strong>ä¿å­˜ DOM èŠ‚ç‚¹çš„å¼•ç”¨</strong>ï¼›</li><li><strong>åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®</strong>ã€‚</li></ul><p>ä¿å­˜ DOM èŠ‚ç‚¹çš„å¼•å…¥ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">TextInputWithFocusButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inputEl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onButtonClick</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inputEl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">focus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">input ref</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">inputEl</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onButtonClick</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Focus</span><span class="token plain"> the input</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç é€šè¿‡ useRef åˆ›å»ºäº† ref å¯¹è±¡ï¼Œä¿å­˜äº† DOM èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå¯ä»¥å¯¹ ref.current åš DOM æ“ä½œã€‚</p><p>åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useCallback</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useRef </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Timer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®šä¹‰ time state ç”¨äºä¿å­˜è®¡æ—¶çš„ç´¯ç§¯æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setTime</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®šä¹‰ timer è¿™æ ·ä¸€ä¸ªå®¹å™¨ç”¨äºåœ¨è·¨ç»„ä»¶æ¸²æŸ“ä¹‹é—´ä¿å­˜ä¸€ä¸ªå˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> timer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å¼€å§‹è®¡æ—¶çš„äº‹ä»¶å¤„ç†å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handleStart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ current å±æ€§è®¾ç½® ref çš„å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> time </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// æš‚åœè®¡æ—¶çš„äº‹ä»¶å¤„ç†å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handlePause </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ clearInterval æ¥åœæ­¢è®¡æ—¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">clearInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">time </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">br </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">handleStart</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Start</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">handlePause</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Pause</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç é€šè¿‡ useRef åˆ›å»ºäº†ä¸€ä¸ªå˜é‡åä¸º timer çš„ ref å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥åœ¨è·¨ç»„ä»¶æ¸²æŸ“æ—¶è°ƒç”¨ï¼Œåœ¨å¼€å§‹è®¡æ—¶æ—¶æ–°å»ºè®¡æ—¶å™¨ï¼Œåœ¨æš‚åœè®¡æ—¶æ—¶æ¸…ç©ºè®¡æ—¶å™¨ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="6-usecontext">6. useContext<a class="hash-link" href="#6-usecontext" title="Direct link to heading">â€‹</a></h3><p>useContext ç”¨äºæ¥æ”¶ä¸€ä¸ª context å¯¹è±¡å¹¶è¿”å›è¯¥ context çš„å€¼ï¼Œå¯ä»¥å®ç°è·¨å±‚çº§çš„æ•°æ®å…±äº«ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºä¸€ä¸ª context å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">MyContext</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// é€šè¿‡ Context.Provider ä¼ é€’ context çš„å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Provider</span><span class="token plain"> value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Container</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Provider</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Test</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// è·å– Context çš„å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> theme </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç é€šè¿‡ useContext å–å¾—äº† App ç»„ä»¶ä¸­å®šä¹‰çš„ Contextï¼Œåšåˆ°äº†è·¨å±‚æ¬¡ç»„ä»¶çš„æ•°æ®å…±äº«ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="7-usereducer">7. useReducer<a class="hash-link" href="#7-usereducer" title="Direct link to heading">â€‹</a></h3><p>useReducer ç”¨æ¥å¼•å…¥ Reducer åŠŸèƒ½ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useReducer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reducer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å®ƒæ¥å— Reducer å‡½æ•°å’ŒçŠ¶æ€çš„åˆå§‹å€¼ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯çŠ¶æ€çš„å½“å‰å€¼ï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯å‘é€ action çš„ dispatch å‡½æ•°ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äº”è‡ªå®šä¹‰-hooks">äº”ã€è‡ªå®šä¹‰ Hooks<a class="hash-link" href="#äº”è‡ªå®šä¹‰-hooks" title="Direct link to heading">â€‹</a></h2><p>é€šè¿‡è‡ªå®šä¹‰ Hooksï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰-hooks">1. å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ Hooksï¼Ÿ<a class="hash-link" href="#1-å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰-hooks" title="Direct link to heading">â€‹</a></h3><p>è‡ªå®šä¹‰ Hooks å°±æ˜¯å‡½æ•°ï¼Œå®ƒæœ‰ 2 ä¸ªç‰¹å¾åŒºåˆ†äºæ™®é€šå‡½æ•°ï¼š</p><ul><li>åç§°ä»¥ â€œuseâ€ å¼€å¤´ï¼›</li><li>å‡½æ•°å†…éƒ¨è°ƒç”¨å…¶ä»–çš„ Hookã€‚</li></ul><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useCallback </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®šä¹‰ count è¿™ä¸ª state ç”¨äºä¿å­˜å½“å‰æ•°å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®ç°åŠ  1 çš„æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> increment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®ç°å‡ 1 çš„æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> decrement </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// é‡ç½®è®¡æ•°å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> reset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œ export å‡ºå»ä¾›è°ƒç”¨è€…ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> increment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> decrement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç»„ä»¶1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> increment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> decrement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç»„ä»¶2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> increment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> decrement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç é€šè¿‡è‡ªå®šä¹‰ Hooks useCounterï¼Œè½»æ¾çš„åœ¨ MyComponent1 ç»„ä»¶å’Œ MyComponent2 ç»„ä»¶ä¹‹é—´å¤ç”¨ä¸šåŠ¡é€»è¾‘ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-è‡ªå®šä¹‰-hooks-åº“---react-use">2. è‡ªå®šä¹‰ Hooks åº“ - react-use<a class="hash-link" href="#2-è‡ªå®šä¹‰-hooks-åº“---react-use" title="Direct link to heading">â€‹</a></h3><p>React å®˜æ–¹æä¾›äº† <a href="https://github.com/streamich/react-use" target="_blank" rel="noopener noreferrer">react-use</a> åº“ï¼Œå…¶ä¸­å°è£…äº†å¤§é‡å¯ç›´æ¥ä½¿ç”¨çš„è‡ªå®šä¹‰ Hooksï¼Œå¸®åŠ©æˆ‘ä»¬ç®€åŒ–ç»„ä»¶å†…éƒ¨é€»è¾‘ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€‚</p><p>å…¶ä¸­æˆ‘ä»¬å¸¸ç”¨çš„è‡ªå®šä¹‰ Hooks æœ‰ï¼š</p><ul><li>useLocation å’Œ useSearchParamï¼šè·Ÿè¸ªé¡µé¢å¯¼èˆªæ ä½ç½®çŠ¶æ€ï¼›</li><li>useScrollï¼šè·Ÿè¸ª HTML å…ƒç´ çš„æ»šåŠ¨ä½ç½®ï¼›</li><li>useScrollingï¼šè·Ÿè¸ª HTML å…ƒç´ æ˜¯å¦æ­£åœ¨æ»šåŠ¨ï¼›</li><li>useAsync, useAsyncFn, and useAsyncRetryï¼šè§£æä¸€ä¸ª async å‡½æ•°ï¼›</li><li>useTitleï¼šè®¾ç½®é¡µé¢çš„æ ‡é¢˜ã€‚</li></ul><blockquote><p>å¯è‡³ <a href="https://github.com/streamich/react-use" target="_blank" rel="noopener noreferrer">react-use å®˜ç½‘</a>å­¦ä¹ ä½¿ç”¨ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å…­å°ç»“">å…­ã€å°ç»“<a class="hash-link" href="#å…­å°ç»“" title="Direct link to heading">â€‹</a></h2><p>æœ¬æ–‡ä» Hooks ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Hooksï¼ŒReact æä¾›äº†å“ªäº›å¸¸ç”¨ Hooksï¼Œä»¥åŠå¦‚ä½•è‡ªå®šä¹‰ Hooks 4 ä¸ªæ–¹é¢ä»‹ç»äº† React Hooksï¼Œç›¸ä¿¡å¤§å®¶å¯¹ React Hooks å·²ç»æœ‰äº†æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚</p><p>å¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢é˜…è¯»ï½</p><p>åˆ«å¿˜äº†ç‚¹ä¸ªèµé¼“åŠ±ä¸€ä¸‹æˆ‘å“¦ï¼Œç¬”èŠ¯ â¤ï¸</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">React å®˜æ–¹æ–‡æ¡£-Hook</a></li><li><a href="https://time.geekbang.org/column/article/376577" target="_blank" rel="noopener noreferrer">React Hooks æ ¸å¿ƒåŸç†ä¸å®æˆ˜</a></li><li><a href="https://www.ruanyifeng.com/blog/2019/09/react-hooks.html" target="_blank" rel="noopener noreferrer">React Hooks å…¥é—¨æ•™ç¨‹</a></li><li><a href="https://segmentfault.com/a/1190000038768433" target="_blank" rel="noopener noreferrer">è½»æ¾æŒæ¡ React Hooks åº•å±‚å®ç°åŸç†</a></li><li><a href="https://juejin.cn/post/6844903704437456909" target="_blank" rel="noopener noreferrer">é˜…è¯»æºç åï¼Œæ¥è®²è®² React Hooks æ˜¯æ€ä¹ˆå®ç°çš„</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/02/11/up-up-up">ä¸“æ å­¦ä¹ å¿ƒå¾—ã€Šå¤§å‚æ™‹å‡æŒ‡å—ã€‹</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-02-11T19:11:14.000Z" itemprop="datePublished">February 11, 2022</time> Â· <!-- -->14 min read</div></header><div class="markdown" itemprop="articleBody"><p><img src="https://img12.360buyimg.com/ling/jfs/t1/109470/8/23866/494812/6209a784E3a20dad5/22cf45c213a15cc0.jpg" alt="s08502502142022"></p><blockquote><p>æœ¬æ–‡ä»æ™‹å‡ä½“ç³»ã€å­¦ä¹ æ–¹æ³•ã€åšäº‹æ–¹æ³• 4 ä¸ªæ–¹å‘ä»‹ç»äº†å­¦ä¹ å¤§å‚æ™‹å‡æŒ‡å—çš„å¿ƒå¾—ï¼Œå…¶ä¸­æ™‹å‡ä½“ç³»ã€èŒçº§è¯¦è§£æå‡è®¤çŸ¥ï¼Œå­¦ä¹ æ–¹æ³•ã€åšäº‹æ–¹æ³•æé«˜æ•ˆç‡ï¼Œç›¸ä¿¡ä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€<a class="hash-link" href="#ä¸€å‰è¨€" title="Direct link to heading">â€‹</a></h2><p>åœ¨æ¯”è¾ƒé•¿çš„ä¸€æ®µæ—¶é—´ï¼Œæˆ‘çš„å­¦ä¹ æ–¹å‘éå¸¸éšå¿ƒæ‰€æ¬²ï¼Œæƒ³å­¦ä»€ä¹ˆå°±å¼€å§‹è¯»å®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾æºç ï¼Œå­¦ä¹ æ•ˆç‡ä¸é«˜ã€‚</p><p>æˆ‘ä¹Ÿå¼€å§‹åæ€ï¼Œæˆ‘è¿™æ ·çš„å­¦ä¹ æ–¹æ³•æ˜¯ä¸æ˜¯å¤ªè¿‡äºæµªè´¹å¥½ä¸å®¹æ˜“åœ¨ä¸‹ç­åæŒ¤å‡ºçš„å®è´µæ—¶é—´ã€‚</p><p>æˆ‘å¼€å§‹æ‰¾æé«˜å­¦ä¹ æ•ˆç‡çš„æ•™ç¨‹ï¼Œäºæ˜¯æ‰¾åˆ°äº†<a href="https://time.geekbang.org/column/intro/100064501?tab=catalog" target="_blank" rel="noopener noreferrer">ã€Šå¤§å‚æ™‹å‡æŒ‡å—ã€‹</a>ã€‚åœ¨ä¸“æ ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†å¥½çš„å­¦ä¹ æ–¹æ³•å’Œåšäº‹æ–¹æ³•ï¼Œä¸‹æ–‡å°†åˆ†äº«æˆ‘çš„ä¸€äº›å­¦ä¹ å¿ƒå¾—ã€‚</p><p><strong>è–…ç¾Šæ¯› tipsï¼š</strong>
<strong>å¦‚æœä½ æœ‰ç‚¹è¿›å»ä½ ä¼šå‘ç°è¿™ä¸ªä¸“æ æ˜¯æ”¶è´¹çš„ï¼ä¸è¿‡ä¸æ€•ï¼Œå¯ä»¥è–…ç¾Šæ¯›ï¼Œä¸‹è½½ app å¯ä»¥å…è´¹é˜…è¯» 5 å¤©ï¼Œå·®ä¸å¤šä¹Ÿèƒ½å­¦å®Œè¿™ä¸ªä¸“æ ã€‚</strong></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒæ™‹å‡ä½“ç³»">äºŒã€æ™‹å‡ä½“ç³»<a class="hash-link" href="#äºŒæ™‹å‡ä½“ç³»" title="Direct link to heading">â€‹</a></h2><p>åœ¨ç¬¬ä¸€ç« èŠ‚æ™‹å‡ä½“ç³»ä¸­ï¼Œäº†è§£èŒçº§ä½“ç³»ã€æ™‹å‡æµç¨‹ã€æ™‹å‡åŸåˆ™ã€æ™‹å‡é€»è¾‘ã€èŒçº§æ¡£æ¬¡ï¼Œä¸å†æ— çš„æ”¾çŸ¢çš„å¯»æ‰¾æ™‹å‡çš„æ–¹æ³•ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-èŒçº§ä½“ç³»">1. èŒçº§ä½“ç³»<a class="hash-link" href="#1-èŒçº§ä½“ç³»" title="Direct link to heading">â€‹</a></h3><p>äº’è”ç½‘å…¬å¸æ™‹å‡ä½“ç³»åŒ…å«ä»‹è·¨è¶Šå¼èŒçº§ä½“ç³»å’Œé˜¶æ¢¯å¼èŒçº§ä½“ç³»ä¸¤ç§ï¼Œè·¨è¶Šå¼ç›¸é‚»çº§åˆ«å·®å¼‚å¤§ã€æ™‹å‡æœºä¼šå°‘ï¼Œé˜¶æ¢¯å¼ç›¸é‚»çº§åˆ«å·®å¼‚å°ã€æ™‹å‡æœºä¼šå¤šã€‚</p><p>äº†è§£äº†èŒçº§ä½“ç³»åï¼Œåˆ¤æ–­è‡ªå·±æ‰€åœ¨å…¬å¸å±äºå“ªä¸ªç±»åˆ«ï¼Œæ¸…æ™°è‡ªå·±çš„ç›®æ ‡ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91d544789786481c902e47c2bc3eca77~tplv-k3u1fbpfcp-zoom-1.image" alt="s11141202112022"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-æ™‹å‡æµç¨‹">2. æ™‹å‡æµç¨‹<a class="hash-link" href="#2-æ™‹å‡æµç¨‹" title="Direct link to heading">â€‹</a></h3><p>æ™‹å‡æµç¨‹åŒ…æ‹¬ä¸»ç®¡æå-&gt;éƒ¨é—¨å†…åˆç­›-&gt;è¯„å§”å›¢è€ƒå¯Ÿ-&gt;éƒ¨é—¨è°ƒæ§-&gt;é«˜å±‚ç¡®è®¤-&gt;ä¸»ç®¡/HR æ²Ÿé€šã€‚</p><ul><li>ä¸»ç®¡æåï¼š<strong>ç»©æ•ˆæ»¡è¶³ã€å¹´é™æ»¡è¶³ã€èƒ½åŠ›æ»¡è¶³</strong>ï¼›</li><li>éƒ¨é—¨å†…åˆç­›ï¼šæ¨ªå‘å¯¹æ¯”å¤šä¸ªå›¢é˜Ÿæåçš„äººæ—¶ï¼Œ<strong>èƒ½åŠ›æ»¡è¶³</strong>ï¼›</li><li>è¯„å§”å›¢è€ƒå¯Ÿï¼š<strong>ç­”è¾©ææ–™è¿‡å…³ã€ç­”è¾©ç°åœºè¡¨ç°è¿‡å…³</strong>ï¼›</li><li>éƒ¨é—¨è°ƒæ§ï¼šæ¨ªå‘å¯¹æ¯”å¤šä¸ªå›¢é˜Ÿç­”è¾©çš„äººæ—¶ï¼Œ<strong>ç­”è¾©è¿‡å…³</strong>ï¼›</li><li>é«˜å±‚ç¡®è®¤ï¼šç­‰å¾…å³å¯ï¼›</li><li>ä¸»ç®¡/HR æ²Ÿé€šï¼šç­‰å¾…å³å¯ã€‚</li></ul><p>å› æ­¤ï¼ŒæŠ€æœ¯èƒ½åŠ›å’Œç­”è¾©çš„æŠ€å·§æ˜¯åŒç­‰é‡è¦ï¼Œä¸ä»…åœ¨æ—¥å¸¸è¦å‚¨å¤‡æŠ€æœ¯èƒ½åŠ›ï¼Œä¹Ÿè¦åŠ å¼ºè¡¨è¾¾æŠ€å·§ï¼Œèƒ½å¤ŸæŠŠè‡ªå·±ä¼˜ç§€çš„ç‚¹éå¸¸å¥½çš„è¡¨ç°å‡ºæ¥ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-æ™‹å‡åŸåˆ™">3. æ™‹å‡åŸåˆ™<a class="hash-link" href="#3-æ™‹å‡åŸåˆ™" title="Direct link to heading">â€‹</a></h3><p>æ™‹å‡æœ‰ 3 å¤§åŸåˆ™ï¼Œæ»¡è¶³ä»¥ä¸‹åŸåˆ™ä¼šæ›´å®¹æ˜“æ™‹å‡ï¼š</p><ul><li>ä¸»åŠ¨åŸåˆ™ï¼š<strong>ä¸»åŠ¨åšäº‹</strong>ï¼ˆä¸»åŠ¨æ‰¾ leader æ²Ÿé€šå·¥ä½œã€ä¸»åŠ¨æ‰¾åˆ«äººæ²Ÿé€šäº†è§£æ›´å¤šä¿¡æ¯ï¼‰ï¼›</li><li>æˆé•¿åŸåˆ™ï¼š<strong>ä¸€è¾¹åšäº‹ä¸€è¾¹æŒ–æ˜æˆé•¿ç‚¹æå‡è‡ªå·±</strong>ï¼ˆè€Œä¸æ˜¯ä¸€ç›´åŸåœ°è¸æ­¥ç”¨ç†Ÿæ‚‰çš„æŠ€æœ¯ï¼‰ï¼›</li><li>ä»·å€¼åŸåˆ™ï¼š<strong>å­¦ä¹ ä¸ºå…¬å¸äº§å‡ºä»·å€¼çš„æŠ€èƒ½</strong>ï¼ˆè€Œä¸æ˜¯åªå­¦ä¹ è‡ªå·±æ„Ÿå…´è¶£çš„æŠ€èƒ½ï¼‰ã€‚</li></ul><p>å› æ­¤ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œåº”è¯¥æ›´åŠ ä¸»åŠ¨çš„æ²Ÿé€šå·¥ä½œï¼Œåœ¨å·¥ä½œä¸­å‘æ˜å¯æˆé•¿çš„ç‚¹ï¼Œå¦‚å¼•ç”¨æ–°æŠ€æœ¯ï¼Œå¹¶ä¸”æŒç»­çš„å­¦ä¹ å¯¹å·¥ä½œæœ‰å¸®åŠ©çš„æŠ€èƒ½ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-æ™‹å‡é€»è¾‘">4. æ™‹å‡é€»è¾‘<a class="hash-link" href="#4-æ™‹å‡é€»è¾‘" title="Direct link to heading">â€‹</a></h3><p>æ€ä¹ˆåˆ¤æ–­æœ‰æ²¡æœ‰è¾¾åˆ°æ™‹å‡è¦æ±‚å‘¢ï¼Ÿåº”è¯¥æ»¡è¶³ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li><strong>èƒ½å¤Ÿåšå¥½å½“å‰çº§åˆ«çš„äº‹</strong>ï¼ˆåšåˆ°ç²¾é€šçš„æ°´å¹³ï¼Œç²¾é€š=ä¼˜åŒ–å’Œåˆ›é€ æ–°çš„ç»éªŒï¼‰ï¼›</li><li><strong>å¯»æ‰¾æœºä¼šæå‰åšä¸‹ä¸€çº§åˆ«çš„äº‹ï¼Œå¹¶å–å¾—å·¥ä½œæˆæœ</strong>ã€‚</li></ul><p>å› æ­¤ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œä¸èƒ½ä»…ä»…åŸ‹å¤´å¹²æ´»ï¼Œè¿˜åº”è¯¥æ€è€ƒä¼˜åŒ–ï¼Œå»åˆ›é€ æ–°çš„ç»éªŒï¼Œåœ¨å®Œå…¨ç²¾é€šå½“å‰å·¥ä½œæ—¶ï¼Œä¸»åŠ¨æ²Ÿé€šï¼Œå¯»æ‰¾æœºä¼šæå‰åšä¸‹ä¸€çº§åˆ«çš„äº‹ã€‚</p><p>å› ä¸ºæ™‹å‡å’Œè¡¨ç™½ä¸€æ ·ï¼Œè¡¨ç™½æ˜¯ä¸¤ä¸ªäººæ—¶æœºåˆ°äº†äº’æœ‰æ„Ÿè§‰å°±èƒ½æˆåŠŸï¼Œè€Œæ™‹å‡æ˜¯ä½ å·²ç»æŒæ¡äº†ä¸‹ä¸€çº§åˆ«çš„èƒ½åŠ›å°±èƒ½æ™‹å‡åˆ°ä¸‹ä¸€çº§åˆ«ã€‚ä¸¤è€…éƒ½æ˜¯å……åˆ†å‡†å¤‡åï¼Œæ°´åˆ°æ¸ æˆçš„äº‹æƒ…ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-comd-èƒ½åŠ›æ¨¡å‹">5. COMD èƒ½åŠ›æ¨¡å‹<a class="hash-link" href="#5-comd-èƒ½åŠ›æ¨¡å‹" title="Direct link to heading">â€‹</a></h3><p>é€šè¿‡ COMD èƒ½åŠ›æ¨¡å‹æŠŠæŠ½è±¡çš„èƒ½åŠ›è¦æ±‚å…·ä½“åŒ–ï¼Œå¸®åŠ©æˆ‘ä»¬æ¸…æ™°æˆé•¿çš„ç›®æ ‡åŒ…å«çš„èƒ½åŠ›èŒƒå›´ã€‚</p><p>COMD èƒ½åŠ›æ¨¡å‹åŒ…å« 4 ç§å¤æ‚åº¦ + 3 ä¸ªç»´åº¦ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡äº‹æƒ…çš„å¤æ‚åº¦æ¥åˆ¤æ–­èƒ½åŠ›çš„é«˜ä½ã€‚</p><p>4 ç§å¤æ‚åº¦ï¼š</p><ul><li>è§„æ¨¡å¤æ‚åº¦ï¼šè§„æ¨¡è¶Šå¤§ï¼Œè§„æ¨¡å¤æ‚åº¦è¶Šé«˜ï¼›</li><li>æ—¶é—´å¤æ‚åº¦ï¼šæ—¶é—´è·¨åº¦è¶Šå¤§ï¼Œæ—¶é—´å¤æ‚åº¦è¶Šé«˜ï¼›</li><li>ç¯å¢ƒå¤æ‚åº¦ï¼šç¯å¢ƒä¸ç¡®å®šæ€§è¶Šé«˜ï¼Œç¯å¢ƒå¤æ‚åº¦è¶Šé«˜ï¼›</li><li>åˆ›æ–°å¤æ‚åº¦ï¼šåˆ›æ–°ç¨‹åº¦è¶Šé«˜ï¼Œåˆ›æ–°å¤æ‚åº¦è¶Šé«˜ã€‚</li></ul><p>3 ä¸ªç»´åº¦ï¼š</p><ul><li>æŠ€æœ¯ï¼›</li><li>ä¸šåŠ¡ï¼›</li><li>ç®¡ç†ã€‚</li></ul><p>COMD æ¨¡å‹åº”ç”¨åœ¨ P6 çš„ä¾‹å­ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a61a1f0af9ff4485949735d8f0af396a~tplv-k3u1fbpfcp-zoom-1.image" alt="s11383702112022"></p><p>æŒæ¡ COMD æ¨¡å‹åï¼Œæ›´åŠ æ¸…æ™°å„ä¸ªçº§åˆ«çš„èƒ½åŠ›è¦æ±‚ï¼Œå¯ä»¥æŒ‰ç…§åˆ—å‡ºçš„èƒ½åŠ›è¦æ±‚è¿›è¡Œé’ˆå¯¹æ€§æå‡ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="6-èŒçº§æ¡£æ¬¡">6. èŒçº§æ¡£æ¬¡<a class="hash-link" href="#6-èŒçº§æ¡£æ¬¡" title="Direct link to heading">â€‹</a></h3><p>ä»¥é˜¿é‡Œä¸ºä¾‹åˆ—ä¸¾äº† P5-P10 çš„èŒçº§æ¡£æ¬¡å¯¹åº”çš„è§’è‰²ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5cdabce7f194c5f864dc536a5ce9f69~tplv-k3u1fbpfcp-zoom-1.image" alt="s11264202112022"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œé«˜çº§åˆ«çš„èƒ½åŠ›è¦æ±‚é»˜è®¤åŒ…å«äº†ä½çº§åˆ«çš„è¦æ±‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰èŒçº§è¯¦è§£">ä¸‰ã€èŒçº§è¯¦è§£<a class="hash-link" href="#ä¸‰èŒçº§è¯¦è§£" title="Direct link to heading">â€‹</a></h2><p>ä»æŠ€æœ¯ã€ä¸šåŠ¡ã€ç®¡ç† 3 ä¸ªæ–¹å‘å¯¹ P5-P9 è¿›è¡ŒèŒçº§è¯¦è§£ï¼š</p><blockquote><p>å„ä¸ªèŒçº§å…·ä½“çš„æå‡æ”»ç•¥è§<a href="https://time.geekbang.org/column/article/319262" target="_blank" rel="noopener noreferrer">ã€Šå¤§å‚æ™‹å‡æŒ‡å—-èŒçº§è¯¦è§£ã€‹</a>ã€‚</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-p5">1. P5<a class="hash-link" href="#1-p5" title="Direct link to heading">â€‹</a></h3><ul><li>æŠ€æœ¯ï¼šå·¥ä½œå²—ä½ä¸­å®é™…ç”¨åˆ°çš„åŸºç¡€æŠ€æœ¯çš„ç§¯ç´¯ï¼›</li><li>ä¸šåŠ¡ï¼šç†Ÿæ‚‰å„é¡¹ä¸šåŠ¡çš„å¤„ç†é€»è¾‘ï¼›</li><li>ç®¡ç†ï¼šäº†è§£å…¬å¸çš„ç®¡ç†åˆ¶åº¦å’Œé¡¹ç›®æµç¨‹ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-p6">2. P6<a class="hash-link" href="#2-p6" title="Direct link to heading">â€‹</a></h3><ul><li>æŠ€æœ¯ï¼šæŒæ¡å›¢é˜Ÿç”¨åˆ°çš„æŠ€æœ¯â€œå¥—è·¯â€ï¼›</li><li>ä¸šåŠ¡ï¼šæŒæ¡æ‰€æœ‰åŠŸèƒ½å¹¶æ·±åº¦ç†è§£å¤„ç†é€»è¾‘ï¼›</li><li>ç®¡ç†ï¼šæ¨è¿›é¡¹ç›®ä¸­çš„å­ä»»åŠ¡ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-p7">3. P7<a class="hash-link" href="#3-p7" title="Direct link to heading">â€‹</a></h3><ul><li>æŠ€æœ¯ï¼šç²¾é€šå›¢é˜Ÿç›¸å…³æŠ€æœ¯ï¼›</li><li>ä¸šåŠ¡ï¼šå…³æ³¨ä¸šåŠ¡æ•´ä½“ï¼›</li><li>ç®¡ç†ï¼šæŒ‡æŒ¥ 10 äººä»¥å†…çš„å°å›¢é˜Ÿã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-p8">4. P8<a class="hash-link" href="#4-p8" title="Direct link to heading">â€‹</a></h3><ul><li>æŠ€æœ¯ï¼šç²¾é€šé¢†åŸŸç›¸å…³æŠ€æœ¯ï¼›</li><li>ä¸šåŠ¡ï¼šç†Ÿæ‚‰å¤šä¸ªä¸šåŠ¡æˆ–ç²¾é€šç«¯åˆ°ç«¯ä¸šåŠ¡ï¼›</li><li>ç®¡ç†ï¼šæ ¸å¿ƒæ˜¯æŠ“é‡ç‚¹ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-p9">5. P9<a class="hash-link" href="#5-p9" title="Direct link to heading">â€‹</a></h3><ul><li>æŠ€æœ¯ï¼šè·¨é¢†åŸŸæ•´åˆèƒ½åŠ›ï¼›</li><li>ä¸šåŠ¡ï¼šä»ç†è§£è§„åˆ’åˆ°äº²è‡ªå¯¼æ¼”ï¼›</li><li>ç®¡ç†ï¼šæˆæƒä½†ä¸è¦æ”¾ç¾Šã€‚</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/417289a1591241ab8c3ccfbedc6c2ade~tplv-k3u1fbpfcp-zoom-1.image" alt="s11272702112022"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å››å­¦ä¹ æ–¹æ³•">å››ã€å­¦ä¹ æ–¹æ³•<a class="hash-link" href="#å››å­¦ä¹ æ–¹æ³•" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-å­¦ä¹ æ–¹å‘">1. å­¦ä¹ æ–¹å‘<a class="hash-link" href="#1-å­¦ä¹ æ–¹å‘" title="Direct link to heading">â€‹</a></h3><p>æ‰¾åˆ°æ­£ç¡®çš„å­¦ä¹ æ–¹å‘ï¼Œå­¦ä¹ æ–¹å‘åº”è¯¥å›´ç»•ä»¥ä¸‹ 2 ä¸ªæ–¹é¢ï¼š</p><ul><li>å·¥ä½œå¼ºç›¸å…³ï¼ˆä¸å·¥ä½œå¼±ç›¸å…³çš„å­¦ä¹ ä¼˜å…ˆçº§å¯é™ä½ï¼‰ï¼›</li><li>èƒ½äº§å‡ºä»·å€¼ï¼ˆæ²¡æœ‰äº§å‡ºçš„å­¦ä¹ ä¼˜å…ˆçº§å¯é™ä½ï¼‰ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-é“¾å¼å­¦ä¹ æ³•">2. é“¾å¼å­¦ä¹ æ³•<a class="hash-link" href="#2-é“¾å¼å­¦ä¹ æ³•" title="Direct link to heading">â€‹</a></h3><p>é“¾å¼å­¦ä¹ æ³•ï¼Œå¯ä»¥æå‡æŠ€æœ¯æ·±åº¦ï¼Œè®©çŸ¥è¯†å½¢æˆé”é“¾ï¼Œç¯ç¯ç›¸æ‰£ã€‚</p><p>åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p><ul><li>æ˜ç¡®ä¸€é¡¹æŠ€æœ¯çš„æ·±åº¦å¯ä»¥åˆ†ä¸ºå“ªäº›å±‚ï¼›</li><li>æ˜ç¡®è¦å­¦åˆ°å“ªä¸€å±‚ï¼›</li><li>æ˜ç¡®æ¯ä¸€å±‚åº”è¯¥æ€ä¹ˆå­¦ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-æ¯”è¾ƒå­¦ä¹ æ³•">3. æ¯”è¾ƒå­¦ä¹ æ³•<a class="hash-link" href="#3-æ¯”è¾ƒå­¦ä¹ æ³•" title="Direct link to heading">â€‹</a></h3><p>æ¯”è¾ƒå­¦ä¹ æ³•ï¼Œé€šè¿‡æ¨ªå‘å¯¹æ¯”ä¸åŒæŠ€æœ¯ï¼Œè®©æŠ€æœ¯é€‰å‹æ›´åŠ æœ‰ç†æœ‰æ®ã€‚</p><p>åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p><ul><li>æ•´ç†é¢†åŸŸå…³é”®æŠ€æœ¯ç‚¹ï¼›</li><li>æ•´ç†ä¸åŒæŠ€æœ¯çš„å·®å¼‚ç‚¹ï¼›</li><li>æ•´ç†å·®å¼‚ç‚¹èƒŒåçš„åŸç†å’Œå¯¹åº”ç”¨åœºæ™¯çš„å½±å“ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-é—´éš”å­¦ä¹ æ³•">4. é—´éš”å­¦ä¹ æ³•<a class="hash-link" href="#4-é—´éš”å­¦ä¹ æ³•" title="Direct link to heading">â€‹</a></h3><blockquote><p>è¯¥æ–¹æ³•æ¥è‡ª<a href="https://time.geekbang.org/column/article/331463" target="_blank" rel="noopener noreferrer">å¤§å‚æ™‹å‡æŒ‡å— - 19 | é“¾å¼ &amp; æ¯”è¾ƒ &amp; ç¯å¼å­¦ä¹ æ³•ï¼šæ€ä¹ˆå¤šç»´åº¦æå‡æŠ€æœ¯èƒ½åŠ›ï¼Ÿ</a>è¯„è®ºåŒº</p></blockquote><p>é•¿æœŸè®°å¿†çš„å½¢æˆï¼Œéœ€è¦æœ‰ä¸ªå·©å›ºçš„è¿‡ç¨‹ï¼Œå¯èƒ½æ˜¯æ•°å°æ—¶ï¼Œå¯èƒ½æ˜¯æ•°å¤©ï¼Œåœ¨è¿™æœŸé—´ï¼Œè®°å¿†ç—•è¿¹å¾—åˆ°åŠ æ·±ï¼Œæ‰€å­¦çš„æ–°çŸ¥è¯†ä¸æ—§çŸ¥è¯†å»ºç«‹è¿æ¥ï¼Œå¸¦æ¥ç¨³å›ºçš„é•¿æœŸè®°å¿†ï¼Œå› æ­¤ä¸è¦é¢‘ç¹çš„è¿›è¡Œé›†ä¸­å¼å­¦ä¹ ï¼Œè€Œæ˜¯æœ‰é—´éš”çš„è¿›è¡Œã€‚</p><p>æ‹¿å­¦ä¹ ä¸“æ æ¥è¯´ï¼Œä¸è¦åå¤åœ°å»å­¦ä¹ åŒä¸€ç« èŠ‚ï¼Œè€Œæ˜¯æœ‰é—´éš”åœ°è¿›è¡Œï¼Œç­‰é—å¿˜ä¸€äº›åè¿›è¡Œç»ƒä¹ ï¼Œèƒ½å¤Ÿå½¢æˆé•¿ä¹…çš„è®°å¿†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-teach-å­¦ä¹ æ³•">5. Teach å­¦ä¹ æ³•<a class="hash-link" href="#5-teach-å­¦ä¹ æ³•" title="Direct link to heading">â€‹</a></h3><p>é€šè¿‡æ•™åˆ«äººæ¥æå‡è‡ªå·±ï¼Œæˆ‘çš„æ–¹å¼æ˜¯<strong>å†™åšå®¢</strong>ã€‚</p><p>å­¦ä¹ å®ŒæŠ€æœ¯åï¼Œå°†å­¦åˆ°çš„ä¸œè¥¿é€šè¿‡åšå®¢çš„æ–¹å¼ï¼Œä¼ æˆç»™å…¶ä»–äººã€‚</p><p>åœ¨å†™åšå®¢çš„è¿‡ç¨‹ä¸­å¯ä»¥å·©å›ºã€æ¢³ç†çŸ¥è¯†ï¼Œå¹¶ä¸”è¾“å‡ºå­¦ä¹ æˆæœï¼ŒåŠ å¼ºå­¦ä¹ çš„æ·±åº¦ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bde90cba595e452290e5c688e4d4a817~tplv-k3u1fbpfcp-zoom-1.image" alt="s11450402112022"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äº”åšäº‹æ–¹æ³•">äº”ã€åšäº‹æ–¹æ³•<a class="hash-link" href="#äº”åšäº‹æ–¹æ³•" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-3c-æ–¹æ¡ˆè®¾è®¡æ³•">1. 3C æ–¹æ¡ˆè®¾è®¡æ³•<a class="hash-link" href="#1-3c-æ–¹æ¡ˆè®¾è®¡æ³•" title="Direct link to heading">â€‹</a></h3><p>æ¯æ¬¡åšäº‹çš„æ—¶å€™è‡³å°‘è®¾è®¡ 3 ä¸ªæ–¹æ¡ˆï¼Œæ‹©ä¼˜æ‰§è¡Œã€‚</p><p>èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç³»ç»Ÿçš„æ¢³ç†ä¸€ä¸ªé¢†åŸŸï¼Œæå‡æ•´ä½“æµç¨‹å’Œå·¥ä½œæ•ˆç‡ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-pdca-æ‰§è¡Œæ³•">2. PDCA æ‰§è¡Œæ³•<a class="hash-link" href="#2-pdca-æ‰§è¡Œæ³•" title="Direct link to heading">â€‹</a></h3><p>PDCA æ‰§è¡Œæ³•æŠŠäº‹æƒ…çš„æ‰§è¡Œè¿‡ç¨‹åˆ†æˆå››ä¸ªç¯èŠ‚ï¼Œä¿è¯å…·ä½“äº‹é¡¹é«˜æ•ˆé«˜è´¨åœ°è½åœ°ï¼š</p><ul><li>è®¡åˆ’ï¼šç¡®å®šå…·ä½“ä»»åŠ¡ã€é˜¶æ®µç›®æ ‡ã€æ—¶é—´èŠ‚ç‚¹å’Œå…·ä½“è´£ä»»äººï¼›</li><li>æ‰§è¡Œï¼šè½åœ°å„é¡¹å…·ä½“æ´»åŠ¨ï¼›</li><li>æ£€æŸ¥ï¼šæ£€æŸ¥å®é™…æ‰§è¡Œç»“æœï¼›</li><li>è¡ŒåŠ¨ï¼šæ˜ç¡®ä¸‹ä¸€æ­¥éœ€è¦é‡‡å–çš„æªæ–½ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-5why-åˆ†ææ³•">3. 5Why åˆ†ææ³•<a class="hash-link" href="#3-5why-åˆ†ææ³•" title="Direct link to heading">â€‹</a></h3><p>æ‰¾å‡†é—®é¢˜æºå¤´æ‰èƒ½æ²»æ ‡åˆæ²»æœ¬ï¼Œé€šè¿‡è¿½é—® 5 ä¸ªä¸ºä»€ä¹ˆæ¥åˆ†æé—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œä»è€Œå¾—åˆ°å½»åº•çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-é‡‘å­—å¡”æ±‡æŠ¥æ³•">4. é‡‘å­—å¡”æ±‡æŠ¥æ³•<a class="hash-link" href="#4-é‡‘å­—å¡”æ±‡æŠ¥æ³•" title="Direct link to heading">â€‹</a></h3><p>é‡‘å­—å¡”æ±‡æŠ¥æ³•æ¥æºäºé‡‘å­—å¡”åŸç†ï¼Œé‡‘å­—å¡”åŸç†çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥å½’çº³å‡ºä¸€ä¸ªä¸­å¿ƒæ€æƒ³ï¼Œä¸­å¿ƒæ€æƒ³å¯ç”±ä¸‰åˆ°ä¸ƒä¸ªè®ºç‚¹æ”¯æŒï¼Œæ¯ä¸ªè®ºç‚¹å¯ä»¥ç”±ä¸‰åˆ°ä¸ƒä¸ªè®ºæ®æ”¯æ’‘ã€‚</p><p>é‡‘å­—å¡”æ±‡æŠ¥æ³•ï¼š</p><ul><li>æ€»ä½“ç»“è®ºï¼šå…ˆæŠ›å‡ºå…³é”®æ€§ç»“è®ºï¼›</li><li>å…·ä½“åˆ†æï¼šåˆ†æç»“è®ºçš„å› æœï¼›</li><li>å…³é”®äº‹é¡¹ï¼šä»‹ç»åšè¿‡çš„å…³é”®äº‹é¡¹çš„æƒ…å†µï¼›</li><li>æ€»ç»“æ”¹è¿›ï¼šæ€»ç»“ç»éªŒæ•™è®­å’Œåç»­æ”¹è¿›æªæ–½ã€‚</li></ul><p>å…³é”®äº‹é¡¹æ±‡æŠ¥æŠ€å·§ï¼š</p><ul><li>å…¨å±€å¤§å›¾ï¼šå±•ç¤ºæ•´ä½“æƒ…å†µï¼›</li><li>æ¼”è¿›è·¯å¾„ï¼šå±•ç¤ºä¸ªä½“çš„å‘å±•è·¯å¾„å’Œå½“å‰æ‰€å¤„é˜¶æ®µï¼›</li><li>æ—¶é—´è½´ï¼šå±•ç¤ºäº‹æƒ…å‘ç”Ÿè¿‡ç¨‹ï¼›</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5f173682c3e47949c82eda655bf5880~tplv-k3u1fbpfcp-zoom-1.image" alt="s21093702112022"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-5w1h1d-åˆ†ææ³•">5. 5W1H1D åˆ†ææ³•<a class="hash-link" href="#5-5w1h1d-åˆ†ææ³•" title="Direct link to heading">â€‹</a></h3><p>5W1H1D åˆ†ææ³•ç”¨äºå¸®åŠ©æˆ‘ä»¬æ·±å…¥ç†è§£ä¸šåŠ¡ï¼Œç†è§£ä¸šåŠ¡åŠŸèƒ½=åˆ†æåŠŸèƒ½éœ€æ±‚+åˆ†æè´¨é‡éœ€æ±‚+æ€»ç»“ä¸Šçº¿æ•ˆæœã€‚</p><p><strong>5Wï¼šéœ€æ±‚äº§ç”Ÿçš„èƒŒæ™¯å’ŒåŠŸèƒ½ä¸Šçº¿åçš„è¿è¡Œç¯å¢ƒ</strong>ã€‚</p><p><strong>1Hï¼šå¦‚ä½•å»å®ç°ï¼Œæ•´ä¸ªæµç¨‹æ˜¯æ€ä¹ˆè¿è¡Œçš„</strong>ã€‚</p><p><strong>1Dï¼šä¸Šçº¿ä¹‹åçš„ä¸šåŠ¡æ•ˆæœ</strong>ã€‚</p><p>5W çš„å…·ä½“æè¿°å¦‚ä¸‹ï¼š</p><ul><li>ä½•æ—¶ï¼šéœ€è¦ç”¨åˆ°è¯¥åŠŸèƒ½çš„æ—¶é—´ï¼›</li><li>ä½•åœ°ï¼šéœ€è¦ç”¨åˆ°è¯¥åŠŸèƒ½çš„åœ°ç‚¹ï¼Œä¹Ÿå¯ä»¥æŒ‡åœºæ‰€ï¼Œå¦‚åœ°é“ã€å¼€è½¦ç­‰ï¼›</li><li>ä½•äººï¼šè¯¥åŠŸèƒ½é¢å‘çš„äººç¾¤ï¼›</li><li>ä½•äº‹ï¼šè¿™ä¸ªåŠŸèƒ½å…·ä½“æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬æè¿°åœ¨éœ€æ±‚æ–‡æ¡£ä¸­ï¼›</li><li>ä½•å› ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œåªæœ‰çœŸæ­£äº†è§£å®¢æˆ·æå‡ºéœ€æ±‚çš„é©±åŠ¨åŠ›ï¼Œæ‰èƒ½çœŸæ­£è§£å†³å®¢æˆ·çš„é—®é¢˜ã€‚</li></ul><p>é€šè¿‡ 5W1H8C1D åˆ†ææ³•å¿«é€Ÿå…¥é—¨ï¼Œä¸Šçº¿å‰åˆ†æå’Œç†è§£ä¸šåŠ¡åŠŸèƒ½ï¼Œä¸Šçº¿åç†Ÿæ‚‰è¿è¡Œæ•°æ®ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å…­å°ç»“">å…­ã€å°ç»“<a class="hash-link" href="#å…­å°ç»“" title="Direct link to heading">â€‹</a></h2><p>æœ¬æ–‡ä»æ™‹å‡ä½“ç³»ã€èŒçº§è¯¦è§£ã€å­¦ä¹ æ–¹æ³•ã€åšäº‹æ–¹æ³• 4 ä¸ªæ–¹å‘ä»‹ç»äº†å­¦ä¹ <a href="https://time.geekbang.org/column/intro/100064501?tab=catalog" target="_blank" rel="noopener noreferrer">ã€Šå¤§å‚æ™‹å‡æŒ‡å—ã€‹</a>çš„å¿ƒå¾—ï¼Œå…¶ä¸­æ™‹å‡ä½“ç³»ã€èŒçº§è¯¦è§£æå‡è®¤çŸ¥ï¼Œå­¦ä¹ æ–¹æ³•ã€åšäº‹æ–¹æ³•æé«˜æ•ˆç‡ï¼Œæƒ³äº†è§£æ›´å¤šå¯ä»¥è‡³åŸæ–‡-<a href="https://time.geekbang.org/column/intro/100064501?tab=catalog" target="_blank" rel="noopener noreferrer">ã€Šå¤§å‚æ™‹å‡æŒ‡å—ã€‹</a>è¿›è¡Œå­¦ä¹ ã€‚</p><p>å¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢é˜…è¯»ï½</p><p>åˆ«å¿˜äº†ç‚¹ä¸ªèµé¼“åŠ±ä¸€ä¸‹æˆ‘å“¦ï¼Œç¬”èŠ¯ â¤ï¸</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://time.geekbang.org/column/intro/100064501?tab=catalog" target="_blank" rel="noopener noreferrer">ã€Šå¤§å‚æ™‹å‡æŒ‡å—ã€‹</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2022/01/31/ã€è¯‘ã€‘ä½ çŸ¥é“ Code Review åº”è¯¥æ£€æŸ¥å“ªäº›é—®é¢˜å—">ã€è¯‘ã€‘ä½ çŸ¥é“ Code Review åº”è¯¥æ£€æŸ¥å“ªäº›é—®é¢˜å—</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-01-31T19:11:14.000Z" itemprop="datePublished">January 31, 2022</time> Â· <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><p>åŸæ–‡ï¼š<a href="https://www.michaelagreiler.com/code-review-checklist-2/" target="_blank" rel="noopener noreferrer">https://www.michaelagreiler.com/code-review-checklist-2/</a></p><p>åŸæ–‡ä½œè€…ï¼š<a href="https://www.michaelagreiler.com/" target="_blank" rel="noopener noreferrer">Dr. McKayla</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€<a class="hash-link" href="#ä¸€å‰è¨€" title="Direct link to heading">â€‹</a></h2><p>Code Review å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç è´¨é‡ã€å‡å°‘é¡¹ç›®é—®é¢˜ï¼Œé‚£ä¹ˆæ‚¨çŸ¥é“ Code Review å¯ä»¥ä»å“ªäº›åœ°æ–¹å¼€å§‹å®¡æŸ¥å—ï¼Ÿ</p><p>ä¸‹æ–‡å°†åˆ—å‡ºä¸€ä¸ªè¯¦ç»†çš„ä»£ç å®¡æŸ¥æ¸…å•ï¼Œè¯¥æ¸…å•æ˜¯ä½œè€… Dr. McKayla åœ¨ Microsoft ä¸æ•°ç™¾åå·¥ç¨‹å¸ˆä¸€èµ·å·¥ä½œï¼Œåˆ†æäº†æ•°åƒæ¬¡ä»£ç å®¡æŸ¥åï¼Œæ€»ç»“å¾—å‡ºçš„æœ€å…¨ä»£ç å®¡æ ¸æ¸…å•ã€‚</p><p>å®ƒåˆ†ä¸º 7 ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½ä¼šå¼•å¯¼æˆ‘ä»¬å®Œæˆå‡ ä¸ªé—®é¢˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒä»£ç å®¡æŸ¥æ¸…å•">äºŒã€ä»£ç å®¡æŸ¥æ¸…å•<a class="hash-link" href="#äºŒä»£ç å®¡æŸ¥æ¸…å•" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-åŠŸèƒ½æ£€æŸ¥">1. åŠŸèƒ½æ£€æŸ¥<a class="hash-link" href="#1-åŠŸèƒ½æ£€æŸ¥" title="Direct link to heading">â€‹</a></h3><ul><li>æ­¤ä»£ç æ›´æ”¹æ˜¯å¦å®Œæˆäº†å®ƒåº”è¯¥åšçš„äº‹æƒ…ï¼Ÿ</li><li>è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¯ä»¥ç®€åŒ–å—ï¼Ÿ</li><li>æ‚¨æ˜¯å¦ä¼šä»¥åœ¨ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€æ€§èƒ½å’Œå®‰å…¨æ€§ç­‰æ–¹é¢æœ‰æ›´å¥½çš„æ–¹å¼è§£å†³é—®é¢˜ï¼Ÿ</li><li>ä»£ç åº“ä¸­æ˜¯å¦æœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Ÿå¦‚æœæœ‰ï¼Œä¸ºä»€ä¹ˆä¸å¤ç”¨æ­¤åŠŸèƒ½ï¼Ÿ</li><li>è¿™æ®µä»£ç æ˜¯å¦éµå¾ªé¢å‘å¯¹è±¡çš„åˆ†æå’Œè®¾è®¡åŸåˆ™ï¼Œå¦‚å•ä¸€èŒè´£åŸåˆ™ã€å¼€é—­åŸåˆ™ã€Liskov æ›¿æ¢åŸåˆ™ã€æ¥å£éš”ç¦»ã€ä¾èµ–æ³¨å…¥ï¼Ÿ</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-bug-æ£€æŸ¥">2. bug æ£€æŸ¥<a class="hash-link" href="#2-bug-æ£€æŸ¥" title="Direct link to heading">â€‹</a></h3><ul><li>æ‚¨èƒ½æƒ³åˆ°ä»£ç æœªæŒ‰é¢„æœŸè¿è¡Œçš„ä»»ä½•ç”¨ä¾‹å—ï¼Ÿ</li><li>æ‚¨èƒ½æƒ³åˆ°ä»»ä½•å¯èƒ½ç ´åä»£ç çš„è¾“å…¥æˆ–å¤–éƒ¨äº‹ä»¶å—ï¼Ÿ</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-ä¾èµ–é¡¹æ£€æŸ¥">3. ä¾èµ–é¡¹æ£€æŸ¥<a class="hash-link" href="#3-ä¾èµ–é¡¹æ£€æŸ¥" title="Direct link to heading">â€‹</a></h3><ul><li>å¦‚æœæ­¤æ›´æ”¹éœ€è¦åœ¨ä»£ç ä¹‹å¤–è¿›è¡Œæ›´æ–°ï¼Œä¾‹å¦‚æ›´æ–°æ–‡æ¡£ã€é…ç½®ã€è‡ªè¿°æ–‡ä»¶ï¼Œæ˜¯å¦å·²å®Œæˆï¼Ÿ</li><li>è¿™ç§å˜åŒ–æ˜¯å¦ä¼šå¯¹ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†äº§ç”Ÿä»»ä½•å½±å“ï¼Œæ˜¯å¦å·²ç»å…¼å®¹ï¼Ÿ</li><li>å¦‚æœä»£ç å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œå®ƒæ˜¯å¦è§£å†³äº†è·¨ç«™ç‚¹è„šæœ¬ã€SQL æ³¨å…¥ç­‰å®‰å…¨æ¼æ´ï¼Œå®ƒæ˜¯å¦è¿›è¡Œè¾“å…¥æ¸…ç†å’ŒéªŒè¯ï¼Ÿ</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-å¯ç”¨æ€§å’Œå¯è®¿é—®æ€§">4. å¯ç”¨æ€§å’Œå¯è®¿é—®æ€§<a class="hash-link" href="#4-å¯ç”¨æ€§å’Œå¯è®¿é—®æ€§" title="Direct link to heading">â€‹</a></h3><ul><li>ä»å¯ç”¨æ€§çš„è§’åº¦æ¥çœ‹ï¼Œæè®®çš„è§£å†³æ–¹æ¡ˆæ˜¯å¦è®¾è®¡è‰¯å¥½ï¼Ÿ</li><li>API æ˜¯å¦æœ‰æ®å¯æŸ¥ï¼Ÿ</li><li>UI æ˜¯å¦å¯è®¿é—®ï¼Ÿ</li><li>API/UI ä½¿ç”¨èµ·æ¥æ˜¯å¦ç›´è§‚ï¼Ÿ</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-è¡¨ç°">5. è¡¨ç°<a class="hash-link" href="#5-è¡¨ç°" title="Direct link to heading">â€‹</a></h3><ul><li>æ‚¨æ˜¯å¦è®¤ä¸ºæ­¤ä»£ç æ›´æ”¹ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ï¼Ÿ</li><li>æ‚¨æ˜¯å¦çœ‹åˆ°ä»»ä½•æé«˜ä»£ç æ€§èƒ½çš„æ½œåŠ›ï¼Ÿ</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="6-æµ‹è¯•">6. æµ‹è¯•<a class="hash-link" href="#6-æµ‹è¯•" title="Direct link to heading">â€‹</a></h3><ul><li>ä»£ç æ˜¯å¦å¯æµ‹è¯•ï¼Ÿ</li><li>å®ƒæ˜¯å¦æœ‰è¶³å¤Ÿçš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå•å…ƒ/é›†æˆ/ç³»ç»Ÿæµ‹è¯•ï¼‰ï¼Ÿ</li><li>ç°æœ‰çš„æµ‹è¯•æ˜¯å¦åˆç†åœ°æ¶µç›–äº†ä»£ç æ›´æ”¹ï¼Ÿ</li><li>æ˜¯å¦æœ‰ä¸€äº›æµ‹è¯•ç”¨ä¾‹ã€è¾“å…¥æˆ–è¾¹ç¼˜ç”¨ä¾‹éœ€è¦é¢å¤–æµ‹è¯•ï¼Ÿ</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="7-å¯è¯»æ€§">7. å¯è¯»æ€§<a class="hash-link" href="#7-å¯è¯»æ€§" title="Direct link to heading">â€‹</a></h3><ul><li>ä»£ç å®¹æ˜“ç†è§£å—ï¼Ÿ</li><li>å“ªäº›éƒ¨åˆ†è®©æ‚¨æ„Ÿåˆ°å›°æƒ‘ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li><li>å¯ä»¥é€šè¿‡æ›´å°çš„æ–¹æ³•æ¥æé«˜ä»£ç çš„å¯è¯»æ€§å—ï¼Ÿ</li><li>ä»£ç çš„å¯è¯»æ€§å¯ä»¥é€šè¿‡ä¸åŒçš„å‡½æ•°/æ–¹æ³•æˆ–å˜é‡åæ¥æé«˜å—ï¼Ÿ</li><li>ä»£ç æ˜¯å¦ä½äºæ­£ç¡®çš„æ–‡ä»¶/æ–‡ä»¶å¤¹/åŒ…ä¸­ï¼Ÿ</li><li>æ›´å¤šæ³¨é‡Šä¼šä½¿ä»£ç æ›´æ˜“äºç†è§£å—ï¼Ÿ</li><li>æ˜¯å¦å¯ä»¥é€šè¿‡ä½¿ä»£ç æœ¬èº«æ›´å…·å¯è¯»æ€§æ¥åˆ é™¤ä¸€äº›æ³¨é‡Šï¼Ÿ</li><li>æ‚¨è®¤ä¸ºæŸäº›æ–¹æ³•åº”è¯¥è¢«é‡ç»„ä»¥æ‹¥æœ‰æ›´ç›´è§‚çš„æ§åˆ¶æµç¨‹å—ï¼Ÿ</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰è‡ªå®¡ä»£ç ">ä¸‰ã€è‡ªå®¡ä»£ç <a class="hash-link" href="#ä¸‰è‡ªå®¡ä»£ç " title="Direct link to heading">â€‹</a></h2><p>ä»£ç å®¡æŸ¥æ¸…å•ä¸ä»…é€‚ç”¨äºä»£ç å®¡æŸ¥äººå‘˜ã€‚æˆ‘ä»¬åº”è¯¥å¹¶é¦–å…ˆæˆä¸ºè‡ªå·±çš„å®¡æŸ¥è€…ï¼Œéµå¾ªä»£ç å®¡æŸ¥æœ€ä½³å®è·µã€‚</p><p>å› æ­¤ï¼Œåœ¨å‘é€ä»£ç è¿›è¡Œå®¡æ ¸ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š</p><ul><li>ä»£ç ç¼–è¯‘å¹¶é€šè¿‡é™æ€åˆ†æï¼Œæ²¡æœ‰è­¦å‘Š</li><li>ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼ˆå•å…ƒã€é›†æˆå’Œç³»ç»Ÿæµ‹è¯•ï¼‰</li><li>æ‚¨å·²ç»ä»”ç»†æ£€æŸ¥äº†æ‹¼å†™é”™è¯¯å¹¶è¿›è¡Œäº†æ¸…ç†ï¼ˆè¯„è®ºã€å¾…åŠäº‹é¡¹ç­‰ï¼‰</li><li>æ‚¨æ¦‚è¿°äº†æ­¤æ›´æ”¹çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ›´æ”¹çš„åŸå› å’Œæ›´æ”¹çš„å†…å®¹</li><li>é™¤æ­¤ä¹‹å¤–ï¼Œä½œä¸ºä»£ç ä½œè€…ï¼Œæ‚¨åº”è¯¥é€šè¿‡ä¸å®¡é˜…è€…ç›¸åŒçš„ä»£ç å®¡æŸ¥æ¸…å•ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å››å…³æ³¨é‡è¦é—®é¢˜">å››ã€å…³æ³¨é‡è¦é—®é¢˜<a class="hash-link" href="#å››å…³æ³¨é‡è¦é—®é¢˜" title="Direct link to heading">â€‹</a></h2><p>ä½œä¸ºä»£ç å®¡æŸ¥å‘˜ï¼Œæ‚¨çš„ä»»åŠ¡æ˜¯é¦–å…ˆå¯»æ‰¾æœ€é‡è¦çš„é—®é¢˜ã€‚ç»“æ„æˆ–é€»è¾‘é—®é¢˜æ¯”ä»£ç æ ¼å¼ç­‰å°é—®é¢˜æ›´æœ‰ä»·å€¼ã€‚</p><p>ä¸€ä»½å‡ºè‰²çš„æ¸…å•å°†æ‚¨çš„æ³¨æ„åŠ›å¼•å¯¼åˆ°é‡è¦å’Œæœ€æœ‰ä»·å€¼çš„é—®é¢˜ä¸Šã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äº”è‡ªåŠ¨åŒ–ç¼–ç é£æ ¼åŠçº¦å®š">äº”ã€è‡ªåŠ¨åŒ–ç¼–ç é£æ ¼åŠçº¦å®š<a class="hash-link" href="#äº”è‡ªåŠ¨åŒ–ç¼–ç é£æ ¼åŠçº¦å®š" title="Direct link to heading">â€‹</a></h2><p>æ¸…æ™°çš„ç¼–ç é£æ ¼æŒ‡å—æ˜¯åœ¨ä»£ç åº“ä¸­å¼ºåˆ¶æ‰§è¡Œä¸€è‡´æ€§çš„å”¯ä¸€æ–¹æ³•ã€‚è€Œä¸”ï¼Œä¸€è‡´æ€§ä½¿ä»£ç å®¡æŸ¥æ›´å¿«ï¼Œå…è®¸äººä»¬è½»æ¾æ›´æ”¹é¡¹ç›®ï¼Œå¹¶ä½¿æ‚¨çš„ä»£ç åº“ä¿æŒå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>ä¸Šæ–‡çš„å®¡æŸ¥æ¸…å•æ²¡æœ‰ä»‹ç»ç¼–ç é£æ ¼ç›¸å…³çš„å†…å®¹ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å»ºè®®ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æ¥å¼ºåˆ¶éµå®ˆç¼–ç é£æ ¼ã€‚é€šè¿‡å®‰è£…åŠé…ç½® prettierã€eslintã€tslintã€stylelint ç­‰æ ¼å¼åŒ–å·¥å…·ï¼ŒèŠ‚çœç¼–ç é£æ ¼çš„ä»£ç å®¡æŸ¥æ—¶é—´ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å…­æ³¨æ„è¡¨è¾¾æ–¹å¼">å…­ã€æ³¨æ„è¡¨è¾¾æ–¹å¼<a class="hash-link" href="#å…­æ³¨æ„è¡¨è¾¾æ–¹å¼" title="Direct link to heading">â€‹</a></h2><p>æœ€åï¼Œä»£ç å®¡æŸ¥åé¦ˆçš„è´¨é‡ä¸ä»…å–å†³äºæ‚¨åœ¨è¯´ä»€ä¹ˆï¼Œè¿˜å–å†³äºæ‚¨æ€ä¹ˆè¯´ã€‚
å»ºè®®å°†æ‚¨çš„åé¦ˆè¡¨è¿°ä¸ºå»ºè®®è€Œä¸æ˜¯è¦æ±‚ã€‚
ä¾‹å¦‚ï¼Œä¸è¦å†™â€œå˜é‡ååº”è¯¥æ˜¯ removeObject â€ï¼Œè€Œæ˜¯è¯´â€œè°ƒç”¨å˜é‡ removeObject æ€ä¹ˆæ ·ï¼Ÿâ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸ƒæ€»ç»“">ä¸ƒã€æ€»ç»“<a class="hash-link" href="#ä¸ƒæ€»ç»“" title="Direct link to heading">â€‹</a></h2><p>ä»£ç å®¡æŸ¥æ¸…å•ä»¥åŠå›´ç»•ä»£ç å®¡æŸ¥çš„æ˜ç¡®è§„åˆ™å’ŒæŒ‡å—è‡³å…³é‡è¦ã€‚ä»£ç å®¡æŸ¥æ¸…å•å¯ä»¥ä½¿æ‚¨çš„ä»£ç å®¡æŸ¥å®è·µå¯¹æ‚¨çš„å›¢é˜Ÿæ›´åŠ æœ‰ç›Šï¼Œå¹¶æ˜¾ç€åŠ å¿«ä»£ç å®¡æŸ¥é€Ÿåº¦ã€‚</p><p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº† Code Review çš„ 7 ç§å®¡æŸ¥ç±»å‹ï¼Œå¸®åŠ©æ‚¨åœ¨ Code Review èšç„¦åˆ°é‡è¦å’Œæœ€æœ‰ä»·å€¼çš„é—®é¢˜ä¸Šï¼Œæå‡ Code Review è´¨é‡ã€‚</p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/å®è·µæŒ‡å—-å¿«é€Ÿæ­å»ºæ–‡æ¡£ç³»ç»Ÿ">å®è·µæŒ‡å—-å¿«é€Ÿæ­å»ºæ–‡æ¡£ç³»ç»Ÿ</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-01-13T00:00:00.000Z" itemprop="datePublished">January 13, 2022</time> Â· <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/jiaozitang" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://img20.360buyimg.com/ling/jfs/t1/169450/22/15498/91143/60618a55E4926733a/fe8ac24df4f441e5.png" alt="Jiaozi"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jiaozitang" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jiaozi</span></a></div><small class="avatar__subtitle" itemprop="description">Aotu Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€èƒŒæ™¯">ä¸€ã€èƒŒæ™¯<a class="hash-link" href="#ä¸€èƒŒæ™¯" title="Direct link to heading">â€‹</a></h2><p>éœ€æ±‚å°±æ˜¯ç”Ÿäº§åŠ›ï¼Œå¸¸è§„é¡¹ç›®çš„æ–‡æ¡£è¯´æ˜ï¼Œå¤§å¤šæ”¾åœ¨ <code>README.md</code> ä¸‹è¿›è¡Œè®°å½•å’Œè¯´æ˜ï¼Œè€Œå¯¹äºä¸ºå¤–éƒ¨èµ‹èƒ½çš„é¡¹ç›®æ¥è¯´ï¼Œä¸€ä¸ªå¯¹å¤–å¼€æ”¾çš„æ–‡æ¡£ç³»ç»Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><p>å¦‚ä¸‹æ˜¯å¯ä¾›å‚è€ƒä¸€ä¸ªæ ‡å‡†çš„åœ¨çº¿æ–‡æ¡£ç³»ç»Ÿç•Œé¢ - <a href="https://taro-docs.jd.com/taro/docs/README/index.html" target="_blank" rel="noopener noreferrer">taro å®˜ç½‘</a>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c32c48d991741f4845bf30d9a17e1c8~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒæŠ€æœ¯é€‰å‹">äºŒã€æŠ€æœ¯é€‰å‹<a class="hash-link" href="#äºŒæŠ€æœ¯é€‰å‹" title="Direct link to heading">â€‹</a></h2><p>é¦–å…ˆç†æ¸…æ­å»ºä¸€ä¸ªåœ¨çº¿çš„æ–‡æ¡£ç³»ç»Ÿçš„è¦æ±‚ï¼š</p><ol><li>å†…ç½® markdown æ–‡ä»¶è½¬ç½‘é¡µ</li><li>å¯¹ SEO å‹å¥½</li></ol><ul><li>å¯é€šè¿‡ React æ‰©å±•ç½‘é¡µ</li><li>ç•Œé¢ç¾è§‚</li><li>æ–‡æ¡£æ¸…æ™°ï¼Œä¸Šæ‰‹ç®€å•ï¼Œæ–¹ä¾¿éƒ¨ç½²</li><li>æ‹“å±•åŠŸèƒ½ä¸°å¯Œï¼Œå¦‚å¯æœç´¢ã€æ–‡æ¡£ç‰ˆæœ¬åŒ–</li></ul><p>åœ¨ä¸Šè¿°éœ€æ±‚èƒŒæ™¯ä¸‹ï¼Œæ‰¾å‡ºäº†ä»¥ä¸‹å¯ä¾›å‚è€ƒçš„æŠ€æœ¯æ ˆï¼š</p><blockquote><p>ä¸‹è¡¨æ ¼æ•°æ®æ¥æºï¼š<a href="https://blog.hming.org/2019/05/15/wen-dang-wang-zhan-sheng-cheng-gong-ju-xuan-xing/" target="_blank" rel="noopener noreferrer">æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…·é€‰å‹</a></p></blockquote><table><thead><tr><th>å¼€æºå·¥å…·å¯¹æ¯”</th><th>Hexo</th><th>VuePress</th><th>Docute</th><th>Docsify</th><th>Docusaurus</th></tr></thead><tbody><tr><td>æ–‡æ¡£ç”Ÿæˆæ–¹å¼</td><td>é¢„å…ˆæ¸²æŸ“ HTML</td><td>é¢„å…ˆæ¸²æŸ“ HTML</td><td>è¿è¡Œæ—¶è§£æ</td><td>è¿è¡Œæ—¶è§£æ</td><td>é¢„å…ˆæ¸²æŸ“ HTML</td></tr><tr><td>å¯¹ SEO å‹å¥½ç¨‹åº¦</td><td>å‹å¥½</td><td>å‹å¥½</td><td>ä¸å‹å¥½</td><td>ä¸å‹å¥½</td><td>å‹å¥½</td></tr><tr><td>è¯­æ³•</td><td>-</td><td>Vue</td><td>Vue</td><td>Vue</td><td>React</td></tr><tr><td>å®˜ç½‘åœ°å€</td><td><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener noreferrer">hexo</a></td><td><a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vuepress</a></td><td><a href="https://docute.org/zh/" target="_blank" rel="noopener noreferrer">docute</a></td><td>docsify</td><td><a href="https://docusaurus.io/zh-CN/docs" target="_blank" rel="noopener noreferrer">docusaurus</a></td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä¸ªäººåšå®¢</td><td>éœ€è¦ SEO æ”¯æŒçš„æŠ€æœ¯æ–‡æ¡£</td><td>å…¬å¸æˆ–å›¢é˜Ÿå†…éƒ¨çš„æ–‡æ¡£ç³»ç»Ÿ</td><td>å…¬å¸æˆ–å›¢é˜Ÿå†…éƒ¨çš„æ–‡æ¡£ç³»ç»Ÿ</td><td>éœ€è¦ SEO æ”¯æŒçš„æŠ€æœ¯æ–‡æ¡£</td></tr><tr><td>ç‰¹ç‚¹</td><td>ä¸ä¸»é¢˜è§£è€¦ï¼Œæ›´æ¢ä¸»é¢˜æˆæœ¬ä½</td><td>é‡‡ç”¨ vueï¼Œå¯¹ vue å¼€å‘å‹å¥½</td><td>Docuteï¼ˆ60kBï¼‰ä½¿ç”¨ Vueï¼ŒVue Router å’Œ Vuex</td><td>Docsifyï¼ˆ20kBï¼‰ä½¿ç”¨çš„æ˜¯ vanilla JavaScriptÂ </td><td>é‡‡ç”¨ Reactï¼Œå¯¹ React å¼€å‘å‹å¥½</td></tr></tbody></table><p>é€‰æ‹©ä½¿ç”¨äº†ä¸Šæ‰‹ç®€å•ã€å¯¹ SEO å‹å¥½ã€åŠŸèƒ½ä¸°å¯Œçš„ Docusaurus æ¥æ­å»ºæ–‡æ¡£ç³»ç»Ÿã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰å¿«é€Ÿæ­å»º">ä¸‰ã€å¿«é€Ÿæ­å»º<a class="hash-link" href="#ä¸‰å¿«é€Ÿæ­å»º" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-å¼€å§‹">1. å¼€å§‹<a class="hash-link" href="#1-å¼€å§‹" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="11-æ–°å»ºé¡¹ç›®">1.1 æ–°å»ºé¡¹ç›®<a class="hash-link" href="#11-æ–°å»ºé¡¹ç›®" title="Direct link to heading">â€‹</a></h4><p>å®‰è£… Â Nodeï¼Œå¹¶åˆ›å»ºæ–°çš„ Docusaurus ç«™ç‚¹</p><div class="codeBlockContainer_J+bg language-chain theme-code-block"><div class="codeBlockContent_csEI chain"><pre tabindex="0" class="prism-code language-chain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npx create-docusaurus@latest my-website classic</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="12-å¯åŠ¨é¡¹ç›®">1.2 å¯åŠ¨é¡¹ç›®<a class="hash-link" href="#12-å¯åŠ¨é¡¹ç›®" title="Direct link to heading">â€‹</a></h4><p>æœ¬åœ°å¯åŠ¨é¡¹ç›®</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">yarn start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸€ä¸ªæœ¬åœ°çš„æ–‡æ¡£ç³»ç»Ÿå·²ç»æ­å»ºå®Œæˆï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9267ab999fe44139b2bcbdb4e66ea56a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-ç›®å½•ç»“æ„">2. ç›®å½•ç»“æ„<a class="hash-link" href="#2-ç›®å½•ç»“æ„" title="Direct link to heading">â€‹</a></h3><p>ç†Ÿæ‚‰ Docusaurus æ–‡æ¡£ç³»ç»Ÿçš„ç›®å½•ç»“æ„ï¼Œæ¸…æ™°åç»­è‡ªå®šä¹‰é…ç½®åŠæ–‡æ¡£å­˜æ”¾ä½ç½®ã€‚</p><div class="codeBlockContainer_J+bg language-json theme-code-block"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ blog </span><span class="token comment" style="color:#999988;font-style:italic">// åŒ…å«åšå®¢çš„ Markdown æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ </span><span class="token number" style="color:#36acaa">2022</span><span class="token number" style="color:#36acaa">-01</span><span class="token number" style="color:#36acaa">-13</span><span class="token plain">-first-blog-post.markdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ docs </span><span class="token comment" style="color:#999988;font-style:italic">// åŒ…å«æ–‡æ¡£çš„ Markdown æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ README.markdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ api.markdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ changelog.markdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ src </span><span class="token comment" style="color:#999988;font-style:italic">// éæ–‡æ¡£æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ HomepageFeatures.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ HomepageFeatures.module.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ custom.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ pages </span><span class="token comment" style="color:#999988;font-style:italic">// è½¬æ¢æˆç½‘ç«™é¡µé¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€â”€ index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€â”€ index.module.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ markdown-page.markdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ static </span><span class="token comment" style="color:#999988;font-style:italic">// é™æ€èµ„æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â””â”€â”€ img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ docusaurus.config.js </span><span class="token comment" style="color:#999988;font-style:italic">// é…ç½®æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ sidebars.js </span><span class="token comment" style="color:#999988;font-style:italic">// æŒ‡å®šä¾§è¾¹æ æ–‡æ¡£é¡ºåº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-è‡ªå®šä¹‰å†…å®¹">3. è‡ªå®šä¹‰å†…å®¹<a class="hash-link" href="#3-è‡ªå®šä¹‰å†…å®¹" title="Direct link to heading">â€‹</a></h3><p>ç†Ÿæ‚‰äº†ç›®å½•ç»“æ„åï¼Œå¼€å§‹è‡ªå®šä¹‰é…ç½®ï¼Œå°†åˆå§‹åŒ–çš„æ–‡æ¡£é¡¹ç›®ï¼Œæ”¹æˆæˆ‘ä»¬è‡ªå·±çš„å†…å®¹ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="31-é…ç½®ç«™ç‚¹å…ƒæ•°æ®">3.1 é…ç½®ç«™ç‚¹å…ƒæ•°æ®<a class="hash-link" href="#31-é…ç½®ç«™ç‚¹å…ƒæ•°æ®" title="Direct link to heading">â€‹</a></h4><p>åŒ…æ‹¬ï¼š</p><ul><li><code>title</code>ï¼šæ ‡é¢˜</li><li><code>url</code>ï¼šæ–‡æ¡£ç³»ç»ŸåŸŸå</li><li><code>baseUrl</code>ï¼šåŸŸåä¸‹çš„ä¸€çº§åœ°å€</li><li><code>favicon</code>ï¼šç½‘ç«™å›¾æ ‡</li></ul><p>ä¿®æ”¹ docusaurus.config.jsï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;distribute-sdk&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://tls-pre.jd.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/distribute-sdk-docs/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  favicon</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;img/favicon.ico&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="32-é…ç½®å¯¼èˆªæ ">3.2 é…ç½®å¯¼èˆªæ <a class="hash-link" href="#32-é…ç½®å¯¼èˆªæ " title="Direct link to heading">â€‹</a></h4><p>åŒ…æ‹¬å¯¼èˆªæ ã€logoã€ä¸»ç«™åç§°ã€coding åœ°å€ã€‚</p><p>ä¿®æ”¹ docusaurus.config.jsï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  themeConfig</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** @type {import(&#x27;@docusaurus/preset-classic&#x27;).ThemeConfig} */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      navbar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Distribute SDK&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          alt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Distribute SDK Logo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          src</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://img11.360buyimg.com/ling/jfs/t1/103667/23/20676/2779/61d59cd2Ef2665258/239330f23ecbae81.png&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          href</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;docs/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        items</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;doc&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            docId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;README&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            position</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;left&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;æ–‡æ¡£&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> to</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/blog&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Blog&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> position</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;left&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            href</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xx&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// git remote åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Coding&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            position</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;right&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="33-æ–°å¢æ–‡æ¡£">3.3 æ–°å¢æ–‡æ¡£<a class="hash-link" href="#33-æ–°å¢æ–‡æ¡£" title="Direct link to heading">â€‹</a></h4><p>åœ¨ blog è·¯å¾„ä¸‹æ–°å»º markdown æ–‡ä»¶ï¼Œä¼šä»¥æ ‡é¢˜ä¸ºé¡ºåºï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€çº§ç›®å½•ï¼Œå±•ç¤º blog ä¸‹çš„ markdown æ–‡ä»¶è½¬çš„é™æ€ç½‘é¡µã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/394f23b601184d67922762999d30e3d7~tplv-k3u1fbpfcp-zoom-1.image" alt="s11364401222022">
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6881496fd1204df581fdeba4b8c7e8c7~tplv-k3u1fbpfcp-zoom-1.image" alt="s11362001222022"></p><p>åœ¨ docs è·¯å¾„ä¸‹æ–°å»º markdown æ–‡ä»¶ï¼Œä»¥ markdown æ–‡ä»¶å†…å£°æ˜çš„ sidebar_position å¤§å°æ’åºï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€çº§ç›®å½•ã€‚å±•ç¤º docs ä¸‹çš„ markdown æ–‡ä»¶è½¬çš„é™æ€ç½‘é¡µã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3048ad2030d44f398a59b00974688b04~tplv-k3u1fbpfcp-zoom-1.image" alt="s11381701222022"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f81f9d744294cf0aa47f9b1635abaf8~tplv-k3u1fbpfcp-zoom-1.image" alt="s11383101222022"></p><p>å¦‚ä¸‹æ˜¯æ–‡æ¡£ç½‘ç«™æ•ˆæœï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c2b8e2634a34411b9c14d2ed0b631f5~tplv-k3u1fbpfcp-watermark.image?" alt="Untitled7.gif"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å››ä¸°å¯ŒåŠŸèƒ½">å››ã€ä¸°å¯ŒåŠŸèƒ½<a class="hash-link" href="#å››ä¸°å¯ŒåŠŸèƒ½" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-è‡ªåŠ¨éƒ¨ç½²">1. è‡ªåŠ¨éƒ¨ç½²<a class="hash-link" href="#1-è‡ªåŠ¨éƒ¨ç½²" title="Direct link to heading">â€‹</a></h3><p>é€šè¿‡å…¬å¸å†…éƒ¨ <a href="http://talos.jd.com/main/deploy" target="_blank" rel="noopener noreferrer">talos</a> ç³»ç»Ÿå†…æ–°å»ºé¡¹ç›®ï¼Œå¹¶åœ¨ coding é…ç½® webhookï¼Œå®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚</p><blockquote><p>ä¸­é—´é‡åˆ°äº† talos ä¸Šç¼–è¯‘æ—¶ï¼Œnode ç‰ˆæœ¬ä½äº Docusaurus è¦æ±‚çš„ v14 é—®é¢˜ï¼Œæ•…åªèƒ½å°†ç¼–è¯‘æµç¨‹æ”¾åœ¨æœ¬åœ°è¿›è¡Œã€‚</p></blockquote><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4222051881d64b31a975a62a9a97e79e~tplv-k3u1fbpfcp-zoom-1.image" alt="s11441601222022"></p><blockquote><p>å¤–ç½‘å¯é€šè¿‡ Github Pagesã€Gitee Pages å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-è‡ªåŠ¨æ›´æ–°-changelog">2. è‡ªåŠ¨æ›´æ–° changelog<a class="hash-link" href="#2-è‡ªåŠ¨æ›´æ–°-changelog" title="Direct link to heading">â€‹</a></h3><p><code>lerna version</code> æä¾›è‡ªåŠ¨æ›´æ–° changelog åŠŸèƒ½ï¼Œæœ¬æ–‡æ¡£ç³»ç»Ÿä¹Ÿæ˜¯ä¸º lerna æ­å»ºçš„é¡¹ç›®æœåŠ¡ã€‚</p><p>è§„èŒƒäº†å¦‚ä¸‹å‘å¸ƒ lerna ç‰ˆæœ¬æµç¨‹ï¼Œå¯å®ç°æ›´æ–°ç‰ˆæœ¬æ—¶è‡ªåŠ¨æ›´æ–°æ–‡æ¡£ç³»ç»Ÿå†…çš„ changelog é¡µé¢ï¼š</p><ul><li><p><code>lerna version --conventional-commits</code> ç¡®å®šç‰ˆæœ¬å·å¹¶è‡ªåŠ¨ç”Ÿæˆ changelogï¼›</p></li><li><p><code>npm run changelog</code> å°†è‡ªåŠ¨ç”Ÿæˆçš„ changelog éƒ¨ç½²è‡³æ–‡æ¡£ç³»ç»Ÿï¼ˆå†™ä¸€ä¸ªè„šæœ¬å¤åˆ¶æ–‡ä»¶è‡³æŒ‡å®šä½ç½®å³å¯ï¼‰ï¼›</p></li><li><p><code>lerna publish from-git</code> å‘å¸ƒç‰ˆæœ¬ã€‚</p></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äº”æ€»ç»“">äº”ã€æ€»ç»“<a class="hash-link" href="#äº”æ€»ç»“" title="Direct link to heading">â€‹</a></h2><p>æœ¬æ–‡è®²è¿°äº†å¿«é€Ÿæ­å»ºæ–‡æ¡£ç³»ç»Ÿçš„å®Œæ•´è¿‡ç¨‹ï¼Œæ€»ç»“ä¸ºä»¥ä¸‹ 3 ç‚¹ï¼š</p><ul><li>æŠ€æœ¯é€‰å‹ï¼Œæ ¹æ®éœ€æ±‚åœºæ™¯é€‰æ‹©åˆé€‚çš„æ‰‹æ®µå®ç°åŠŸèƒ½ï¼›</li><li>é€šè¿‡å®˜æ–¹æ–‡æ¡£å¿«é€Ÿæ­å»ºç½‘ç«™ï¼›</li><li>æ ¹æ®éœ€æ±‚ä¸°å¯Œæ›´å¤šåŠŸèƒ½ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å¾€æœŸç²¾å½©">å¾€æœŸç²¾å½©<a class="hash-link" href="#å¾€æœŸç²¾å½©" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://juejin.cn/post/6969538044890185758" target="_blank" rel="noopener noreferrer">å®è·µæŒ‡å—-ç½‘é¡µç”Ÿæˆ PDF</a></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://juejin.cn/post/7001776879531196424#heading-6" target="_blank" rel="noopener noreferrer">[è¾¹å†™è¾¹å­¦ç³»åˆ—] â€” è¶…çº§å¥½ç”¨çš„æ–‡æ¡£ç«™å»ºç«™æ¡†æ¶ Docusaurus</a></li><li><a href="https://blog.hming.org/2019/05/15/wen-dang-wang-zhan-sheng-cheng-gong-ju-xuan-xing/" target="_blank" rel="noopener noreferrer">æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…·é€‰å‹</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/hola">hola</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/docusaurus">docusaurus</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2021/12/20/how-to-join-Taro">å¦‚ä½•å‚ä¸å¤§å‹å¼€æºé¡¹ç›®-Taro å…±å»º</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-12-20T19:11:14.000Z" itemprop="datePublished">December 20, 2021</time> Â· <!-- -->6 min read</div></header><div class="markdown" itemprop="articleBody"><p><img src="https://img12.360buyimg.com/ling/jfs/t1/96463/39/20942/268881/61ee05a4Eadf9afcb/cbcda37e2be5aae0.jpg"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸€èƒŒæ™¯">ä¸€ã€èƒŒæ™¯<a class="hash-link" href="#ä¸€èƒŒæ™¯" title="Direct link to heading">â€‹</a></h2><p>åœ¨å¼€å‘çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬éƒ½å¼•ç”¨è¿‡å¤§é‡çš„ç¤¾åŒºä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œä½†æ€ä¹ˆæ‰èƒ½æ›´å¥½çš„äº†è§£è¿™äº›å¼€æºé¡¹ç›®å‘¢ï¼Œç­”æ¡ˆæ˜¯ <strong>Join it</strong>ã€‚</p><p>å‚ä¸å¼€æºé¡¹ç›®ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ‹“å®½å¯¹ç ”å‘é¡¹ç›®çš„è®¤è¯†ï¼Œæ›´å¥½çš„ç†è§£å¼€æºé¡¹ç›®çš„åŸç†ï¼Œä»¥åŠæé«˜ä¸ªäººå½±å“åŠ›ã€ç«äº‰åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="äºŒé€‰æ‹©é¡¹ç›®">äºŒã€é€‰æ‹©é¡¹ç›®<a class="hash-link" href="#äºŒé€‰æ‹©é¡¹ç›®" title="Direct link to heading">â€‹</a></h2><p>äººå¯¹äºä¸ç†Ÿæ‚‰çš„ä¸œè¥¿æ€»æ˜¯è§‰å¾—é«˜æ·±è«æµ‹çš„ï¼Œæ²¡æœ‰å‚ä¸å¼€æºé¡¹ç›®çš„ç»éªŒçš„æ—¶å€™ï¼Œä¼šå¯¹å‚ä¸å¼€æºé¡¹ç›®ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ã€‚</p><p>å…¶å®ä¸ç„¶ï¼Œåœ¨æˆ‘ä»¬å¼€å‘æ—¥å¸¸éœ€æ±‚æ—¶å°±å¯ä»¥å‚ä¸åˆ°å¼€æºé¡¹ç›®ä¸­æ¥ï¼Œå¼€å‘æ—¶ç”¨åˆ°çš„æŠ€æœ¯æ ˆï¼Œå°±æ˜¯æˆ‘ä»¬æœ€å€¼å¾—å…¥æ‰‹çš„å¼€æºé¡¹ç›®äº†ã€‚</p><p>åƒæˆ‘è‡ªå·±æ—¥å¸¸æœ‰å¼€å‘å¾®ä¿¡å°ç¨‹åºã€äº¬ä¸œå°ç¨‹åºç­‰è·¨å¹³å°çš„éœ€æ±‚ï¼Œè¿™ç±»å‹éœ€æ±‚ä¸»è¦æŠ€æœ¯æ ˆæ˜¯ <a href="https://github.com/NervJS/taro" target="_blank" rel="noopener noreferrer">Taro</a>ï¼Œ<a href="https://github.com/NervJS/taro" target="_blank" rel="noopener noreferrer">Taro</a> æœ¬èº«å°±æ˜¯ github star è¿‘ 30 k çš„ä¼˜ç§€å¼€æºé¡¹ç›®äº†ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ä» Taro ç€æ‰‹ï¼Œå‚ä¸åˆ°å¼€æºé¡¹ç›®çš„å»ºè®¾å·¥ä½œä¸­ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a28ef429b4047ea838208d14143f1f5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸‰å¿«é€Ÿå¼€å§‹">ä¸‰ã€å¿«é€Ÿå¼€å§‹<a class="hash-link" href="#ä¸‰å¿«é€Ÿå¼€å§‹" title="Direct link to heading">â€‹</a></h2><p>é¦–å…ˆè¦äº†è§£ã€éµå®ˆå¼€æºé¡¹ç›®çš„è´¡çŒ®è§„èŒƒï¼Œä¸€èˆ¬å¯ä»¥åœ¨å®˜ç½‘æ‰¾åˆ°è´¡çŒ®è§„èŒƒæ–‡æ¡£ï¼Œå¦‚ <a href="https://taro-docs.jd.com/taro/docs/CONTRIBUTING" target="_blank" rel="noopener noreferrer">Taro è´¡çŒ®æŒ‡å—</a>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-ç¡®å®šè´¡çŒ®å½¢å¼">1. ç¡®å®šè´¡çŒ®å½¢å¼<a class="hash-link" href="#1-ç¡®å®šè´¡çŒ®å½¢å¼" title="Direct link to heading">â€‹</a></h3><p>è´¡çŒ®å½¢å¼å¤šç§å¤šæ ·ï¼Œä¸‹é¢æˆ‘ä»¥ <strong>â€œæäº¤ä»£ç â€</strong> ç±»å‹å¿«é€Ÿå¼€å§‹è´¡çŒ®æµç¨‹ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b01d363357f24181835ac08d43196231~tplv-k3u1fbpfcp-zoom-1.image" alt="s17110101222022"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-æ‰¾åˆ°æ„Ÿå…´è¶£çš„-issue">2. æ‰¾åˆ°æ„Ÿå…´è¶£çš„ issue<a class="hash-link" href="#2-æ‰¾åˆ°æ„Ÿå…´è¶£çš„-issue" title="Direct link to heading">â€‹</a></h3><blockquote><p>Taro å®˜ç½‘ï¼šissue ä¸­ä¼šåˆ—å‡ºæ‰€æœ‰è¢«æ ‡è®°ä¸º Help Wanted çš„ Issuesï¼Œå¹¶ä¸”ä¼šè¢«åˆ†ä¸º Easyã€ Mediumã€ Hard ä¸‰ç§éš¾æ˜“ç¨‹åº¦ã€‚</p></blockquote><p>é€šè¿‡ issue æ ‡ç­¾ç­›é€‰ï¼Œé€‰æ‹©è‡ªå·±æ„Ÿå…´è¶£çš„ issueï¼Œå¯ä»¥å…ˆä» <strong>&quot;Easy&quot;</strong> çš„å¼€å§‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70b054166ff542e7be25584fde5f6de8~tplv-k3u1fbpfcp-zoom-1.image" alt="s17454801222022"></p><p>åœ¨ issue ä¸­ Assignees è‡³è‡ªå·±ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f1b088680d34783ac2712106b77cf4e~tplv-k3u1fbpfcp-zoom-1.image" alt="s17463701222022"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-fork--clone">3. fork &amp; clone<a class="hash-link" href="#3-fork--clone" title="Direct link to heading">â€‹</a></h3><p>fork Taro æºç è‡³è‡ªå·±ä»“åº“ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d23dd5050964d1ea3aa0b2f75c1d0c9~tplv-k3u1fbpfcp-zoom-1.image" alt="s17280901222022"></p><p>clone ä¸ªäººä»“åº“çš„ Taro æºç è‡³æœ¬åœ°ï¼š</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/jiaozitang/taro</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-æœ¬åœ°å¼€å‘ç¯å¢ƒ">4. æœ¬åœ°å¼€å‘ç¯å¢ƒ<a class="hash-link" href="#4-æœ¬åœ°å¼€å‘ç¯å¢ƒ" title="Direct link to heading">â€‹</a></h3><p>åœ¨ Taro æºç é¡¹ç›®ä¸­å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘ï¼š</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># å®‰è£…ä¾èµ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ yarn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç¼–è¯‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ yarn build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æŸ¥çœ‹è¯¥ issue æ¶‰åŠå“ªäº› packageï¼Œä¸ºè¿™äº› package è®¾ç½® yarn linkï¼Œå¹¶åœ¨æœ¬åœ°ç¼–è¯‘ï¼Œä½¿å¾—è°ƒè¯•é¡¹ç›®èƒ½å¤Ÿ link åˆ°å¼€å‘ä¸­çš„æºç ï¼š</p><blockquote><p>Taro package è¯´æ˜è§æ–‡æ¡£ï¼š<a href="https://taro-docs.jd.com/taro/docs/codebase-overview" target="_blank" rel="noopener noreferrer">Taro ä»“åº“æ¦‚è§ˆ</a></p></blockquote><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># yarn link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd packages/taro-components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ yarn link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æœ¬åœ°ç¼–è¯‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ–°å»º Taro é¡¹ç›®ç”¨äºè°ƒè¯• Taro æºç ï¼š</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># ä½¿ç”¨ npm å®‰è£… CLI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npm install -g @tarojs/cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆå§‹åŒ–é¡¹ç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ taro init myApp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># yarn link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ yarn link &quot;@tarojs/components&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-å¼€å§‹å¼€å‘">5. å¼€å§‹å¼€å‘<a class="hash-link" href="#5-å¼€å§‹å¼€å‘" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="51-åŠŸèƒ½å¼€å‘">5.1 åŠŸèƒ½å¼€å‘<a class="hash-link" href="#51-åŠŸèƒ½å¼€å‘" title="Direct link to heading">â€‹</a></h4><p>é€šè¿‡ä»¥ä¸‹æ­¥éª¤è§£å†³ä¸Šè¿° <strong><a href="https://github.com/NervJS/taro/issues/8003" target="_blank" rel="noopener noreferrer">â€œtextarea ç»„ä»¶ onLineChange æ—¶é—´è°ƒç”¨æ— æ•ˆâ€</a></strong> issueï¼š</p><blockquote><p>æºç è·¯å¾„ï¼špackages/taro-components/src/components/textarea/textarea.tsx</p></blockquote><p>onLineChange äº‹ä»¶ï¼š</p><ul><li>æ–°å¢ onLineChange äº‹ä»¶</li><li>ç›‘å¬è¾“å…¥äº‹ä»¶ï¼Œè¾“å…¥æ—¶é€šè¿‡è¡Œé«˜è®¡ç®—è¡Œæ•°</li><li>è¡Œæ•°æ”¹å˜æ—¶è§¦å‘ onLineChange</li></ul><p>auto-height å±æ€§ï¼š</p><ul><li>æ–°å¢ auto-height å±æ€§</li><li>æ–°å¢ auto-height æ ·å¼</li></ul><p>å…·ä½“ä»£ç è§ï¼š<a href="https://github.com/NervJS/taro/pull/10681/files" target="_blank" rel="noopener noreferrer">https://github.com/NervJS/taro/pull/10681/files</a></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="52-æ›´æ–°æµ‹è¯•ç”¨ä¾‹">5.2 æ›´æ–°æµ‹è¯•ç”¨ä¾‹<a class="hash-link" href="#52-æ›´æ–°æµ‹è¯•ç”¨ä¾‹" title="Direct link to heading">â€‹</a></h4><p>åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­æ·»åŠ å¯¹ onLineChange äº‹ä»¶ã€aotu-height å±æ€§çš„æµ‹è¯•ã€‚</p><blockquote><p>æºç è·¯å¾„ï¼špackages/taro-components/<!-- -->_<!-- -->_<!-- -->tests<!-- -->_<!-- -->_<!-- -->/textarea.spec.js</p></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="53-æ›´æ–°æ–‡æ¡£">5.3 æ›´æ–°æ–‡æ¡£<a class="hash-link" href="#53-æ›´æ–°æ–‡æ¡£" title="Direct link to heading">â€‹</a></h4><p>åœ¨ README ä¸­æ›´æ–°å¯¹ onLineChangeã€auto-height çš„æè¿°ã€‚</p><blockquote><p>æºç åœ°å€ï¼špackages/taro-components/src/components/textarea/index.md</p></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="54-è‡ªæµ‹">5.4 è‡ªæµ‹<a class="hash-link" href="#54-è‡ªæµ‹" title="Direct link to heading">â€‹</a></h4><p>åœ¨æœ¬åœ°æµ‹è¯•é¡¹ç›® myApp ä¸­ï¼Œè‡ªæµ‹ onLineChange äº‹ä»¶ã€auto-height å±æ€§åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œè‡ªæµ‹é€šè¿‡åï¼Œåœ¨ Taro æºç é¡¹ç›®ä¸­è·‘è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># è‡ªåŠ¨åŒ–æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="6-æäº¤-pull-request">6. æäº¤ pull request<a class="hash-link" href="#6-æäº¤-pull-request" title="Direct link to heading">â€‹</a></h3><p>æµ‹è¯•é€šè¿‡åï¼Œåœ¨ github ä¸­æäº¤ pull requrstã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/711361ce7a3b4e8bb21920c717693e6e~tplv-k3u1fbpfcp-zoom-1.image" alt="s18260601222022"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="7-code-review-æµç¨‹">7. code review æµç¨‹<a class="hash-link" href="#7-code-review-æµç¨‹" title="Direct link to heading">â€‹</a></h3><p>æäº¤ pull request åç­‰å¾…ç¤¾åŒº code reviewï¼Œå¹¶åŠæ—¶è·Ÿè¿› code review åé¦ˆè¿›è¡Œä¿®æ”¹ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ddab0a662824ad78e63b9ee2232d7c3~tplv-k3u1fbpfcp-zoom-1.image" alt="s09142901242022"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å››æ€»ç»“">å››ã€æ€»ç»“<a class="hash-link" href="#å››æ€»ç»“" title="Direct link to heading">â€‹</a></h2><p>æœ¬æ–‡è®²è¿°äº†å‚ä¸å¤§å‹å¼€æºé¡¹ç›®-Taro çš„æµç¨‹ï¼Œå…¶ä¸­ä»¥ä¸º Taro è§£å†³ issue çš„è§†è§’ï¼Œä»‹ç»äº†ä»è®¤é¢† issueã€è§£å†³ issueã€è´¡çŒ®ä»£ç çš„å®Œæ•´è¿‡ç¨‹ã€‚</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°å¦‚ä½•å‚ä¸å¼€æºé¡¹ç›®å¹¶å¸®åŠ©å¼€æºé¡¹ç›®è§£å†³é—®é¢˜ï¼Œåœ¨å¼€å‘å·¥ä½œä¸­é‡åˆ°å¼€æºé¡¹ç›®çš„é—®é¢˜æ—¶ï¼Œå°±å¯ä»¥æ„‰å¿«çš„å‚ä¸è¿›æ¥äº†ï¼Œä¸ç”¨å› ä¸ºä¸€ä¸ªå°é—®é¢˜è€½æé¡¹ç›®è¿›åº¦ã€‚</p><p>æ˜Ÿæ˜Ÿä¹‹ç«ï¼Œå¯ä»¥ç‡åŸï¼Œåœ¨è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…çš„å‚ä¸ä¸‹ï¼Œå¼€æºç¤¾åŒºçš„å‘å±•æœªæ¥å¯æœŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://juejin.cn/post/6844903918749614087" target="_blank" rel="noopener noreferrer">å¦‚ä½•å‚ä¸ä¸€ä¸ªé¡¶çº§å¼€æºé¡¹ç›®</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/2021/07/22/simple-react">æ‰‹å†™ç³»åˆ—-å®ç°ä¸€ä¸ªé“‚é‡‘æ®µä½çš„ React</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-07-22T19:11:14.000Z" itemprop="datePublished">July 22, 2021</time> Â· <!-- -->30 min read</div></header><div class="markdown" itemprop="articleBody"><p><img src="https://img12.360buyimg.com/ling/jfs/t1/190951/39/10504/64205/60d82ae2E380c664f/cbb7c4b34464cce7.png"></p><blockquote><p>ä¸ºä»€ä¹ˆæ˜¯é“‚é‡‘å‘¢ï¼Œå› ä¸ºå’Œç‹è€…è¿˜æœ‰å¾ˆè¿œçš„è·ç¦»ã€‚æœ¬æ–‡ä»…å®ç°ç®€å•ç‰ˆæœ¬çš„ Reactï¼Œå‚è€ƒ React 16.8 çš„åŸºæœ¬åŠŸèƒ½ï¼ŒåŒ…æ‹¬è™šæ‹Ÿ DOMã€Fiberã€Diff ç®—æ³•ã€å‡½æ•°å¼ç»„ä»¶ã€hooks ç­‰ã€‚</p></blockquote><header><h1>ä¸€ã€å‰è¨€</h1></header><p>æœ¬æ–‡åŸºäº <a href="https://pomb.us/build-your-own-react/" target="_blank" rel="noopener noreferrer">https://pomb.us/build-your-own-react/</a> å®ç°ç®€å•ç‰ˆ Reactã€‚</p><p>æœ¬æ–‡å­¦ä¹ æ€è·¯æ¥è‡ª <a href="https://www.bilibili.com/video/BV1Ki4y1u7Vr?t=78z" target="_blank" rel="noopener noreferrer">å¡é¢‚-bç«™-Reactæºç ï¼Œä½ åœ¨ç¬¬å‡ å±‚</a>ã€‚</p><p>æ¨¡æ‹Ÿçš„ç‰ˆæœ¬ä¸º React 16.8ã€‚</p><p>å°†å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li><strong>createElementï¼ˆè™šæ‹Ÿ DOMï¼‰</strong>ï¼›</li><li><strong>render</strong>ï¼›</li><li><strong>å¯ä¸­æ–­æ¸²æŸ“</strong>ï¼›</li><li><strong>Fibers</strong>ï¼›</li><li><strong>Render and Commit Phases</strong> ï¼›</li><li><strong>åè°ƒï¼ˆDiff ç®—æ³•ï¼‰</strong>ï¼›</li><li><strong>å‡½æ•°ç»„ä»¶</strong>ï¼›</li><li><strong>hooks</strong>ï¼›</li></ol><p>ä¸‹é¢ä¸Šæ­£é¤ï¼Œè¯·ç»§ç»­é˜…è¯»ã€‚</p><header><h1>äºŒã€å‡†å¤‡</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="1-react-demo">1. React Demo<a class="hash-link" href="#1-react-demo" title="Direct link to heading">â€‹</a></h2><p>å…ˆæ¥çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ React Demoï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div title</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">hello</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;container&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo.html" target="_blank" rel="noopener noreferrer">reactDemo</a></p></blockquote><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ reactDemo.htmlï¼Œå±•ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e67cf968275e441db891b5530da0171e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æˆ‘ä»¬éœ€è¦å®ç°è‡ªå·±çš„ Reactï¼Œé‚£ä¹ˆå°±éœ€è¦çŸ¥é“ä¸Šé¢çš„ä»£ç åˆ°åº•åšäº†ä»€ä¹ˆã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="11-element">1.1 element<a class="hash-link" href="#11-element" title="Direct link to heading">â€‹</a></h3><p><code>const element = &lt;div&gt;123&lt;/div&gt;</code> å®é™…ä¸Šæ˜¯ JSX è¯­æ³•ã€‚</p><p><a href="https://zh-hans.reactjs.org/docs/glossary.html#jsx" target="_blank" rel="noopener noreferrer">React å®˜ç½‘</a> å¯¹ JSX çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote><p>JSX æ˜¯ä¸€ä¸ª JavaScript è¯­æ³•æ‰©å±•ã€‚å®ƒç±»ä¼¼äºæ¨¡æ¿è¯­è¨€ï¼Œä½†å®ƒå…·æœ‰ JavaScript çš„å…¨éƒ¨èƒ½åŠ›ã€‚JSX æœ€ç»ˆä¼šè¢« babel ç¼–è¯‘ä¸º React.createElement() å‡½æ•°è°ƒç”¨ã€‚</p></blockquote><p>é€šè¿‡ <a href="https://www.babeljs.cn/repl" target="_blank" rel="noopener noreferrer">babel åœ¨çº¿ç¼–è¯‘</a> <code>const element = &lt;div&gt;123&lt;/div&gt;</code> ã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/006372da0fb7468e9155bc8d69448b48~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>å¯çŸ¥ <code>const element = &lt;div&gt;123&lt;/div&gt;</code> ç»è¿‡ç¼–è¯‘åçš„å®é™…ä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;div&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å†æ¥çœ‹çœ‹ä¸Šæ–‡çš„ React.createElement å®é™…ç”Ÿæˆäº†ä¸€ä¸ªæ€ä¹ˆæ ·çš„å¯¹è±¡ã€‚</p><p>åœ¨ demo ä¸­æ‰“å°è¯•è¯•ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div title</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">hello</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;container&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°è¾“å‡ºçš„ element å¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b0e14c7e8734456891b2264cd160476~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>ç®€åŒ–ä¸€ä¸‹ elementï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;div&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œ<code>React.createElement</code> å®é™…ä¸Šæ˜¯ç”Ÿæˆäº†ä¸€ä¸ª element å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‹¥æœ‰ä»¥ä¸‹å±æ€§ï¼š</p><ul><li>type: æ ‡ç­¾å</li><li>props<ul><li>title: æ ‡ç­¾å±æ€§</li><li>children: å­èŠ‚ç‚¹</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="12-render">1.2 render<a class="hash-link" href="#12-render" title="Direct link to heading">â€‹</a></h3><p><code>ReactDOM.render()</code> å°† element æ·»åŠ åˆ° id ä¸º container çš„ DOM èŠ‚ç‚¹ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬å°†ç®€å•æ‰‹å†™ä¸€ä¸ªæ–¹æ³•ä»£æ›¿ <code>ReactDOM.render()</code>ã€‚</p><ol><li>åˆ›å»ºæ ‡ç­¾åä¸º element.type çš„èŠ‚ç‚¹ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>è®¾ç½® node èŠ‚ç‚¹çš„ title ä¸º element.props.titleï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;title&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>åˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡æœ¬èŠ‚ç‚¹ textï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> text </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createTextNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="4"><li>è®¾ç½®æ–‡æœ¬èŠ‚ç‚¹çš„ nodeValue ä¸º element.props.childrenï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;nodeValue&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="5"><li>å°†æ–‡æœ¬èŠ‚ç‚¹ text æ·»åŠ è¿› node èŠ‚ç‚¹ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="6"><li>å°† node èŠ‚ç‚¹æ·»åŠ è¿› container èŠ‚ç‚¹</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo2.html" target="_blank" rel="noopener noreferrer">reactDemo2</a></p></blockquote><p>è¿è¡Œæºç ï¼Œç»“æœå¦‚ä¸‹ï¼Œå’Œå¼•å…¥ React çš„ç»“æœä¸€è‡´ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8033485bbe0a46e6b8f32c5f69315429~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><header><h1>ä¸‰ã€å¼€å§‹</h1></header><p>ä¸Šæ–‡é€šè¿‡æ¨¡æ‹Ÿ Reactï¼Œç®€å•ä»£æ›¿äº† React.createElementã€ReactDOM.render æ–¹æ³•ï¼Œæ¥ä¸‹æ¥å°†çœŸæ­£å¼€å§‹å®ç° React çš„å„ä¸ªåŠŸèƒ½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="1-createelementè™šæ‹Ÿ-dom">1. createElementï¼ˆè™šæ‹Ÿ DOMï¼‰<a class="hash-link" href="#1-createelementè™šæ‹Ÿ-dom" title="Direct link to heading">â€‹</a></h2><p>ä¸Šé¢æœ‰äº†è§£åˆ° createElement çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ª element å¯¹è±¡ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// è™šæ‹Ÿ DOM ç»“æ„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;div&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ ‡ç­¾å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// èŠ‚ç‚¹å±æ€§ï¼ŒåŒ…å« children</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// title å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å­èŠ‚ç‚¹ï¼Œæ³¨ï¼šå®é™…ä¸Šè¿™é‡Œåº”è¯¥æ˜¯æ•°ç»„ç»“æ„ï¼Œå¸®åŠ©æˆ‘ä»¬å­˜å‚¨æ›´å¤šå­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ ¹æ® element çš„ç»“æ„ï¼Œè®¾è®¡äº† createElement å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * åˆ›å»ºè™šæ‹Ÿ DOM ç»“æ„</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {type} æ ‡ç­¾å</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {props} å±æ€§å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {children} å­èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return {element} è™šæ‹Ÿ DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createElement</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">type</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> props</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter operator" style="color:#393A34">...</span><span class="token parameter">children</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> children</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">child</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> child </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;object&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> child</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createTextElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿™é‡Œæœ‰è€ƒè™‘åˆ°ï¼Œå½“ children æ˜¯éå¯¹è±¡æ—¶ï¼Œåº”è¯¥åˆ›å»ºä¸€ä¸ª textElement å…ƒç´ ï¼Œ ä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {text} æ–‡æœ¬å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return {element} è™šæ‹Ÿ DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createTextElement</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">text</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;TEXT_ELEMENT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            nodeValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> text</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ¥ä¸‹æ¥è¯•ä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> myReact </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createElement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;div&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo3.html" target="_blank" rel="noopener noreferrer">reactDemo3</a></p></blockquote><p>å¾—åˆ°çš„ element å¯¹è±¡å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;div&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;props&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;props&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;TEXT_ELEMENT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token string" style="color:#e3116c">&quot;props&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token string" style="color:#e3116c">&quot;nodeValue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;props&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>JSX</strong></p><p>å®é™…ä¸Šæˆ‘ä»¬åœ¨ä½¿ç”¨ react å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸ä¼šè¿™æ ·åˆ›å»ºç»„ä»¶ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;div&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è€Œæ˜¯é€šè¿‡ JSX è¯­æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">bar</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åœ¨ myReact ä¸­ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ æ³¨é‡Šçš„å½¢å¼ï¼Œå‘Šè¯‰ babel è½¬è¯‘æˆ‘ä»¬æŒ‡å®šçš„å‡½æ•°ï¼Œæ¥ä½¿ç”¨ JSX è¯­æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** @jsx myReact.createElement */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">bar</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo4.html" target="_blank" rel="noopener noreferrer">reactDemo4</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="2-render">2. render<a class="hash-link" href="#2-render" title="Direct link to heading">â€‹</a></h2><p>render å‡½æ•°å¸®åŠ©æˆ‘ä»¬å°† element æ·»åŠ è‡³çœŸå®èŠ‚ç‚¹ä¸­ã€‚</p><p>å°†åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤å®ç°ï¼š</p><ol><li>åˆ›å»º element.type ç±»å‹çš„ dom èŠ‚ç‚¹ï¼Œå¹¶æ·»åŠ è‡³å®¹å™¨ä¸­ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * å°†è™šæ‹Ÿ DOM æ·»åŠ è‡³çœŸå® DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {element} è™šæ‹Ÿ DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {container} çœŸå® DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>å°† element.children éƒ½æ·»åŠ è‡³ dom èŠ‚ç‚¹ä¸­ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">child</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>å¯¹æ–‡æœ¬èŠ‚ç‚¹è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;TEXT_ELEMENT&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createTextNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="4"><li>å°† element çš„ props å±æ€§æ·»åŠ è‡³ domï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">isProperty</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isProperty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dom</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šæˆ‘ä»¬å®ç°äº†å°† JSX æ¸²æŸ“åˆ°çœŸå® DOM çš„åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥è¯•ä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> myReact </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createElement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** @jsx myReact.createElement */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">bar</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;container&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo5.html" target="_blank" rel="noopener noreferrer">reactDemo5</a></p></blockquote><p>ç»“æœå¦‚å›¾ï¼ŒæˆåŠŸè¾“å‡ºï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fe4fe623e02e41d2bd81957c0019f12b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3-å¯ä¸­æ–­æ¸²æŸ“requestidlecallback">3. å¯ä¸­æ–­æ¸²æŸ“ï¼ˆrequestIdleCallbackï¼‰<a class="hash-link" href="#3-å¯ä¸­æ–­æ¸²æŸ“requestidlecallback" title="Direct link to heading">â€‹</a></h2><p>å†æ¥çœ‹çœ‹ä¸Šé¢å†™çš„ render æ–¹æ³•ä¸­å…³äºå­èŠ‚ç‚¹çš„å¤„ç†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * å°†è™šæ‹Ÿ DOM æ·»åŠ è‡³çœŸå® DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {element} è™šæ‹Ÿ DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {container} çœŸå® DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// éå†æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">child</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿™ä¸ªé€’å½’è°ƒç”¨æ˜¯æœ‰é—®é¢˜çš„ï¼Œä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±ä¼šå°†æ‰€æœ‰èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹å…¨éƒ¨æ¸²æŸ“å®Œæˆè¿™ä¸ªè¿›ç¨‹æ‰ä¼šç»“æŸã€‚</p><p>å½“ dom tree å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé¡µé¢ä¸Šæ˜¯å¡ä½çš„çŠ¶æ€ï¼Œæ— æ³•è¿›è¡Œç”¨æˆ·è¾“å…¥ç­‰äº¤äº’æ“ä½œã€‚</p><p>å¯åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤è§£å†³ä¸Šè¿°é—®é¢˜ï¼š</p><ol><li>å…è®¸ä¸­æ–­æ¸²æŸ“å·¥ä½œï¼Œå¦‚æœæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å·¥ä½œæ’å…¥ï¼Œåˆ™æš‚æ—¶ä¸­æ–­æµè§ˆå™¨æ¸²æŸ“ï¼Œå¾…å®Œæˆè¯¥å·¥ä½œåï¼Œæ¢å¤æµè§ˆå™¨æ¸²æŸ“ï¼›</li><li>å°†æ¸²æŸ“å·¥ä½œè¿›è¡Œåˆ†è§£ï¼Œåˆ†è§£æˆä¸€ä¸ªä¸ªå°å•å…ƒï¼›</li></ol><p>ä½¿ç”¨ requestIdleCallback æ¥è§£å†³å…è®¸ä¸­æ–­æ¸²æŸ“å·¥ä½œçš„é—®é¢˜ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback" target="_blank" rel="noopener noreferrer">window.requestIdleCallback</a> å°†åœ¨æµè§ˆå™¨çš„ç©ºé—²æ—¶æ®µå†…è°ƒç”¨çš„å‡½æ•°æ’é˜Ÿã€‚è¿™ä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨ä¸»äº‹ä»¶å¾ªç¯ä¸Šæ‰§è¡Œåå°å’Œä½ä¼˜å…ˆçº§å·¥ä½œï¼Œè€Œä¸ä¼šå½±å“å»¶è¿Ÿå…³é”®äº‹ä»¶ï¼Œå¦‚åŠ¨ç”»å’Œè¾“å…¥å“åº”ã€‚</p><blockquote><p>window.requestIdleCallback è¯¦ç»†ä»‹ç»å¯æŸ¥çœ‹æ–‡æ¡£ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a></p></blockquote><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * workLoop å·¥ä½œå¾ªç¯å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {deadline} æˆªæ­¢æ—¶é—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">workLoop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">deadline</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦åº”è¯¥åœæ­¢å·¥ä½œå¾ªç¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> shouldYield </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœå­˜åœ¨ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œä¸”æ²¡æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å…¶ä»–å·¥ä½œæ—¶ï¼Œå¾ªç¯æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextUnitOfWork </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">shouldYield</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nextUnitOfWork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæˆªæ­¢æ—¶é—´å¿«åˆ°äº†ï¼Œåœæ­¢å·¥ä½œå¾ªç¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldYield </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> deadline</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">timeRemaining</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// é€šçŸ¥æµè§ˆå™¨ï¼Œç©ºé—²æ—¶é—´åº”è¯¥æ‰§è¡Œ workLoop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">requestIdleCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workLoop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é€šçŸ¥æµè§ˆå™¨ï¼Œç©ºé—²æ—¶é—´åº”è¯¥æ‰§è¡Œ workLoop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">requestIdleCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workLoop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ‰§è¡Œå•å…ƒäº‹ä»¶ï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ªå•å…ƒäº‹ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">nextUnitOfWork</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>performUnitOfWork æ˜¯ç”¨æ¥æ‰§è¡Œå•å…ƒäº‹ä»¶ï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ªå•å…ƒäº‹ä»¶çš„ï¼Œå…·ä½“å®ç°å°†åœ¨ä¸‹æ–‡ä»‹ç»ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="4-fiber">4. Fiber<a class="hash-link" href="#4-fiber" title="Direct link to heading">â€‹</a></h2><p>ä¸Šæ–‡ä»‹ç»äº†é€šè¿‡ requestIdleCallback è®©æµè§ˆå™¨åœ¨ç©ºé—²æ—¶é—´æ¸²æŸ“å·¥ä½œå•å…ƒï¼Œé¿å…æ¸²æŸ“è¿‡ä¹…å¯¼è‡´é¡µé¢å¡é¡¿çš„é—®é¢˜ã€‚</p><blockquote><p>æ³¨ï¼šå®é™…ä¸Š requestIdleCallback åŠŸèƒ½å¹¶ä¸ç¨³å®šï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæœ¬ä¾‹ä»…ç”¨äºæ¨¡æ‹Ÿ React çš„æ€è·¯ï¼ŒReact æœ¬èº«å¹¶ä¸æ˜¯é€šè¿‡ requestIdleCallback æ¥å®ç°è®©æµè§ˆå™¨åœ¨ç©ºé—²æ—¶é—´æ¸²æŸ“å·¥ä½œå•å…ƒçš„ã€‚</p></blockquote><p>å¦ä¸€æ–¹é¢ï¼Œä¸ºäº†è®©æ¸²æŸ“å·¥ä½œå¯ä»¥åˆ†ç¦»æˆä¸€ä¸ªä¸ªå°å•å…ƒï¼ŒReact è®¾è®¡äº† fiberã€‚</p><p>æ¯ä¸€ä¸ª element éƒ½æ˜¯ä¸€ä¸ª fiber ç»“æ„ï¼Œæ¯ä¸€ä¸ª fiber éƒ½æ˜¯ä¸€ä¸ªæ¸²æŸ“å·¥ä½œå•å…ƒã€‚</p><p>æ‰€ä»¥ <strong>fiber æ—¢æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå·¥ä½œå•å…ƒ</strong>ã€‚</p><p>ä¸‹æ–‡å°†é€šè¿‡ç®€å•çš„ç¤ºä¾‹å¯¹ fiber è¿›è¡Œä»‹ç»ã€‚</p><p>å‡è®¾éœ€è¦æ¸²æŸ“è¿™æ ·ä¸€ä¸ª element æ ‘ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h2 </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç”Ÿæˆçš„ fiber tree å¦‚å›¾ï¼š</p><p>æ©™è‰²ä»£è¡¨å­èŠ‚ç‚¹ï¼Œé»„è‰²ä»£è¡¨çˆ¶èŠ‚ç‚¹ï¼Œè“è‰²ä»£è¡¨å…„å¼ŸèŠ‚ç‚¹ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a92a6b184ca4456aab76a73cff2ca4a3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æ¯ä¸ª fiber éƒ½æœ‰ä¸€ä¸ªé“¾æ¥æŒ‡å‘å®ƒçš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹å’Œå®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚è¿™ç§æ•°æ®ç»“æ„å¯ä»¥è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚</p><p>ä¸Šå›¾çš„ç®­å¤´ä¹Ÿè¡¨æ˜äº† fiber çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œæ¸²æŸ“è¿‡ç¨‹è¯¦ç»†æè¿°å¦‚ä¸‹ï¼š</p><ol><li>ä» root å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ divï¼›</li><li>æ‰¾åˆ° div çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ h1ï¼›</li><li>æ‰¾åˆ° h1 çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ pï¼›</li><li>æ‰¾ p çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œ<strong>å¦‚æ— å­èŠ‚ç‚¹ï¼Œåˆ™æ‰¾ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</strong>ï¼Œæ‰¾åˆ° p çš„å…„å¼ŸèŠ‚ç‚¹ aï¼›</li><li>æ‰¾ a çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œ<strong>å¦‚æ— å­èŠ‚ç‚¹ï¼Œä¹Ÿæ— å…„å¼ŸèŠ‚ç‚¹ï¼Œåˆ™æ‰¾å®ƒçš„çˆ¶èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</strong>ï¼Œæ‰¾åˆ° a çš„ çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ h2ï¼›</li><li>æ‰¾ h2 çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰¾ä¸åˆ°ï¼Œæ‰¾å…„å¼ŸèŠ‚ç‚¹ï¼Œæ‰¾ä¸åˆ°ï¼Œæ‰¾çˆ¶èŠ‚ç‚¹ div çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œä¹Ÿæ‰¾ä¸åˆ°ï¼Œç»§ç»­æ‰¾ div çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œæ‰¾åˆ° rootï¼›</li><li>ç¬¬ 6 æ­¥å·²ç»æ‰¾åˆ°äº† root èŠ‚ç‚¹ï¼Œæ¸²æŸ“å·²å…¨éƒ¨å®Œæˆã€‚</li></ol><p>ä¸‹é¢å°†æ¸²æŸ“è¿‡ç¨‹ç”¨ä»£ç å®ç°ã€‚</p><ol><li>å°† render ä¸­åˆ›å»º DOM èŠ‚ç‚¹çš„éƒ¨åˆ†æŠ½ç¦»ä¸º creactDOM å‡½æ•°ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * createDom åˆ›å»º DOM èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {fiber} fiber èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return {dom} dom èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createDom</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæ˜¯æ–‡æœ¬ç±»å‹ï¼Œåˆ›å»ºç©ºçš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœä¸æ˜¯æ–‡æœ¬ç±»å‹ï¼ŒæŒ‰ type ç±»å‹åˆ›å»ºèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;TEXT_ELEMENT&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createTextNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// isProperty è¡¨ç¤ºä¸æ˜¯ children çš„å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">isProperty</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// éå† propsï¼Œä¸º dom æ·»åŠ å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isProperty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿”å› dom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> dom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>åœ¨ render ä¸­è®¾ç½®ç¬¬ä¸€ä¸ªå·¥ä½œå•å…ƒä¸º fiber æ ¹èŠ‚ç‚¹ï¼›</li></ol><p>fiber æ ¹èŠ‚ç‚¹ä»…åŒ…å« children å±æ€§ï¼Œå€¼ä¸ºå‚æ•° fiberã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * å°† fiber æ·»åŠ è‡³çœŸå® DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {element} fiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {container} çœŸå® DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>é€šè¿‡ requestIdleCallback åœ¨æµè§ˆå™¨ç©ºé—²æ—¶ï¼Œæ¸²æŸ“ fiberï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * workLoop å·¥ä½œå¾ªç¯å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {deadline} æˆªæ­¢æ—¶é—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">workLoop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">deadline</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦åº”è¯¥åœæ­¢å·¥ä½œå¾ªç¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> shouldYield </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœå­˜åœ¨ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œä¸”æ²¡æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å…¶ä»–å·¥ä½œæ—¶ï¼Œå¾ªç¯æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextUnitOfWork </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">shouldYield</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nextUnitOfWork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæˆªæ­¢æ—¶é—´å¿«åˆ°äº†ï¼Œåœæ­¢å·¥ä½œå¾ªç¯å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldYield </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> deadline</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">timeRemaining</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// é€šçŸ¥æµè§ˆå™¨ï¼Œç©ºé—²æ—¶é—´åº”è¯¥æ‰§è¡Œ workLoop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">requestIdleCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workLoop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é€šçŸ¥æµè§ˆå™¨ï¼Œç©ºé—²æ—¶é—´åº”è¯¥æ‰§è¡Œ workLoop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">requestIdleCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workLoop</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="4"><li>æ¸²æŸ“ fiber çš„å‡½æ•° performUnitOfWorkï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * performUnitOfWork å¤„ç†å·¥ä½œå•å…ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {fiber} fiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return {nextUnitOfWork} ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO æ·»åŠ  dom èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO æ–°å»º filber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO è¿”å›ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼ˆfiberï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>4.1 æ·»åŠ  dom èŠ‚ç‚¹</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœ fiber æ²¡æœ‰ dom èŠ‚ç‚¹ï¼Œä¸ºå®ƒåˆ›å»ºä¸€ä¸ª dom èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createDom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœ fiber æœ‰çˆ¶èŠ‚ç‚¹ï¼Œå°† fiber.dom æ·»åŠ è‡³çˆ¶èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>4.2 æ–°å»º filber</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> elements </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç´¢å¼•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸Šä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> prevSibling </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// éå†å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> elements</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> elements</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»º fiber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å°†ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹è®¾ç½®ä¸º fiber çš„å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newFiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ç¬¬ä¸€ä¸ªä¹‹å¤–çš„å­èŠ‚ç‚¹è®¾ç½®ä¸ºè¯¥èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            prevSibling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sibling</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newFiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prevSibling </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newFiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>4.3 è¿”å›ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼ˆfiberï¼‰</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œè¿”å›å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextFiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›å…„å¼ŸèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sibling</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> nextFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sibling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¦åˆ™ç»§ç»­èµ° while å¾ªç¯ï¼Œç›´åˆ°æ‰¾åˆ° rootã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nextFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä»¥ä¸Šæˆ‘ä»¬å®ç°äº†å°† fiber æ¸²æŸ“åˆ°é¡µé¢çš„åŠŸèƒ½ï¼Œä¸”æ¸²æŸ“è¿‡ç¨‹æ˜¯å¯ä¸­æ–­çš„ã€‚</p><p>ç°åœ¨è¯•ä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h2 </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;container&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo7.html" target="_blank" rel="noopener noreferrer">reactDemo7</a></p></blockquote><p>å¦‚é¢„æœŸè¾“å‡º domï¼Œå¦‚å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18c3cea8e3b042ebbf2f10eaffd9a18b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="5-æ¸²æŸ“æäº¤é˜¶æ®µ">5. æ¸²æŸ“æäº¤é˜¶æ®µ<a class="hash-link" href="#5-æ¸²æŸ“æäº¤é˜¶æ®µ" title="Direct link to heading">â€‹</a></h2><p>ç”±äºæ¸²æŸ“è¿‡ç¨‹è¢«æˆ‘ä»¬åšäº†å¯ä¸­æ–­çš„ï¼Œé‚£ä¹ˆä¸­æ–­çš„æ—¶å€™ï¼Œæˆ‘ä»¬è‚¯å®šä¸å¸Œæœ›æµè§ˆå™¨ç»™ç”¨æˆ·å±•ç¤ºçš„æ˜¯æ¸²æŸ“äº†ä¸€åŠçš„ UIã€‚</p><p>å¯¹æ¸²æŸ“æäº¤é˜¶æ®µä¼˜åŒ–çš„å¤„ç†å¦‚ä¸‹ï¼š</p><ol><li>æŠŠ performUnitOfWork ä¸­å…³äºæŠŠå­èŠ‚ç‚¹æ·»åŠ è‡³çˆ¶èŠ‚ç‚¹çš„é€»è¾‘åˆ é™¤ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æŠŠè¿™æ®µåˆ äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>æ–°å¢ä¸€ä¸ªæ ¹èŠ‚ç‚¹å˜é‡ï¼Œå­˜å‚¨ fiber æ ¹èŠ‚ç‚¹ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ ¹èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> wipRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒæ˜¯æ ¹èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> wipRoot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>å½“æ‰€æœ‰ fiber éƒ½å·¥ä½œå®Œæˆæ—¶ï¼ŒnextUnitOfWork ä¸º undefinedï¼Œè¿™æ—¶å†æ¸²æŸ“çœŸå® DOMï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">workLoop</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">deadline</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">nextUnitOfWork </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> wipRoot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">commitRoot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="4"><li>æ–°å¢ commitRoot å‡½æ•°ï¼Œæ‰§è¡Œæ¸²æŸ“çœŸå® DOM æ“ä½œï¼Œé€’å½’å°† fiber tree æ¸²æŸ“ä¸ºçœŸå® DOMï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// å…¨éƒ¨å·¥ä½œå•å…ƒå®Œæˆåï¼Œå°† fiber tree æ¸²æŸ“ä¸ºçœŸå® DOMï¼›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitRoot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wipRoot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// éœ€è¦è®¾ç½®ä¸º nullï¼Œå¦åˆ™ workLoop åœ¨æµè§ˆå™¨ç©ºé—²æ—¶ä¸æ–­çš„æ‰§è¡Œã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * performUnitOfWork å¤„ç†å·¥ä½œå•å…ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {fiber} fiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> domParent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domParent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ¸²æŸ“å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ¸²æŸ“å…„å¼ŸèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sibling</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo8.html" target="_blank" rel="noopener noreferrer">reactDemo8</a></p></blockquote><p>æºç è¿è¡Œç»“æœå¦‚å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cccbab6b83a24ca3a9c45470ff9b37a0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="6-åè°ƒdiff-ç®—æ³•">6. åè°ƒï¼ˆdiff ç®—æ³•ï¼‰<a class="hash-link" href="#6-åè°ƒdiff-ç®—æ³•" title="Direct link to heading">â€‹</a></h2><p>å½“ element æœ‰æ›´æ–°æ—¶ï¼Œéœ€è¦å°†æ›´æ–°å‰çš„ fiber tree å’Œæ›´æ–°åçš„ fiber tree è¿›è¡Œæ¯”è¾ƒï¼Œå¾—åˆ°æ¯”è¾ƒç»“æœåï¼Œä»…å¯¹æœ‰å˜åŒ–çš„ fiber å¯¹åº”çš„ dom èŠ‚ç‚¹è¿›è¡Œæ›´æ–°ã€‚</p><p>é€šè¿‡åè°ƒï¼Œå‡å°‘å¯¹çœŸå® DOM çš„æ“ä½œæ¬¡æ•°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-currentroot">1. currentRoot<a class="hash-link" href="#1-currentroot" title="Direct link to heading">â€‹</a></h3><p>æ–°å¢ currentRoot å˜é‡ï¼Œä¿å­˜æ ¹èŠ‚ç‚¹æ›´æ–°å‰çš„ fiber treeï¼Œä¸º fiber æ–°å¢ alternate å±æ€§ï¼Œä¿å­˜ fiber æ›´æ–°å‰çš„ fiber treeï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> currentRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alternate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentRoot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitRoot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wipRoot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> wipRoot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-performunitofwork">2. performUnitOfWork<a class="hash-link" href="#2-performunitofwork" title="Direct link to heading">â€‹</a></h3><p>å°† performUnitOfWork ä¸­å…³äºæ–°å»º fiber çš„é€»è¾‘ï¼ŒæŠ½ç¦»åˆ° reconcileChildren å‡½æ•°ï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * åè°ƒå­èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {fiber} fiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {elements} fiber çš„ å­èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reconcileChildren</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> elements</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºç»Ÿè®¡å­èŠ‚ç‚¹çš„ç´¢å¼•å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸Šä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> prevSibling </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// éå†å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> elements</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> elements</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æ–°å»º fiber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// fiberçš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹æ˜¯å®ƒçš„å­èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newFiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// fiber çš„å…¶ä»–å­èŠ‚ç‚¹ï¼Œæ˜¯å®ƒç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            prevSibling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sibling</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newFiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æŠŠæ–°å»ºçš„ newFiber èµ‹å€¼ç»™ prevSiblingï¼Œè¿™æ ·å°±æ–¹ä¾¿ä¸º newFiber æ·»åŠ å…„å¼ŸèŠ‚ç‚¹äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prevSibling </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newFiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ç´¢å¼•å€¼ + 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-reconcilechildren">3. reconcileChildren<a class="hash-link" href="#3-reconcilechildren" title="Direct link to heading">â€‹</a></h3><p>åœ¨ reconcileChildren ä¸­å¯¹æ¯”æ–°æ—§ fiberï¼›</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="31-å½“æ–°æ—§-fiber-ç±»å‹ç›¸åŒæ—¶">3.1 å½“æ–°æ—§ fiber ç±»å‹ç›¸åŒæ—¶<a class="hash-link" href="#31-å½“æ–°æ—§-fiber-ç±»å‹ç›¸åŒæ—¶" title="Direct link to heading">â€‹</a></h4><p>ä¿ç•™ domï¼Œä»…æ›´æ–° propsï¼Œè®¾ç½® effectTag ä¸º UPDATEï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reconcileChildren</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">wipFiber</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> elements</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// oldFiber å¯ä»¥åœ¨ wipFiber.alternate ä¸­æ‰¾åˆ°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> oldFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> wipFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> wipFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> elements</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> oldFiber </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> elements</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> newFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// fiber ç±»å‹æ˜¯å¦ç›¸åŒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sameType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            oldFiber </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            element </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> oldFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœç±»å‹ç›¸åŒï¼Œä»…æ›´æ–° props</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sameType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            newFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> oldFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> oldFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                parent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> wipFiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                alternate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> oldFiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                effectTag</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UPDATE&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="32-å½“æ–°æ—§-fiber-ç±»å‹ä¸åŒä¸”æœ‰æ–°å…ƒç´ æ—¶">3.2 å½“æ–°æ—§ fiber ç±»å‹ä¸åŒï¼Œä¸”æœ‰æ–°å…ƒç´ æ—¶<a class="hash-link" href="#32-å½“æ–°æ—§-fiber-ç±»å‹ä¸åŒä¸”æœ‰æ–°å…ƒç´ æ—¶" title="Direct link to heading">â€‹</a></h4><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ dom èŠ‚ç‚¹ï¼Œè®¾ç½® effectTag ä¸º PLACEMENTï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reconcileChildren</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">wipFiber</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> elements</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">sameType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> wipFiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            alternate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            effectTag</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PLACEMENT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="33-å½“æ–°æ—§-fiber-ç±»å‹ä¸åŒä¸”æœ‰æ—§-fiber-æ—¶">3.3 å½“æ–°æ—§ fiber ç±»å‹ä¸åŒï¼Œä¸”æœ‰æ—§ fiber æ—¶<a class="hash-link" href="#33-å½“æ–°æ—§-fiber-ç±»å‹ä¸åŒä¸”æœ‰æ—§-fiber-æ—¶" title="Direct link to heading">â€‹</a></h4><p>åˆ é™¤æ—§ fiberï¼Œè®¾ç½® effectTag ä¸º DELETIONï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reconcileChildren</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">wipFiber</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> elements</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oldFiber </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">sameType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oldFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">effectTag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DELETION&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deletions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oldFiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="4-deletions">4. deletions<a class="hash-link" href="#4-deletions" title="Direct link to heading">â€‹</a></h3><p>æ–°å»º deletions æ•°ç»„å­˜å‚¨éœ€åˆ é™¤çš„ fiber èŠ‚ç‚¹ï¼Œæ¸²æŸ“ DOM æ—¶ï¼Œéå† deletions åˆ é™¤æ—§ fiberï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> deletions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// render æ—¶ï¼Œåˆå§‹åŒ– deletions æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deletions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ¸²æŸ“ DOM æ—¶ï¼Œéå† deletions åˆ é™¤æ—§ fiber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitRoot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deletions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">commitWork</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="5-commitwork">5. commitWork<a class="hash-link" href="#5-commitwork" title="Direct link to heading">â€‹</a></h3><p>åœ¨ commitWork ä¸­å¯¹ fiber çš„ effectTag è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶åˆ†åˆ«å¤„ç†ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="51-placement">5.1 PLACEMENT<a class="hash-link" href="#51-placement" title="Direct link to heading">â€‹</a></h4><p>å½“ fiber çš„ effectTag ä¸º PLACEMENT æ—¶ï¼Œè¡¨ç¤ºæ˜¯æ–°å¢ fiberï¼Œå°†è¯¥èŠ‚ç‚¹æ–°å¢è‡³çˆ¶èŠ‚ç‚¹ä¸­ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">effectTag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PLACEMENT&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domParent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="52-deletion">5.2 DELETION<a class="hash-link" href="#52-deletion" title="Direct link to heading">â€‹</a></h4><p>å½“ fiber çš„ effectTag ä¸º DELETION æ—¶ï¼Œè¡¨ç¤ºæ˜¯åˆ é™¤ fiberï¼Œå°†çˆ¶èŠ‚ç‚¹çš„è¯¥èŠ‚ç‚¹åˆ é™¤ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">effectTag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DELETION&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domParent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="53-update">5.3 UPDATE<a class="hash-link" href="#53-update" title="Direct link to heading">â€‹</a></h4><p>å½“ fiber çš„ effectTag ä¸º UPDATE æ—¶ï¼Œè¡¨ç¤ºæ˜¯æ›´æ–° fiberï¼Œæ›´æ–° props å±æ€§ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">effectTag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;UPDATE&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">updateDom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>updateDom å‡½æ•°æ ¹æ®ä¸åŒçš„æ›´æ–°ç±»å‹ï¼Œå¯¹ props å±æ€§è¿›è¡Œæ›´æ–°ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">isProperty</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;children&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦æ˜¯æ–°å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">isNew</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">prev</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> prev</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦æ˜¯æ—§å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">isGone</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">prev</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateDom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">dom</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> prevProps</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ é™¤æ—§å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isProperty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isGone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ›´æ–°æ–°å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isProperty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isNew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextProps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦å¤–ï¼Œä¸º updateDom æ·»åŠ äº‹ä»¶å±æ€§çš„æ›´æ–°ã€åˆ é™¤ï¼Œä¾¿äºè¿½è¸ª fiber äº‹ä»¶çš„æ›´æ–°ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateDom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">dom</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> prevProps</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">isEvent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;on&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//åˆ é™¤æ—§çš„æˆ–è€…æœ‰å˜åŒ–çš„äº‹ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">isNew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> eventType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">substring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          dom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            eventType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            prevProps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨å†Œæ–°äº‹ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isNew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> eventType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">substring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            eventType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            nextProps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ï½ï½çœç•¥ï½ï½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ›¿æ¢ creactDOM ä¸­è®¾ç½® props çš„é€»è¾‘ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createDom</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;TEXT_ELEMENT&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createTextNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœ‹è¿™é‡Œé¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">updateDom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dom</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> dom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ–°å»ºä¸€ä¸ªåŒ…å«è¾“å…¥è¡¨å•é¡¹çš„ä¾‹å­ï¼Œå°è¯•æ›´æ–° elementï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** @jsx myReact.createElement */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;container&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">updateValue</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">rerender</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">rerender</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">input onInput</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">updateValue</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> value</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Hello</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rerender</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;World&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo9.html" target="_blank" rel="noopener noreferrer">reactDemo9</a></p></blockquote><p>è¾“å‡ºç»“æœå¦‚å›¾ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e615196850b244c3930771375d93ba3c~tplv-k3u1fbpfcp-watermark.image" alt="12.gif"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="7-å‡½æ•°å¼ç»„ä»¶">7. å‡½æ•°å¼ç»„ä»¶<a class="hash-link" href="#7-å‡½æ•°å¼ç»„ä»¶" title="Direct link to heading">â€‹</a></h2><p>å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„å‡½æ•°å¼ç»„ä»¶ç¤ºä¾‹ï¼š</p><blockquote><p>myReact è¿˜ä¸æ”¯æŒå‡½æ•°å¼ç»„ä»¶ï¼Œä¸‹é¢ä»£ç è¿è¡Œä¼šæŠ¥é”™ï¼Œè¿™é‡Œä»…ç”¨äºæ¯”ç…§å‡½æ•°å¼ç»„ä»¶çš„å¸¸è§„ä½¿ç”¨æ–¹å¼ã€‚</p></blockquote><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** @jsx myReact.createElement */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;container&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">hi</span><span class="token operator" style="color:#393A34">~</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">App</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å‡½æ•°å¼ç»„ä»¶å’Œ html æ ‡ç­¾ç»„ä»¶ç›¸æ¯”ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¸åŒï¼š</p><ul><li>å‡½æ•°ç»„ä»¶çš„ fiber æ²¡æœ‰ dom èŠ‚ç‚¹ï¼›</li><li>å‡½æ•°ç»„ä»¶çš„ children éœ€è¦è¿è¡Œå‡½æ•°åå¾—åˆ°ï¼›</li></ul><p>é€šè¿‡ä¸‹åˆ—æ­¥éª¤å®ç°å‡½æ•°ç»„ä»¶ï¼š</p><ol><li>ä¿®æ”¹ performUnitOfWorkï¼Œæ ¹æ® fiber ç±»å‹ï¼Œæ‰§è¡Œ fiber å·¥ä½œå•å…ƒï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performUnitOfWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦æ˜¯å‡½æ•°ç±»å‹ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isFunctionComponent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">Function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæ˜¯å‡½æ•°ç»„ä»¶ï¼Œæ‰§è¡Œ updateFunctionComponent å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isFunctionComponent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">updateFunctionComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœä¸æ˜¯å‡½æ•°ç»„ä»¶ï¼Œæ‰§è¡Œ updateHostComponent å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">updateHostComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>å®šä¹‰ updateHostComponent å‡½æ•°ï¼Œæ‰§è¡Œéå‡½æ•°ç»„ä»¶ï¼›</li></ol><p>éå‡½æ•°å¼ç»„ä»¶å¯ç›´æ¥å°† fiber.props.children ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateHostComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createDom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">reconcileChildren</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>å®šä¹‰ updateFunctionComponent å‡½æ•°ï¼Œæ‰§è¡Œå‡½æ•°ç»„ä»¶ï¼›</li></ol><p>å‡½æ•°ç»„ä»¶éœ€è¦è¿è¡Œæ¥è·å¾— fiber.childrenã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateFunctionComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// fiber.type å°±æ˜¯å‡½æ•°ç»„ä»¶æœ¬èº«ï¼Œfiber.props å°±æ˜¯å‡½æ•°ç»„ä»¶çš„å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> children </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">reconcileChildren</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> children</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="4"><li>ä¿®æ”¹ commitWork å‡½æ•°ï¼Œå…¼å®¹æ²¡æœ‰ dom èŠ‚ç‚¹çš„ fiberï¼›</li></ol><p>4.1 ä¿®æ”¹ domParent çš„è·å–é€»è¾‘ï¼Œé€šè¿‡ while å¾ªç¯ä¸æ–­å‘ä¸Šå¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æœ‰ dom èŠ‚ç‚¹çš„çˆ¶ fiberï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> domParentFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœ fiber.parent æ²¡æœ‰ dom èŠ‚ç‚¹ï¼Œåˆ™ç»§ç»­æ‰¾ fiber.parent.parent.domï¼Œç›´åˆ°æœ‰ dom èŠ‚ç‚¹ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">domParentFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        domParentFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> domParentFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> domParent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> domParentFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>4.2 ä¿®æ”¹åˆ é™¤èŠ‚ç‚¹çš„é€»è¾‘ï¼Œå½“åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ä¸æ–­å‘ä¸‹å¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æœ‰ dom èŠ‚ç‚¹çš„å­ fiberï¼›</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitWork</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœ fiber çš„æ›´æ–°ç±»å‹æ˜¯åˆ é™¤ï¼Œæ‰§è¡Œ commitDeletion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">effectTag</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DELETION&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">commitDeletion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> domParent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// åˆ é™¤èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">commitDeletion</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> domParent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœè¯¥ fiber æœ‰ dom èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        domParent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœè¯¥ fiber æ²¡æœ‰ dom èŠ‚ç‚¹ï¼Œåˆ™ç»§ç»­æ‰¾å®ƒçš„å­èŠ‚ç‚¹è¿›è¡Œåˆ é™¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">commitDeletion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">child</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> domParent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸‹é¢è¯•ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** @jsx myReact.createElement */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;container&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">hi</span><span class="token operator" style="color:#393A34">~</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">App</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo10.html" target="_blank" rel="noopener noreferrer">reactDemo10</a></p></blockquote><p>è¿è¡Œç»“æœå¦‚å›¾ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a920eb5c41974c15b2db269dc95cb7f9~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="8-hooks">8. hooks<a class="hash-link" href="#8-hooks" title="Direct link to heading">â€‹</a></h2><p>ä¸‹é¢ç»§ç»­ä¸º myReact æ·»åŠ ç®¡ç†çŠ¶æ€çš„åŠŸèƒ½ï¼ŒæœŸæœ›æ˜¯å‡½æ•°ç»„ä»¶æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œä¸”å¯ä»¥è·å–ã€æ›´æ–°çŠ¶æ€ã€‚</p><p>ä¸€ä¸ªæ‹¥æœ‰è®¡æ•°åŠŸèƒ½çš„å‡½æ•°ç»„ä»¶å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1 onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Counter</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å·²çŸ¥éœ€è¦ä¸€ä¸ª useState æ–¹æ³•ç”¨æ¥è·å–ã€æ›´æ–°çŠ¶æ€ã€‚</p><p>è¿™é‡Œå†é‡ç”³ä¸€ä¸‹ï¼Œ<strong>æ¸²æŸ“å‡½æ•°ç»„ä»¶çš„å‰ææ˜¯ï¼Œæ‰§è¡Œè¯¥å‡½æ•°ç»„ä»¶</strong>ï¼Œå› æ­¤ï¼Œä¸Šè¿° Counter æƒ³è¦æ›´æ–°è®¡æ•°ï¼Œå°±ä¼šåœ¨æ¯æ¬¡æ›´æ–°éƒ½æ‰§è¡Œä¸€æ¬¡ Counter å‡½æ•°ã€‚</p><p>é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š</p><ol><li>æ–°å¢å…¨å±€å˜é‡ wipFiberï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// å½“å‰å·¥ä½œå•å…ƒ fiber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> wipFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateFunctionComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fiber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fiber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å½“å‰å·¥ä½œå•å…ƒ fiber çš„ hook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// çœç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>æ–°å¢ useState å‡½æ•°ï¼›</li></ol><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// initial è¡¨ç¤ºåˆå§‹å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œinitial=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">initial</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦æœ‰æ—§é’©å­ï¼Œæ—§é’©å­å­˜å‚¨äº†ä¸Šä¸€æ¬¡æ›´æ–°çš„ hook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wipFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wipFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åˆå§‹åŒ–é’©å­ï¼Œé’©å­çš„çŠ¶æ€æ˜¯æ—§é’©å­çš„çŠ¶æ€æˆ–è€…åˆå§‹çŠ¶æ€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        state</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> oldHook </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> oldHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> initial</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        queue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä»æ—§çš„é’©å­é˜Ÿåˆ—ä¸­è·å–æ‰€æœ‰åŠ¨ä½œï¼Œç„¶åå°†å®ƒä»¬ä¸€ä¸€åº”ç”¨åˆ°æ–°çš„é’©å­çŠ¶æ€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oldHook </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> oldHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">queue</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">action</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®é’©å­çŠ¶æ€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">setState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">action</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å°†åŠ¨ä½œæ·»åŠ è‡³é’©å­é˜Ÿåˆ—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æ›´æ–°æ¸²æŸ“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wipRoot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dom</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentRoot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dom</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentRoot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            alternate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentRoot</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nextUnitOfWork </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> wipRoot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deletions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æŠŠé’©å­æ·»åŠ è‡³å·¥ä½œå•å…ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wipFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿”å›é’©å­çš„çŠ¶æ€å’Œè®¾ç½®é’©å­çš„å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">hook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸‹é¢è¿è¡Œä¸€ä¸‹è®¡æ•°ç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> myReact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1 onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Counter</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>æœ¬ä¾‹å®Œæ•´æºç è§ï¼š<a href="https://github.com/jiaozitang/web-learn-note/blob/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/React/reactDemo11.html" target="_blank" rel="noopener noreferrer">reactDemo11</a></p></blockquote><p>è¿è¡Œç»“æœå¦‚å›¾ï¼š
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2940b3bb0bb34940891cc1903067b2b3~tplv-k3u1fbpfcp-watermark.image" alt="123.gif"></p><p>æœ¬ç« èŠ‚ç®€å•å®ç°äº† myReact çš„ hooks åŠŸèƒ½ã€‚</p><p>æ’’èŠ±å®Œç»“ï¼Œreact è¿˜æœ‰å¾ˆå¤šå®ç°å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ å’Œç ”ç©¶ï¼Œå¸Œæœ›æœ‰ä¸‹æœŸï¼Œå’Œå¤§å®¶ä¸€èµ·æ‰‹å†™ react çš„æ›´å¤šåŠŸèƒ½ã€‚</p><header><h1>æ€»ç»“</h1></header><p>æœ¬æ–‡å‚è€ƒ <a href="https://pomb.us/build-your-own-react/" target="_blank" rel="noopener noreferrer">pomb.us</a> è¿›è¡Œå­¦ä¹ ï¼Œå®ç°äº†åŒ…æ‹¬è™šæ‹Ÿ DOMã€Fiberã€Diff ç®—æ³•ã€å‡½æ•°å¼ç»„ä»¶ã€hooks ç­‰åŠŸèƒ½çš„è‡ªå®šä¹‰ Reactã€‚</p><p>åœ¨å®ç°è¿‡ç¨‹ä¸­å°ç¼–å¯¹ React çš„åŸºæœ¬æœ¯è¯­åŠå®ç°æ€è·¯æœ‰äº†å¤§æ¦‚çš„æŒæ¡ï¼Œ<a href="https://pomb.us/build-your-own-react/" target="_blank" rel="noopener noreferrer">pomb.us</a> æ˜¯éå¸¸é€‚åˆåˆå­¦è€…çš„å­¦ä¹ èµ„æ–™ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <a href="https://pomb.us/build-your-own-react/" target="_blank" rel="noopener noreferrer">pomb.us</a> è¿›è¡Œå­¦ä¹ ï¼Œä¹Ÿæ¨èè·Ÿç€æœ¬æ–‡ä¸€æ­¥æ­¥å®ç° React çš„å¸¸è§åŠŸèƒ½ã€‚</p><p>æœ¬æ–‡æºç ï¼š <a href="https://github.com/jiaozitang/web-learn-note/tree/main/src/%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97/Promise" target="_blank" rel="noopener noreferrer">githubæºç </a> ã€‚</p><p>å»ºè®®è·Ÿç€ä¸€æ­¥æ­¥æ•²ï¼Œè¿›è¡Œå®æ“ç»ƒä¹ ã€‚</p><p>å¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢é˜…è¯»ï½</p><p>åˆ«å¿˜äº†ç‚¹ä¸ªèµé¼“åŠ±ä¸€ä¸‹æˆ‘å“¦ï¼Œç¬”èŠ¯â¤ï¸</p><header><h1>å‚è€ƒèµ„æ–™</h1></header><ul><li><p><a href="https://pomb.us/build-your-own-react/" target="_blank" rel="noopener noreferrer">https://pomb.us/build-your-own-react/</a></p></li><li><p><a href="https://www.bilibili.com/video/BV1Ki4y1u7Vr?t=78z" target="_blank" rel="noopener noreferrer">å¡é¢‚-bç«™-Reactæºç ï¼Œä½ åœ¨ç¬¬å‡ å±‚</a> </p></li><li><p><a href="https://jelly.jd.com/article/60aceb6b27393b0169c85231" target="_blank" rel="noopener noreferrer">æ‰‹å†™ä¸€ä¸ªç®€å•çš„ React</a></p></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/å‰ç«¯">å‰ç«¯</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/æ‰‹å†™-react">æ‰‹å†™React</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog"><div class="pagination-nav__label">Â«<!-- --> <!-- -->Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5fde237b.js"></script>
<script src="/assets/js/main.5fad3d91.js"></script>
</body>
</html>